<!--5/31/20 set sheet version manually with currentVersion in sheetworkers-->
<input type="hidden" name="attr_version" value="0" />
<!-- ADDED recalc checkbox to force sheet worker events. temp unhide for testing purposes-->
<input class="hidden" name="attr_recalc1" type="checkbox" />

<input class="hidden attr-chartype-selected" name="attr_charactertype" value="(@{chartype})" type="hidden" />

<!--tabs-->
<input class="tab character" name="attr_tab" data-i18n-title="character" title="Character" type="radio" value="1" checked />
<input class="tab ark" name="attr_tab" data-i18n-title="ark" title="Ark" type="radio" value="2" />
<!--<input class="tab npc_only" name="attr_tab" data-i18n-title="npc" title="NPC" type="radio" value="3" />-->
<input class="tab monster_only" name="attr_tab" data-i18n-title="monster" title="Monster" type="radio" value="4" />
<input class="tab settings" name="attr_tab" data-i18n-title="settings" title="Settings" type="radio" value="5" />

<div class="logo" title="MUTANT YEAR ZERO" data-i18n-title="logo-myz">
  <span class="sheet-logo-image lang-sv"></span>
</div>

<span class="character-type character-type-break" data-i18n="chartype">Character Type:&nbsp;&nbsp;</span>
<input type="radio" class="character-type sheet-chartype-mutant" name="attr_chartype" value="Mutant" checked />    
<span class="character-type">Mutant&nbsp;&nbsp;</span>
<input type="radio" class="character-type sheet-chartype-animal" name="attr_chartype" value="Animal" />                  
<span class="character-type">Animal&nbsp;&nbsp;</span>
<input type="radio" class="character-type sheet-chartype-robot"  name="attr_chartype" value="Robot" />                  
<span class="character-type">Robot&nbsp;&nbsp;</span>
<input type="radio" class="character-type sheet-chartype-human"  name="attr_chartype" value="Human" />                  
<span class="character-type">Human</span>


<div class="wrapper tab-content character">

    
  <div class="character-grid">

    <div class="character-heading box chartype-background-light toggle-dice-only toggle-monster-only ">
      <div class="heading-grid">
        <div class="heading-box heading-box1">
          <span class="sheet-label" data-i18n="name">Name</span><br>
          <input class="input input-center" type="text" name="attr_character_name" value="" title="@{character_name}" />
        </div>
        <div class="heading-box heading-box3 char-human">
          <span class="sheet-label" data-i18n="house">House</span><br>
          <input class="input input-center" type="text" name="attr_house" value="" title="@{house}" />
        </div> 
        <div class="heading-box heading-box3 char-animal">
          <span class="sheet-label" data-i18n="animaltype">Animal Type</span><br>
          <select class="input input-center" type="text" name="attr_animal_type" value="Animal type" title="@{animal_type}">
            <option value="animaltype" data-i18n="animaltype" selected  disabled hidden >Animal type</option>
            <option value="dogs" data-i18n="dogs">Dogs</option>
            <option value="cats" data-i18n="cats">Cats</option>
            <option value="rats" data-i18n="rats">Rats</option>
            <option value="bears" data-i18n="bears">Bears</option>
            <option value="apes" data-i18n="apes">Apes</option>
            <option value="rabbits" data-i18n="rabbits">Rabbits</option>
            <option value="badgers" data-i18n="badgers">Badgers</option>
            <option value="reptiles" data-i18n="reptiles">Reptiles</option>
            <option value="moose" data-i18n="moose">Moose</option>
            <option value="other" data-i18n="other">Other</option>
          </select>
        </div> 
        <div class="heading-box heading-box3 char-animal">
          <span class="sheet-label" data-i18n="species">Species</span><br>
          <input class="input input-center" type="text" name="attr_species" value="" title="@{species}" />
        </div>  
        <div class="heading-box heading-box4 char-robot">
          <span class="sheet-label" data-i18n="model">Model</span><br>
          <input class="input input-center" type="text" name="attr_model" value="" title="@{model}" />
        </div>     
        <div class="heading-box heading-box5m char-mutant">
          <span class="sheet-label" data-i18n="role">Role</span><br>
          <input class="input input-center" type="text" name="attr_role" value="" title="@{role}" />
        </div>   
        <div class="heading-box heading-box5 char-animal">
          <span class="sheet-label" data-i18n="role">Role</span><br>
          <input class="input input-center" type="text" name="attr_role" value="" title="@{role}" />
        </div>   
        <div class="heading-box heading-box5 char-human">
          <span class="sheet-label" data-i18n="profession">Profession</span><br>
          <input class="input input-center" type="text" name="attr_profession" value="" title="@{profession}" />
        </div>    
        <div class="heading-box heading-box6 char-robot">
          <span class="sheet-label" data-i18n="personality">Personality</span><br>
          <input class="input input-center" type="text" name="attr_personality" value="" title="@{personality}" />
        </div>    
        <div class="heading-box heading-box7 char-human char-animal char-mutant">
          <span class="sheet-label" data-i18n="age">Age</span><br>
          <input type="number" class="input-number" name="attr_age" title="@{age}">
        </div>
        <div class="heading-box heading-box9 char-human">
          <span class="sheet-label" data-i18n="reputation">Reputation</span><br>
          <input type="number" class="input-number" name="attr_reputation" title="@{reputation}" />
        </div>
        <div class="heading-box heading-box9 char-robot">
          <span class="sheet-label" data-i18n="hierarchy">Hierarchy</span><br>
          <input type="number" class="input-number" name="attr_hierarchy" title="@{hierarchy}" />
        </div>
        <div class="heading-box heading-box9 char-animal">
          <span class="sheet-label" data-i18n="rank">Rank</span><br>
          <input type="number" class="input-number" name="attr_rank" title="@{rank}" />
        </div>
      </div>
    </div>

    <div class="character-attributes chartype-background-dark box toggle-dice-only ">
      <!--Monster Stats-->
      <div class="monster monster-stat1">
        <span class="header monster-stats-box1">
          <input class="input-number header-h1" type="text" name="attr_character_name" value="" title="@{character_name}" data-i18n-placeholder="monster-name" placeholder="Monster's Name/Type" />
        </span>
        <div class="column-header monster-stats-box2">
          <span data-i18n="move" style="padding-left: 5px;">Move</span>
        </div>
        <div class="column-header monster-stats-box3">
          <span data-i18n="move-type">Move Type</span>
        </div>
        <div class="column-header monster-stats-box4"></div>
        <div class="column-header monster-stats-box5">
          <span data-i18n="armor-rating-abbr">AR</span>
        </div>
        <div class="column-header monster-stats-box6">
          <span data-i18n="max-abbr">Max</span>
        </div>
        <div class="column-header monster-stats-box7">
          <span data-i18n="armor-type">Armor Type</span>
        </div>
        <div class="column-header monster-stats-box8">
          <span data-i18n="misc-abbr">Misc</span>
        </div>
        <div class="column-header monster-stats-box9">
          <span data-i18n="total-abbr">Tot</span>
        </div>
        <div class="column-header monster-stats-box10"></div>

        <span class="monster-stats-box11">
          <input class="input-number" type="text" name="attr_movement" value="1" title="@{movement}" />
        </span>
        <span class="monster-stats-box12">
          <input class="input-number" type="text" name="attr_movement_type" data-i18n-placeholder="type" placeholder="type" title="@{movement_type}" />
        </span>
        <span class="monster-stats-box13"></span>
        <span class="monster-stats-box14">
          <input class="input-number" type="number" name="attr_armor1_bonus" value="0" min="0" title="@{armor1_bonus}" />
        </span>
        <span class="monster-stats-box15">
          <input class="input-number" type="number" name="attr_armor1_bonus_max" value="0" min="0" title="@{armor1_bonus_max}" />
        </span>
        <span class="monster-stats-box16">
          <input class="input-number" type="text" name="attr_armor1_name" data-i18n-placeholder="type" placeholder="type" title="@{armor1_name}" />
        </span>
        <span class="monster-stats-box17">
          <select class="input" name="attr_armor1_damage" data-i18n-title="armor1-bonus-misc" title="Miscellaneous bonus modifier (adjusts SKILL dice). @{armor1_damage}">
            <option value="6">+6</option>
            <option value="5">+5</option>
            <option value="4">+4</option>
            <option value="3">+3</option>
            <option value="2">+2</option>
            <option value="1">+1</option>
            <option value="0" selected>0</option>
            <option value="-1">-1</option>
            <option value="-2">-2</option>
            <option value="-3">-3</option>
            <option value="-4">-4</option>
            <option value="-5">-5</option>
            <option value="-6">-6</option>
          </select>
        </span>
        <span class="monster-stats-box18">
          <span class="input-span" name="attr_ar" value="0" data-i18n-title="armor-rating-total" title="Total GEAR dice included for armor1 + armor2 + armor3 + armor4. @{ar}"></span>
        </span>
        <span class="monster-stats-box19">
          <button type="action" name="act_armor-roll" data-i18n-title="update-dice-pool" data-i18n="armor" style="height: 2em; width: 3.75em; margin: 0 10px 0 0px;">
            Armor
          </button>
        </span>
      </div>
      <div class="attributes-grid">
        <!-- Broken Indicators -->
        <input class="broken-str" type="hidden" name="attr_strength_total" />
        <input class="broken-agi" type="hidden" name="attr_agility_total" />
        <input class="broken-wit" type="hidden" name="attr_wits_total" />
        <input class="broken-emp" type="hidden" name="attr_empathy_total" />
        <div class="attributes-box1 toggle-monster-only header">
            <h1 data-i18n="attribute-u">ATTRIBUTES</h1>
        </div>
        <div class="attributes-box2">
          <button type="action" name="act_strength-roll" value="" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
            <span class="label broken-str" data-i18n="strength" name="attr_strength_name">Strength</span>
          </button>
        </div>
        <div class="attributes-box3">
          <!-- PC or Monster Strength attr_strength updates pc/monster str depending on sheet tab-->
          <input class="broken-str" type="hidden" name="attr_strength" value="0" />
          <input class="input-number broken-str monster" type="number" name="attr_strength_monster" value="0" min="0" max="48" title="@{strength_monster}" />
          <input class="input-number broken-str toggle-monster-only" type="number" name="attr_strength_pc" value="0" min="0" max="6" title="@{strength_pc}" />
        </div>
        <div class="attributes-box4">
          <input class="broken-str" type="hidden" name="attr_strength" />
          <input type="radio" name="attr_damage" value="0" style="margin: 4px 8px 3px 2px;" data-i18n-title="no-damage" title="No Damage" checked />
          <input class="skull" type="radio" name="attr_damage" value="1" title="1 @{damage}" /><span></span>
          <input class="skull" type="radio" name="attr_damage" value="2" title="2 @{damage}" /><span></span>
          <input class="skull" type="radio" name="attr_damage" value="3" title="3 @{damage}" /><span></span>
          <input class="skull" type="radio" name="attr_damage" value="4" title="4 @{damage}" /><span></span>
          <input class="skull" type="radio" name="attr_damage" value="5" title="5 @{damage}" /><span></span>
          <input class="skull" type="radio" name="attr_damage" value="6" title="6 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="7" title="7 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="8" title="8 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="9" title="9 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="10" title="10 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="11" title="11 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="12" title="12 @{damage}" /><span></span>
          <!--force line break for 2nd row of skulls-->
          <div class="monster" style="width: 102%; height: 3px;">&nbsp;</div>
          <span class="monster" style="width: 21px;"></span>
          <input class="skull monster" type="radio" name="attr_damage" value="13" title="13 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="14" title="14 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="15" title="15 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="16" title="16 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="17" title="17 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="18" title="18 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="19" title="19 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="20" title="20 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="21" title="21 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="22" title="22 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="23" title="23 @{damage}" /><span></span>
          <input class="skull monster" type="radio" name="attr_damage" value="24" title="24 @{damage}" /><span></span>
          <!--force line break for 3rd row of skulls-->
          <div class="monster" style="width: 102%; height: 3px;">&nbsp;</div>
          <input class="monster extra-damage-show" type="checkbox" name="attr_show_more_damage" value="1" data-i18n-title="extra-damage" title="Toggle extra damage tracking (25-48)" style="padding-top: 6px;" />
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="25" title="25 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="26" title="26 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="27" title="27 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="28" title="28 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="29" title="29 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="30" title="30 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="31" title="31 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="32" title="32 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="33" title="33 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="34" title="34 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="35" title="35 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="36" title="36 @{damage}" /><span></span>
          <!--force line break for 4th row of skulls-->
          <div class="monster" style="width: 102%; height: 3px;">&nbsp;</div>
          <span class="monster" style="width: 21px;"></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="37" title="37 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="38" title="38 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="39" title="39 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="40" title="40 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="41" title="41 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="42" title="42 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="43" title="43 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="44" title="44 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="45" title="45 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="46" title="46 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="47" title="47 @{damage}" /><span></span>
          <input class="skull monster extra-damage-show" type="radio" name="attr_damage" value="48" title="48 @{damage}" /><span></span>
        </div>
        <div class="attributes-box5">
          <span class="input-span broken-str" name="attr_strength_total" value="0" title="@{strength_total}">0</span>
          <input type="hidden" name="attr_strength_total_max" value="0" />
        </div>
        <div class="attributes-box6">
          <button type="action" name="act_agility-roll" value="" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
            <span class="label broken-agi" data-i18n="agility" name="attr_agility_name">Agility</span>
          </button>
        </div>
        <div class="attributes-box7">
          <input class="input-number broken-agi" type="number" name="attr_agility" value="0" min="0" title="@{agility}" />
        </div>
        <div class="attributes-box8">
          <input class="broken-agi" type="hidden" name="attr_agility" />
          <input type="radio" name="attr_fatigue" value="0" style="margin: 4px 8px 3px 2px;" data-i18n-title="no-damage" title="No Damage" checked />
          <input class="skull" type="radio" name="attr_fatigue" value="1" title="1 @{fatigue}" /><span></span>
          <input class="skull" type="radio" name="attr_fatigue" value="2" title="2 @{fatigue}" /><span></span>
          <input class="skull" type="radio" name="attr_fatigue" value="3" title="3 @{fatigue}" /><span></span>
          <input class="skull" type="radio" name="attr_fatigue" value="4" title="4 @{fatigue}" /><span></span>
          <input class="skull" type="radio" name="attr_fatigue" value="5" title="5 @{fatigue}" /><span></span>
          <input class="skull" type="radio" name="attr_fatigue" value="6" title="6 @{fatigue}" /><span></span>
        </div>
        <div class="attributes-box9">
          <span class="input-span broken-agi" name="attr_agility_total" value="0" title="@{agility_total}">0</span>
          <input type="hidden" name="attr_agility_total_max" value="0" />
        </div>
        <div class="attributes-box10">
          <button type="action" name="act_wits-roll" value="" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
            <span class="label broken-wit" data-i18n="wits" name="attr_wits_name">Wits</span>
          </button>
        </div>
        <div class="attributes-box11">
          <input class="input-number broken-wit" type="number" name="attr_wits" value="0" min="0" title="@{wits}" />
        </div>
        <div class="attributes-box12">
          <input class="broken-wit" type="hidden" name="attr_wits" />
          <input type="radio" name="attr_confusion" value="0" style="margin: 4px 8px 3px 2px;" data-i18n-title="no-damage" title="No Damage" checked />
          <input class="skull" type="radio" name="attr_confusion" value="1" title="1 @{confusion}" /><span></span>
          <input class="skull" type="radio" name="attr_confusion" value="2" title="2 @{confusion}" /><span></span>
          <input class="skull" type="radio" name="attr_confusion" value="3" title="3 @{confusion}" /><span></span>
          <input class="skull" type="radio" name="attr_confusion" value="4" title="4 @{confusion}" /><span></span>
          <input class="skull" type="radio" name="attr_confusion" value="5" title="5 @{confusion}" /><span></span>
          <input class="skull" type="radio" name="attr_confusion" value="6" title="6 @{confusion}" /><span></span>
        </div>
        <div class="attributes-box13">
          <span class="input-span broken-wit" name="attr_wits_total" value="0" title="@{wits_total}">0</span>
          <input type="hidden" name="attr_wits_total_max" value="0" />
        </div>
        <div class="attributes-box14">
          <button type="action" name="act_empathy-roll" value="" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
            <span class="label broken-emp" data-i18n="empathy" name="attr_empathy_name">Empathy</span>
          </button>
        </div>
        <div class="attributes-box15">
          <input class="input-number broken-emp" type="number" name="attr_empathy" value="0" min="0" title="@{empathy}" />
        </div>
        <div class="attributes-box16">
          <input class="broken-emp" type="hidden" name="attr_empathy" />
          <input type="radio" name="attr_doubt" value="0" style="margin: 4px 8px 3px 2px;" data-i18n-title="no-damage" title="No Damage" checked />
          <input class="skull" type="radio" name="attr_doubt" value="1" title="1 @{doubt}" /><span></span>
          <input class="skull" type="radio" name="attr_doubt" value="2" title="2 @{doubt}" /><span></span>
          <input class="skull" type="radio" name="attr_doubt" value="3" title="3 @{doubt}" /><span></span>
          <input class="skull" type="radio" name="attr_doubt" value="4" title="4 @{doubt}" /><span></span>
          <input class="skull" type="radio" name="attr_doubt" value="5" title="5 @{doubt}" /><span></span>
          <input class="skull" type="radio" name="attr_doubt" value="6" title="6 @{doubt}" /><span></span>
        </div>
        <div class="attributes-box17">
          <span class="input-span broken-emp" name="attr_empathy_total" value="0" title="@{empathy_total}">0</span>
          <input type="hidden" name="attr_empathy_total_max" value="0" />
        </div>
      </div>
      <div class="conditions-grid toggle-monster-only chartype-background-dark">
        <div class="conditions-box2"><input class="input xbox conditions-hungry" type="checkbox" name="attr_hungry" value="1" data-i18n-title="condition-hungry" title="@{hungry}" /><span></span></div>
        <input class="hidden conditions-hungry" type="checkbox" name="attr_hungry" value="1" />
        <div class="conditions-box3">
          <span class="header-h1 conditions-hungry" data-i18n="hungry">Hungry</span>
        </div>
        <div class="conditions-box4"><input class="input xbox conditions-sleepy" type="checkbox" name="attr_sleepy" value="1" data-i18n-title="condition-sleepy" title="@{sleepy}" /><span></span></div>
        <input class="hidden conditions-sleepy" type="checkbox" name="attr_sleepy" value="1" />
        <div class="conditions-box5">
          <span class="header-h1 conditions-sleepy" data-i18n="sleepy">Sleepy</span>
        </div>
        <div class="conditions-box6"><input class="input xbox conditions-thirsty" type="checkbox" name="attr_thirsty" value="1" data-i18n-title="condition-thirsty" title="@{thirsty}" /><span></span></div>
        <input class="hidden conditions-thirsty" type="checkbox" name="attr_thirsty" value="1" />
        <div class="conditions-box7">
          <span class="header-h1 conditions-thirsty" data-i18n="thirsty">Thirsty</span>
        </div>
        <div class="conditions-box8"><input class="input xbox conditions-cold" type="checkbox" name="attr_cold" value="1" data-i18n-title="condition-cold" title="@{cold}" /><span></span></div>
        <input class="hidden conditions-cold" type="checkbox" name="attr_cold" value="1" />
        <div class="conditions-box9">
          <span class="header-h1 conditions-cold" data-i18n="cold">Cold</span>
        </div>
      </div>
    </div>

    <div class="monster-attacks box toggle-dice-only monster ">
      <div class="monster-attacks-grid">
        <div class="monster-attacks-box header">
          <h1 data-i18n="monster-attacks-u">MONSTER ATTACKS</h1>
        </div>
        <div class="monster-attacks-box1 column-header"></div>
        <div class="monster-attacks-box2 column-header"></div>
        <div class="monster-attacks-box3 column-header">
          <span data-i18n="name">Name</span>
        </div>
        <div class="monster-attacks-box4 column-header">
          <span data-i18n="base">Base</span>
        </div>
        <div class="monster-attacks-box5 column-header">
          <span data-i18n="damage-abbr">Dmg</span>
        </div>
        <div class="monster-attacks-box6 column-header">
          <span data-i18n="type">Type</span>
        </div>
        <div class="monster-attacks-box7 column-header">
          <span data-i18n="range">Range</span>
        </div>
        <div class="monster-attacks-box8 repeating-fields">
          <fieldset class="repeating_monster">
            <div class="monster-attacks-grid">
              <input class="expand" type="checkbox" name="attr_expand" value="1" data-i18n-title="show-hide" title="show/hide" checked /><span></span>
              <input class="monster-attacks-box1 counted" type="checkbox" name="attr_rep_counter" value="1" style="opacity: 0; position: absolute; cursor: default; z-index: 1; width: 0;" checked /><span></span>
              <button class="monster-attacks-box2 roll-button" type="action" name="act_monster-attack-roll" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
                t
              </button>
              <input class="monster-attacks-box3 input" type="text" name="attr_attack_name" value="" title="@{repeating_monster_$X_attack_name}" data-i18n-placeholder="name" placeholder="Name" />
              <input class="monster-attacks-box4 input-number" type="text" name="attr_attack_dice" value="0" title="@{repeating_monster_$X_attack_dice}" />
              <input class="monster-attacks-box5 input-number" type="text" name="attr_attack_damage" value="0" title="@{repeating_monster_$X_attack_damage}" />
              <input class="monster-attacks-box6 input" type="text" name="attr_attack_features" value="" title="@{repeating_monster_$X_attack_features}" />
              <select class="monster-attacks-box7 input" name="attr_attack_range" title="@{repeating_monster_$X_attack_range}">
                <option value="n/a" data-i18n="not-applicable-abbr">n/a</option>
                <option value="Arm" data-i18n="arms-length-abbr" selected>Arm's L.</option>
                <option value="Near" data-i18n="near">Near</option>
                <option value="Short" data-i18n="short">Short</option>
                <option value="Long" data-i18n="long">Long</option>
                <option value="Distant" data-i18n="distant">Distant</option>
              </select>
              <textarea class="monster-attacks-box8 input-textarea" name="attr_attack_description" title="@{repeating_monster_$X_attack_description}" data-i18n-placeholder="description" placeholder="description"></textarea>
            </div>
          </fieldset>
        </div>
      </div>
    </div>

    <div class="character-appearance box chartype-background-light toggle-dice-only toggle-monster-only ">
      <div class="appearance-grid">
        <div class="appearance-box appearance-box1 header">
          <h1 data-i18n="appearance-u">APPEARANCE</h1>
        </div>
        <div class="appearance-box appearance-box2">
          <span class="label char-mutant char-human char-animal" data-i18n="face">Face</span>
          <span class="label char-robot" data-i18n="colour">Colour</span>
        </div>
        <div class="appearance-box appearance-box3">
          <textarea class="input-textarea char-mutant char-human char-animal" name="attr_face" title="@{face}"></textarea>
          <textarea class="input-textarea char-robot" name="attr_robot_colour" title="@{robot_colour}"></textarea>
        </div>
        <div class="appearance-box appearance-box4">
          <span class="label char-mutant char-human char-animal" data-i18n="body">Body</span>
          <span class="label char-robot" data-i18n="voice">Voice</span>
        </div>
        <div class="appearance-box appearance-box5">
          <textarea class="input-textarea char-mutant char-human char-animal" name="attr_body" title="@{body}"></textarea>
          <textarea class="input-textarea char-robot" name="attr_robot_voice" title="@{robot_voice}"></textarea>
        </div>
        <div class="appearance-box appearance-box6 ">
          <span class="label char-mutant char-human char-animal" data-i18n="clothing">Clothing</span>
          <span class="label char-robot" data-i18n="features">Features</span>
        </div>
        <div class="appearance-box appearance-box7">
          <textarea class="input-textarea char-mutant char-human char-animal" name="attr_clothing" title="@{clothing}"></textarea>
          <textarea class="input-textarea char-robot" name="attr_robot_features" title="@{robot_features}"></textarea>
        </div>
        <div class="character-chassis chassis-box chassis-box1 char-robot header">
          <h1 data-i18n="chassisparts-u">CHASSIS PARTS</h1>
        </div>
        <div class="character-chassis chassis-box char-robot chassis-box2">
          <div class="label" data-i18n="head">Head</div>
          <input type="text" class="input-text" name="attr_chassis_head" title="@{chassis_head}">
        </div>
        <div class="character-chassis chassis-box char-robot chassis-box4">
          <div class="label" data-i18n="torso">Torso</div>
          <input type="text" class="input-text" name="attr_chassis_torso" title="@{chassis_torso}">
        </div>
        <div class="character-chassis chassis-box char-robot chassis-box6">
          <div class="label" data-i18n="undercarriage">Undercarriage</div>
          <input type="text" class="input-text" name="attr_chassis_under" title="@{chassis_under}">
        </div>
      </div>
    </div>

    <div class="character-injuries box chartype-background-light toggle-dice-only toggle-monster-only toggle-npc-only ">
      <div class="injuries-grid">
        <div class="injuries-box1 header">
          <h1 data-i18n="critical-u">CRITICAL INJURIES</h1>
        </div>
        <div class="injuries-box2 column-header">
          <span data-i18n="injury">Injury</span>
        </div>
        <div class="injuries-box3 column-header">
          <span data-i18n="lethal">Lethal</span>
        </div>
        <div class="injuries-box4 column-header">
          <span data-i18n="time-limit">Time Limit</span>
        </div>
        <div class="injuries-box5 column-header">
          <span data-i18n="effects">Effects</span>
        </div>
        <div class="injuries-box6 column-header">
          <span data-i18n="heal-time">heal Time</span>
        </div>
        <div class="injuries-box7">
          <fieldset class="repeating_injuries">
            <div class="injuries-grid">
              <input type="text" class="injuries-box8 input" name="attr_injury_name" value="" title="@{repeating_injuries_$X_injury_name}" />
              <select class="injuries-box9 input" name="attr_injury_lethal" title="@{repeating_injuries_$X_injury_lethal}">
                <option value="no" data-i18n="no" selected>No</option>
                <option value="yes" data-i18n="yes">Yes</option>
                <option value="yes -1" data-i18n="yes-1">Yes,-1</option>
                <option value="n/a" data-i18n="not-applicable-abbr">n/a</option>
              </select>
              <input type="text" class="injuries-box10 input" name="attr_injury_time_limit" value="n/a" title="@{repeating_injuries_$X_injury_time_limit}" />
              <input type="text" class="injuries-box11 input" name="attr_injury_effects" value="" title="@{repeating_injuries_$X_injury_effects}" />
              <input type="text" class="injuries-box12 input" name="attr_injury_heal_time" value="n/a" title="@{repeating_injuries_$X_injury_heal_time}" />
            </div>
          </fieldset>
        </div>
        <div class="injuries-box13">
          <img alt="skull" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/FBL%20skull.png" title="" style="position: absolute; height: 5em; width: 7em; margin: -2.8em 0 0 -2em;" />
        </div>
      </div>
    </div>

    <div class="character-weapons box chartype-background-light toggle-dice-only toggle-monster-only ">
      <div class="weapons-grid">
        <div class="weapons-box header">
          <h1 style="margin-top: -21px;"></h1>
        </div>
        <div class="weapons-box-header header">
          <h1 data-i18n="weapon-u" style="margin-top: -21px;">WEAPONS</h1>
        </div>
        <div class="weapons-box-skill column-header">
          <h1 data-i18n="skill" style="margin-top: -21px;">SKILL</h1>
        </div>
        <div class="weapons-box-gear column-header">
          <h1 data-i18n="gear" style="margin-top: -21px;">GEAR</h1>
        </div>
        <div class="weapons-box-damage column-header">
          <h1 data-i18n="damage" style="margin-top: -21px;">DAMAGE</h1>
        </div>
        <div class="weapons-box1 column-header">
          <span data-i18n="attack-abbrv">Attk</span>
        </div>
        <div class="weapons-box2 column-header">
          <span data-i18n="parry">Parry</span>
        </div>
        <div class="weapons-box3 column-header">
          <span data-i18n="name">Name</span>
        </div>
        <div class="weapons-box4 column-header">
          <span data-i18n="type">Type</span>
        </div>
        <div class="weapons-box5 column-header">
          <span data-i18n="attr-abbr">Attr</span>
        </div>
        <div class="weapons-box6 column-header">
          <span>|</span>
        </div>
        <div class="weapons-box7 column-header">
          <span data-i18n="modifier-abbr">Mod</span>
        </div>
        <div class="weapons-box8 column-header">
          <span data-i18n="skill">Skill</span>
        </div>
        <div class="weapons-box9 column-header">
          <span> | </span>
        </div>
        <div class="weapons-box11 column-header">
          <span data-i18n="bonus-abbr">Bonus</span>
        </div>
        <div class="weapons-box12 column-header">
          <span data-i18n="max-abbr">Max</span>
        </div>
        <div class="weapons-box13 column-header">
          <span data-i18n="modifier-abbr">Mod</span>
        </div>
        <div class="weapons-box14 column-header">
          <span data-i18n="total-abbr">Sum</span>
        </div>

        <div class="weapons-box16 column-header">
          <span>|</span>
        </div>
        <div class="weapons-box17 column-header">
          <span data-i18n="base">Base</span>
        </div>
        <div class="weapons-box18 column-header">
          <span data-i18n="modifier-abbr">Mod</span>
        </div>
        <div class="weapons-box19 column-header">
          <span data-i18n="damage-abbr">Dmg</span>
        </div>
        <div class="weapons-box27">
          <fieldset class="repeating_weapons">
            <div class="weapons-grid weapons-repeating chartype-background-light">
              <input type="hidden" name="attr_weapon_damage_misc" value="0" readonly />
              <button class="weapons-box28 roll-button" type="action" name="act_attack-roll" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
                t
              </button>
              <button class="weapons-box29 roll-button" type="action" name="act_attack-parry-roll" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
                t
              </button>
              <input class="weapons-box30 input" type="text" name="attr_weapon_name" value="" title="@{repeating_weapons_$X_weapon_name}" />
              <select class="weapons-box31 input" name="attr_weapon_skill" title="@{repeating_weapons_$X_weapon_skill}">
                <option value="0" data-i18n="melee" selected>Melee</option>
                <option value="1" data-i18n="ranged">Ranged</option>
              </select>
              <span class="weapons-box32 readonly" name="attr_weapon_base_total" value="0" data-i18n-title="weapon-type-base" title="BASE dice as per weapon/skill type. @{repeating_weapons_$X_weapon_base_total}">0</span>
              <span class="weapons-box33 readonly separator"> | </span>
              <!--<span class="weapons-box34 readonly" name="attr_weapon_skill_value" value="0" data-i18n-title="weapon-type-skill" title="SKILL dice as per weapon/skill type. @{repeating_weapons_$X_weapon_skill_value}">0</span>-->
              <select class="weapons-box34 input" name="attr_weapon_skill_misc" data-i18n-title="weapon-skill-misc" title="Miscellaneous attack modifier (adjusts SKILL dice). @{repeating_weapons_$X_weapon_skill_misc}">
                <option value="6">+6</option>
                <option value="5">+5</option>
                <option value="4">+4</option>
                <option value="3">+3</option>
                <option value="2">+2</option>
                <option value="1">+1</option>
                <option value="0" selected>+0</option>
                <option value="-1">-1</option>
                <option value="-2">-2</option>
                <option value="-3">-3</option>
                <option value="-4">-4</option>
                <option value="-5">-5</option>
                <option value="-6">-6</option>
              </select>
              <span class="weapons-box35 readonly" name="attr_weapon_skill_total" value="0" data-i18n-title="weapon-skill-total" title="Total Skill dice included with the attack. @{repeating_weapons_$X_weapon_skill_total}">0</span>
              <span class="weapons-box37 readonly separator"> | </span>
              <select class="weapons-box38 input" name="attr_weapon_bonus" data-i18n-title="weapon-bonus" title="Record the weapon's CURRENT bonus up to MAX (adjusts Gear dice). @{repeating_weapons_$X_weapon_bonus}">
                <option value="0" selected>+0</option>
                <option value="1">+1</option>
                <option value="2">+2</option>
                <option value="3">+3</option>
                <option value="4">+4</option>
                <option value="5">+5</option>
                <option value="6">+6</option>
                <option value="7">+7</option>
                <option value="8">+8</option>
                <option value="9">+9</option>
                <option value="10">+10</option>
                <option value="11">+11</option>
                <option value="12">+12</option>
              </select>
              <select class="weapons-box39 input" name="attr_weapon_bonus_max" data-i18n-title="weapon-bonus-max" title="Record the weapon's UNDAMAGED bonus. @{repeating_weapons_$X_weapon_bonus_max}">
                <option value="0" selected>0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
              </select>
              <select class="weapons-box40 input" name="attr_weapon_bonus_misc" data-i18n-title="weapon-bonus-misc" title="Miscellaneous bonus modifier (adjusts Gear dice). @{repeating_weapons_$X_weapon_bonus_misc}">
                <option value="6">+6</option>
                <option value="5">+5</option>
                <option value="4">+4</option>
                <option value="3">+3</option>
                <option value="2">+2</option>
                <option value="1">+1</option>
                <option value="0" selected>+0</option>
              </select>
              <span class="weapons-box41 readonly" name="attr_weapon_bonus_total" value="0" data-i18n-title="weapon-bonus-total" title="Total GEAR dice included with the attack. @{repeating_weapons_$X_weapon_bonus_total}">0</span>
              <span class="weapons-box47 readonly separator"> | </span>
              <select class="weapons-box48 input" name="attr_weapon_damage" data-i18n-title="weapon-damage" title="Damage as per weapon tables. @{repeating_weapons_$X_weapon_damage}">
                <option value="0" selected>0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
              </select>
              <select class="weapons-box49 input" name="attr_weapon_damage_misc" data-i18n-title="modifier-damage-abbr" title="Miscellaneous damage modifier. @{repeating_weapons_$X_weapon_damage_misc}">
                <option value="6">+6</option>
                <option value="5">+5</option>
                <option value="4">+4</option>
                <option value="3">+3</option>
                <option value="2">+2</option>
                <option value="1">+1</option>
                <option value="0" selected>+0</option>
                <option value="-1">-1</option>
                <option value="-2">-2</option>
                <option value="-3">-3</option>
                <option value="-4">-4</option>
                <option value="-5">-5</option>
                <option value="-6">-6</option>
              </select>
              <span class="weapons-box50 readonly" name="attr_weapon_damage_total" value="0" data-i18n-title="weapon-damage-total" title="Total damage included with the attack. @{repeating_weapons_$X_weapon_damage_total}">0</span>
              <!-- expand 2nd row -->
              <input class="expand" type="checkbox" name="attr_expand" value="1" data-i18n-title="show-hide" title="show/hide" checked /><span></span>
              <!-- 2nd row -->
              <div class="weapons-subgrid">
                <div class="weapons-box51">
                  <span data-i18n="grip">Grip</span>
                </div>
                <select class="weapons-box52 input" name="attr_weapon_grip" title="@{repeating_weapons_$X_weapon_grip}" title="@{repeating_weapons_$X_weapon_grip}">
                  <option data-i18n="not-applicable-abbr" value="n/a">n/a</option>
                  <option data-i18n="one-hand-abbr" value="1H" selected>1H</option>
                  <option data-i18n="two-hand-abbr" value="2H">2H</option>
                </select>
                <div class="weapons-box53">
                  <span data-i18n="range">Range</span>
                </div>
                <select class="weapons-box54 input" name="attr_weapon_range" title="@{repeating_weapons_$X_weapon_range}">
                  <option value="Arm" selected data-i18n="arms-length-abbr">Arm's L.</option>
                  <option value="Near" data-i18n="near">Near</option>
                  <option value="Short" data-i18n="short">Short</option>
                  <option value="Long" data-i18n="long">Long</option>
                  <option value="Distant" data-i18n="distant">Distant</option>
                </select>
                <div class="weapons-box55">
                  <span data-i18n="carried-abbr">Carr</span>
                </div>
                <select class="weapons-box56 input" name="attr_weapon_carried" title="@{repeating_weapons_$X_weapon_carried}">
                  <option data-i18n="yes" value="1" selected>Yes</option>
                  <option data-i18n="no" value="0">No</option>
                  <option data-i18n="vehicle" value="0">vehicle</option>
                </select>
                <div class="weapons-box57">
                  <span data-i18n="weight-abbr">Wt</span>
                </div>
                <select class="weapons-box58 input" name="attr_weapon_weight" title="@{repeating_weapons_$X_weapon_weight}">
                  <option data-i18n="tiny-abbr" value="0" selected>T</option>
                  <option data-i18n="quarter-abbr" value="0.25">Q</option>
                  <option data-i18n="light-abbr" value="0.5">L</option>
                  <option data-i18n="normal-abbr" value="1">N</option>
                  <option data-i18n="heavy-abbr" value="2">H</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select>
                <div class="weapons-box59">
                  <span data-i18n="features">Features</span>
                </div>
                <input class="weapons-box60 input" type="text" name="attr_weapon_features" value="" title="@{repeating_weapons_$X_weapon_features}" />
              </div>
            </div>
          </fieldset>
        </div>
      </div>
    </div>

    <div class="character-skill-dice-box box ">
      <!--hidden skill attributes to be used as placeholder for currently selected skill-->
      <input type="hidden" name="attr_skill_attribute_selected" value="" readonly />
      <input type="hidden" name="attr_skill_bonus_misc_selected" value="" readonly />
      <input type="hidden" name="attr_skill_bonus_misc_gear_selected" value="" readonly />
      <input type="hidden" name="attr_skill_only_selected" value="" readonly />
      <input type="hidden" name="attr_skill_notes_selected" value="" readonly />

      <div class="character-skills box chartype-background-light toggle-dice-only">
        <input type="checkbox" class="skill-order-group hidden" name="attr_skill_order_group" value="1" />
        <div class="skills-grid" data-i18n-list="skills-list">
          
          <span>
            <div class="skills-box1 header">
              <h1 data-i18n="skill-u">SKILLS</h1>
            </div>
            <div class="skills-box-base column-header">
              <span data-i18n="attribute-abbr">Attr</span>
            </div>
            <div class="skills-box2 column-header">
              <span data-i18n="lvl-abbr">Lvl</span>
            </div>
            <div class="skills-box3 column-header">
              <span data-i18n="misc-skill-abbr">Mod</span>
            </div>
            <div class="skills-box4 column-header">
              <span data-i18n="misc-gear-abbr">Gear</span>
            </div>
            <div class="skills-box5 column-header">
              <span data-i18n="sum-abbr">Sum</span>
            </div>
          </span>

          <span class="skills-row chartype-background-dark" data-i18n-list-item="comprehend">
            <span class="skill-name" data-i18n="comprehend" name="attr_comprehend_name">Comprehend</span>
            <span class="small-caps skill-name" data-i18n="wits-abbr">Wit&nbsp;<span class="readonly" name="attr_wits_total"></span></span>
            <input class="input-number character-skill-level" type="number" name="attr_comprehend" value="0" min="0" title="@{comprehend}" />
            <select class="input character-skill-mod" name="attr_comprehend_skill_misc" title="@{comprehend_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input character-skill-gear" name="attr_comprehend_gear_misc" title="@{comprehend_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_comprehend" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly character-skill-total" name="attr_comprehend_total" value="0" title="@{comprehend_total}">0</span>
            </button>
            <!-- expand 2nd row -->
            <!--<input class="expand" type="checkbox" name="attr_expand_comprehend" value="1" data-i18n-title="show-hide" title="show/hide" /><span></span>

            <div class="comprehend-row2 skills-row2">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_comprehend_notes" data-i18n-placeholder="notes-text" placeholder="notes..." title="@{comprehend_notes}"></textarea>
              </div>
            </div>-->
          </span>
          
          <span class="skills-row chartype-background-dark" data-i18n-list-item="endure">
            <span class="skill-name" data-i18n="endure" name="attr_endure_name">Endure</span>
            <span class="small-caps skill-name" data-i18n="strength-abbr">Str&nbsp;<span name="attr_strength_total"></span></span>
            <button type="action" name="act_dice_pool_endure_monster" class="monster" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice."><span data-i18n="endure">endure</span>&nbsp;(<span data-i18n="monster">Monster</span>)</button>
            <input class="input-number character-skill-level toggle-monster-only" type="number" name="attr_endure" value="0" min="0" title="@{endure}" />
            <select class="input character-skill-mod toggle-monster-only" name="attr_endure_skill_misc" title="@{endure_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input character-skill-gear toggle-monster-only" name="attr_endure_gear_misc" title="@{endure_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_endure" class="toggle-monster-only" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly character-skill-total toggle-monster-only" name="attr_endure_total" value="0" title="@{endure_total}">0</span>
            </button>
            <!-- monster stats -->
            <select class="input monster" name="attr_endure_monster" title="@{endure_monster}" style="width: 3em; margin: 0;">
              <option value="0" selected>0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
            </select>
            <select class="input monster" name="attr_endure_skill_misc_monster" title="@{endure_skill_misc_monster}">
              <option value="10">+10</option>
              <option value="9">+9</option>
              <option value="8">+8</option>
              <option value="7">+7</option>
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
            </select>
            <select class="input monster" name="attr_endure_gear_misc_monster" title="@{endure_gear_misc_monster}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <span class="readonly monster" name="attr_endure_monster_total" value="0" title="@{endure_monster_total}">0</span>
            <!-- end monster stats -->

            <!-- expand 2nd row -->
            <!--<input class="expand toggle-monster-only" type="checkbox" name="attr_expand_endure" value="1" data-i18n-title="show-hide" title="show/hide" /><span class="toggle-monster-only"></span>

            <div class="endure-row2 skills-row2 toggle-monster-only">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_endure_notes" data-i18n-placeholder="notes-text" placeholder="notes..." title="@{endure_notes}"></textarea>
              </div>
            </div>-->
          </span>

          <span class="skills-row chartype-background-dark" chartype-background-dark data-i18n-list-item="fight">
            <span class="skill-name" data-i18n="fight-as-skill" name="attr_fight_name">Fight</span>
            <span class="small-caps skill-name" data-i18n="strength-abbr">Str&nbsp;<span name="attr_strength_total"></span></span>
            <button type="action" name="act_dice_pool_fight_monster" class="monster" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice."><span data-i18n="fight-as-skill">fight</span>&nbsp;(<span data-i18n="monster">Monster</span>)</button>
            <input class="input-number character-skill-level toggle-monster-only" type="number" name="attr_fight" value="0" min="0" title="@{fight}" />
            <select class="input character-skill-mod toggle-monster-only" name="attr_fight_skill_misc" title="@{fight_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input character-skill-gear toggle-monster-only" name="attr_fight_gear_misc" title="@{fight_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_fight" class="toggle-monster-only" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly character-skill-total toggle-monster-only" name="attr_fight_total" value="0" title="@{fight_total}">0</span>
            </button>
            <!-- monster stats -->
            <select class="input monster" name="attr_fight_monster" title="@{fight_monster}" style="width: 3em; margin: 0;">
              <option value="0" selected>0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
            </select>
            <select class="input monster" name="attr_fight_skill_misc_monster" title="@{fight_skill_misc_monster}">
              <option value="10">+10</option>
              <option value="9">+9</option>
              <option value="8">+8</option>
              <option value="7">+7</option>
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
            </select>
            <select class="input monster" name="attr_fight_gear_misc_monster" title="@{fight_gear_misc_monster}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <span class="readonly monster" name="attr_fight_monster_total" value="0" title="@{fight_monster_total}">0</span>
            <!-- end monster stats -->

            <!-- expand 2nd row -->
            <!--<input class="expand toggle-monster-only" type="checkbox" name="attr_expand_fight" value="1" data-i18n-title="show-hide" title="show/hide" /><span class="toggle-monster-only"></span>

            <div class="fight-row2 skills-row2 toggle-monster-only">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_fight_notes" data-i18n-placeholder="notes-text"   placeholder="notes..." title="@{fight_notes}"></textarea>

              </div>
            </div>-->
          </span>
          
          <span class="skills-row chartype-background-dark" data-i18n-list-item="force">
            <span class="skill-name" data-i18n="force" name="attr_force_name">Force</span>
            <span class="small-caps skill-name" data-i18n="strength-abbr">Str&nbsp;<span name="attr_strength_total"></span></span>
            <button type="action" name="act_dice_pool_force_monster" class="monster" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice."><span data-i18n="force">force</span>&nbsp;(<span data-i18n="monster">Monster</span>)</button>
            <input class="input-number toggle-monster-only" type="number" name="attr_force" value="0" min="0" title="@{force}" />
            <select class="input toggle-monster-only" name="attr_force_skill_misc" title="@{force_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input toggle-monster-only" name="attr_force_gear_misc" title="@{force_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_force" class="toggle-monster-only" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly toggle-monster-only" name="attr_force_total" value="0" title="@{force_total}">0</span>
            </button>
              <!-- monster stats -->
            <select class="input monster" name="attr_force_monster" title="@{force_monster}" style="width: 3em; margin: 0;">
              <option value="0" selected>0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
            </select>
            <select class="input monster" name="attr_force_skill_misc_monster" title="@{force_skill_misc_monster}">
              <option value="10">+10</option>
              <option value="9">+9</option>
              <option value="8">+8</option>
              <option value="7">+7</option>
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
            </select>
            <select class="input monster" name="attr_force_gear_misc_monster" title="@{force_gear_misc_monster}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <span class="readonly monster" name="attr_force_monster_total" value="0" title="@{force_monster_total}">0</span>
            <!-- end monster stats -->

            <!-- expand 2nd row -->
            <!--<input class="expand toggle-monster-only" type="checkbox" name="attr_expand_force" value="1" data-i18n-title="show-hide" title="show/hide" /><span class="toggle-monster-only"></span>

            <div class="force-row2 skills-row2 toggle-monster-only">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_force_notes" data-i18n-placeholder="notes-text"   placeholder="notes..." title="@{force_notes}"></textarea>
              </div>
            </div>-->
          </span>

          <span class="skills-row chartype-background-dark" data-i18n-list-item="heal">
            <span class="skill-name" data-i18n="heal" name="attr_heal_name">Heal</span>
            <span class="small-caps skill-name" data-i18n="empathy-abbr">Emp&nbsp;<span name="attr_empathy_total"></span></span>
            <input class="input-number" type="number" name="attr_heal" value="0" min="0" title="@{heal}" />
            <select class="input" name="attr_heal_skill_misc" title="@{heal_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input" name="attr_heal_gear_misc" title="@{heal_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_heal" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly" name="attr_heal_total" value="0" title="@{heal_total}">0</span>
            </button>
            <!-- expand 2nd row -->
            <!--<input class="expand" type="checkbox" name="attr_expand_heal" value="1" data-i18n-title="show-hide" title="show/hide" /><span></span>

            <div class="heal-row2 skills-row2">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_heal_notes" data-i18n-placeholder="notes-text" placeholder="notes..." title="@{heal_notes}"></textarea>
              </div>
            </div>-->
          </span>

          <span class="skills-row chartype-background-dark" data-i18n-list-item="know_the_zone">
            <span class="skill-name" data-i18n="know-the-zone" name="attr_know_the_zone_name">Know the Zone</span>
            <span class="small-caps skill-name" data-i18n="wits-abbr">Wit&nbsp;<span name="attr_wits_total"></span></span>
            <input class="input-number character-skill-level" type="number" name="attr_know_the_zone" value="0" min="0" title="@{know_the_zone}" />
            <select class="input character-skill-mod" name="attr_know_the_zone_skill_misc" title="@{know_the_zone_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input character-skill-gear" name="attr_know_the_zone_gear_misc" title="@{know_the_zone_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_know_the_zone" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly character-skill-total" name="attr_know_the_zone_total" value="0" title="@{know_the_zone_total}">0</span>
            </button>
            <!-- expand 2nd row -->
            <!--<input class="expand" type="checkbox" name="attr_expand_know_the_zone" value="1" data-i18n-title="show-hide" title="show/hide" /><span></span>

            <div class="know_the_zone-row2 skills-row2">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_know_the_zone_notes" data-i18n-placeholder="notes-text" placeholder="notes..." title="@{know_the_zone_notes}"></textarea>
              </div>
            </div>-->
          </span>

          <span class="skills-row chartype-background-dark" data-i18n-list-item="manipulate">
            <span class="skill-name" data-i18n="manipulate" name="attr_manipulate_name">Manipulate</span>
            <span class="small-caps skill-name" data-i18n="empathy-abbr">Emp&nbsp;<span name="attr_empathy_total"></span></span>
            <input class="input-number character-skill-level" type="number" name="attr_manipulate" value="0" min="0" title="@{manipulate}" />
            <select class="input character-skill-mod" name="attr_manipulate_skill_misc" title="@{manipulate_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input character-skill-gear" name="attr_manipulate_gear_misc" title="@{manipulate_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_manipulate" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly character-skill-total" name="attr_manipulate_total" value="0" title="@{manipulate_total}">0</span>
            </button>
              <!-- expand 2nd row -->
            <!--<input class="expand" type="checkbox" name="attr_expand_manipulate" value="1" data-i18n-title="show-hide" title="show/hide" /><span></span>

            <div class="manipulate-row2 skills-row2">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_manipulate_notes" data-i18n-placeholder="notes-text" placeholder="notes..." title="@{manipulate_notes}"></textarea>
              </div>
            </div>-->
          </span>

          <span class="skills-row chartype-background-dark" data-i18n-list-item="move">
            <span class="skill-name" data-i18n="move" name="attr_move_name">Move</span>
            <span class="small-caps skill-name" data-i18n="agility-abbr">Agi&nbsp;<span name="attr_agility_total"></span></span>
            <input class="input-number character-skill-level" type="number" name="attr_move" value="0" min="0" title="@{move}" />
            <select class="input character-skill-mod" name="attr_move_skill_misc" title="@{move_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input character-skill-gear" name="attr_move_gear_misc" title="@{move_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_move" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly character-skill-total" name="attr_move_total" value="0" title="@{move_total}">0</span>
            </button>
              <!-- expand 2nd row -->
            <!--<input class="expand" type="checkbox" name="attr_expand_move" value="1" data-i18n-title="show-hide" title="show/hide" /><span></span>

            <div class="move-row2 skills-row2">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_move_notes" data-i18n-placeholder="notes-text"   placeholder="notes..." title="@{move_notes}"></textarea>
              </div>
            </div>-->
          </span>

          <span class="skills-row chartype-background-dark" data-i18n-list-item="scout">
            <span class="skill-name" data-i18n="scout" name="attr_scout_name">Scout</span>
            <span class="small-caps skill-name" data-i18n="wits-abbr">Wit&nbsp;<span name="attr_wits_total"></span></span>
            <input class="input-number character-skill-level" type="number" name="attr_scout" value="0" min="0" title="@{scout}" />
            <select class="input character-skill-mod" name="attr_scout_skill_misc" title="@{scout_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input character-skill-gear" name="attr_scout_gear_misc" title="@{scout_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_scout" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly character-skill-total" name="attr_scout_total" value="0" title="@{scout_total}">0</span>
            </button>
              <!-- expand 2nd row -->
            <!--<input class="expand" type="checkbox" name="attr_expand_scout" value="1" data-i18n-title="show-hide" title="show/hide" /><span></span>

            <div class="scout-row2 skills-row2">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_scout_notes" data-i18n-placeholder="notes-text" placeholder="notes..." title="@{scout_notes}"></textarea>
              </div>
            </div>-->
          </span>

          <span class="skills-row chartype-background-dark" data-i18n-list-item="sense_emotion">
            <span class="skill-name" data-i18n="sense-emotion" name="attr_sense_emotion_name">Sense emotion</span>
            <span class="small-caps skill-name" data-i18n="empathy-abbr">Emp&nbsp;<span name="attr_empathy_total"></span></span>
            <input class="input-number character-skill-level" type="number" name="attr_sense_emotion" value="0" min="0" title="@{sense_emotion}" />
            <select class="input character-skill-mod" name="attr_sense_emotion_skill_misc" title="@{sense_emotion_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input character-skill-gear" name="attr_sense_emotion_gear_misc" title="@{sense_emotion_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_sense_emotion" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly character-skill-total" name="attr_sense_emotion_total" value="0" title="@{sense_emotion_total}">0</span>
            </button>
            <!-- expand 2nd row -->
            <!--<input class="expand" type="checkbox" name="attr_expand_sense_emotion" value="1" data-i18n-title="show-hide" title="show/hide" /><span></span>

            <div class="sense_emotion-row2 skills-row2">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_sense_emotion_notes" data-i18n-placeholder="notes-text" placeholder="notes..." title="@{sense_emotion_notes}"></textarea>
              </div>
            </div>-->
          </span>

          <span class="skills-row chartype-background-dark" data-i18n-list-item="shoot"> 
            <span class="skill-name" data-i18n="shoot" name="attr_shoot_name">Shoot</span>
            <span class="small-caps skill-name" data-i18n="agility-abbr">Agi&nbsp;<span name="attr_agility_total"></span></span>
            <input class="input-number character-skill-level" type="number" name="attr_shoot" value="0" min="0" title="@{shoot}" />
            <select class="input character-skill-mod" name="attr_shoot_skill_misc" title="@{shoot_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input character-skill-gear" name="attr_shoot_gear_misc" title="@{shoot_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_shoot" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly character-skill-total" name="attr_shoot_total" value="0" title="@{shoot_total}">0</span>
            </button>
            <!-- expand 2nd row -->
            <!--<input class="expand" type="checkbox" name="attr_expand_shoot" value="1" data-i18n-title="show-hide" title="show/hide" /><span></span>

            <div class="shoot-row2 skills-row2">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_shoot_notes" data-i18n-placeholder="notes-text" placeholder="notes..." title="@{shoot_notes}"></textarea>
              </div>
            </div>-->
          </span>

          <span class="skills-row chartype-background-dark" data-i18n-list-item="sneak">
            <span class="skill-name" data-i18n="sneak" name="attr_sneak_name">Sneak</span>
            <span class="small-caps skill-name" data-i18n="agility-abbr">Agi&nbsp;<span name="attr_agility_total" title="@{agility_total}"></span></span>
            <input class="input-number character-skill-level" type="number" name="attr_sneak" value="0" min="0" title="@{sneak}" />
            <select class="input character-skill-mod" name="attr_sneak_skill_misc" title="@{sneak_skill_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
              <option value="-1">-1</option>
              <option value="-2">-2</option>
              <option value="-3">-3</option>
              <option value="-4">-4</option>
              <option value="-5">-5</option>
              <option value="-6">-6</option>
            </select>
            <select class="input character-skill-gear" name="attr_sneak_gear_misc" title="@{sneak_gear_misc}">
              <option value="6">+6</option>
              <option value="5">+5</option>
              <option value="4">+4</option>
              <option value="3">+3</option>
              <option value="2">+2</option>
              <option value="1">+1</option>
              <option value="0" selected>+0</option>
            </select>
            <button type="action" name="act_dice_pool_sneak" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
              <span class="readonly character-skill-total" name="attr_sneak_total" value="0" title="@{sneak_total}"></span>
            </button>  
            <!-- expand 2nd row -->
            <!--<input class="expand" type="checkbox" name="attr_expand_sneak" value="1" data-i18n-title="show-hide" title="show/hide" /><span></span>

            <div class="sneak-row2 skills-row2">
              <div class="skills-row2-header">
                <div class="skills-box6 column-header"></div>
              </div>
              <div class="skills-row2-body">
                <textarea class="skills-box6 input-textarea" name="attr_sneak_notes" data-i18n-placeholder="notes-text" placeholder="notes..." title="@{sneak_notes}"></textarea>
              </div>
            </div>-->
          </span>
          
        </div>
        <div>
          <fieldset class="repeating_pskills">
            <div class="skills-row chartype-background-light">
              <input class="skill-name chartype-background-light" class="input" type="text" name="attr_pskill_name" />
              <span class="small-caps skill-name">
                <input type="hidden" name="attr_pskill_base" value="0" min="0" title="@{pskills_$X_pskill_base}" readonly />
                <select class="input character-skill-mod chartype-background-light" name="attr_pskill_attr" title="@{pskills_$X_pskill_attr}">
                  <option value="" selected disabled hidden data-i18n="base">Base</option>
                  <option value="strength" data-i18n="strength-abbr">Str</option>
                  <option value="agility" data-i18n="agility-abbr">Agi</option>
                  <option value="wits" data-i18n="wits-abbr">Wit</option>
                  <option value="empathy" data-i18n="empathy-abbr">Emp</option>
                </select>
              </span>
              <input class="input-number character-skill-level" type="number" name="attr_pskill_level" value="0" min="0" title="@{pskills_$X_proffskill_level}" />
              <select class="input character-skill-mod" name="attr_pskill_misc" title="@{pskills_$X_pskill_misc}">
                <option value="6">+6</option>
                <option value="5">+5</option>
                <option value="4">+4</option>
                <option value="3">+3</option>
                <option value="2">+2</option>
                <option value="1">+1</option>
                <option value="0" selected>+0</option>
                <option value="-1">-1</option>
                <option value="-2">-2</option>
                <option value="-3">-3</option>
                <option value="-4">-4</option>
                <option value="-5">-5</option>
                <option value="-6">-6</option>
              </select>
              <select class="input character-skill-gear" name="attr_pskill_gear" title="@{pskills_$X_pskill_gear}">
                <option value="6">+6</option>
                <option value="5">+5</option>
                <option value="4">+4</option>
                <option value="3">+3</option>
                <option value="2">+2</option>
                <option value="1">+1</option>
                <option value="0" selected>+0</option>
              </select>
              <button type="action" name="act_pskill-roll" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
                <span class="readonly character-skill-total" name="attr_pskill_total" value="0" title="@{pskills_$X_pskill_total}">0</span>
              </button>
            </div>
          </fieldset>
        </div>
      </div>

      <!-- DICE POOL GRID-->
      <div class="box chartype-background-light character-dice_pool">
        <div class="dice_pool-grid">
          <div class="dice-header dice_pool-box1 toggle-dice-only header">
            <h1 data-i18n="dice-pool-u">DICE POOL</h1>
          </div>
          <div class="dice-base">
            <div class="dice-base-header">
              <span class="label" data-i18n-title="base-attribute-dice" data-i18n="base">Base</span>
            </div>
            <input type="hidden" name="attr_attribute_die_twelve" value="1" />
            <input type="hidden" name="attr_attribute_die_eleven" value="1" />
            <input type="hidden" name="attr_attribute_die_ten" value="1" />
            <input type="hidden" name="attr_attribute_die_nine" value="1" />
            <input type="hidden" name="attr_attribute_die_eight" value="1" />
            <input type="hidden" name="attr_attribute_die_seven" value="1" />
            <input type="hidden" name="attr_attribute_die_six" value="1" />
            <input type="hidden" name="attr_attribute_die_five" value="1" />
            <input type="hidden" name="attr_attribute_die_four" value="1" />
            <input type="hidden" name="attr_attribute_die_three" value="1" />
            <input type="hidden" name="attr_attribute_die_two" value="1" />
            <input type="hidden" name="attr_attribute_die_one" value="1" />
            <div class="dice-base-col1">
              <input type="radio" name="attr_attribute" value="6" class="dice-selection attribute" /><span title="6"></span>
              <input type="radio" name="attr_attribute" value="5" class="dice-selection attribute" /><span title="5"></span>
              <input type="radio" name="attr_attribute" value="4" class="dice-selection attribute" /><span title="4"></span>
              <input type="radio" name="attr_attribute" value="3" class="dice-selection attribute" /><span title="3"></span>
              <input type="radio" name="attr_attribute" value="2" class="dice-selection attribute" /><span title="2"></span>
              <input type="radio" name="attr_attribute" value="1" class="dice-selection attribute" /><span title="1"></span>
              <input type="radio" name="attr_attribute" value="0" class="dice-selection attribute" checked /><span title="0"></span>
            </div>
            <div class="dice-base-col2">
              <input type="radio" name="attr_attribute" value="7" class="dice-selection attribute" /><span title="7"></span>
              <input type="radio" name="attr_attribute" value="8" class="dice-selection attribute" /><span title="8"></span>
              <input type="radio" name="attr_attribute" value="9" class="dice-selection attribute" /><span title="9"></span>
              <input type="radio" name="attr_attribute" value="10" class="dice-selection attribute" /><span title="10"></span>
              <input type="radio" name="attr_attribute" value="11" class="dice-selection attribute" /><span title="11"></span>
              <input type="radio" name="attr_attribute" value="12" class="dice-selection attribute" /><span title="12"></span>
            </div>
          </div>
          <div class="dice-skill">
            <div class="dice-skill-header">
              <span class="label" data-i18n-title="skill-level" data-i18n="skill">Skill</span>
            </div>
            <input type="hidden" name="attr_negative_die_one" value="1" />
            <input type="hidden" name="attr_negative_die_two" value="1" />
            <input type="hidden" name="attr_negative_die_three" value="1" />
            <input type="hidden" name="attr_skill_die_ten" value="1" />
            <input type="hidden" name="attr_skill_die_nine" value="1" />
            <input type="hidden" name="attr_skill_die_eight" value="1" />
            <input type="hidden" name="attr_skill_die_seven" value="1" />
            <input type="hidden" name="attr_skill_die_six" value="1" />
            <input type="hidden" name="attr_skill_die_five" value="1" />
            <input type="hidden" name="attr_skill_die_four" value="1" />
            <input type="hidden" name="attr_skill_die_three" value="1" />
            <input type="hidden" name="attr_skill_die_two" value="1" />
            <input type="hidden" name="attr_skill_die_one" value="1" />
            <div class="dice-skill-col1">
              <input type="radio" name="attr_skill" value="6" class="dice-selection skill" /><span title="6"></span>
              <input type="radio" name="attr_skill" value="5" class="dice-selection skill" /><span title="5"></span>
              <input type="radio" name="attr_skill" value="4" class="dice-selection skill" /><span title="4"></span>
              <input type="radio" name="attr_skill" value="3" class="dice-selection skill" /><span title="3"></span>
              <input type="radio" name="attr_skill" value="2" class="dice-selection skill" /><span title="2"></span>
              <input type="radio" name="attr_skill" value="1" class="dice-selection skill" /><span title="1"></span>
              <input type="radio" name="attr_skill" value="0" class="dice-selection skill" checked /><span title="0"></span>
            </div>
            <div class="dice-skill-col2">
              <input type="radio" name="attr_skill" value="7" class="dice-selection skill" /><span title="7"></span>
              <input type="radio" name="attr_skill" value="8" class="dice-selection skill" /><span title="8"></span>
              <input type="radio" name="attr_skill" value="9" class="dice-selection skill" /><span title="9"></span>
              <input type="radio" name="attr_skill" value="10" class="dice-selection skill" /><span title="10"></span>
              <input type="radio" name="attr_skill" value="-1" class="dice-selection negative" /><span title="-1"></span> <input type="radio" name="attr_skill" value="-2" class="dice-selection negative" /><span title="-2"></span>
              <input type="radio" name="attr_skill" value="-3" class="dice-selection negative" /><span title="-3"></span>
            </div>
          </div>
          <div class="dice-gear">
            <div class="dice-gear-header">
              <span class="label" data-i18n-title="gear-bonus" data-i18n="gear">Gear</span>
            </div>
            <input type="hidden" name="attr_gear_die_twelve" value="1" />
            <input type="hidden" name="attr_gear_die_eleven" value="1" />
            <input type="hidden" name="attr_gear_die_ten" value="1" />
            <input type="hidden" name="attr_gear_die_nine" value="1" />
            <input type="hidden" name="attr_gear_die_eight" value="1" />
            <input type="hidden" name="attr_gear_die_seven" value="1" />
            <input type="hidden" name="attr_gear_die_six" value="1" />
            <input type="hidden" name="attr_gear_die_five" value="1" />
            <input type="hidden" name="attr_gear_die_four" value="1" />
            <input type="hidden" name="attr_gear_die_three" value="1" />
            <input type="hidden" name="attr_gear_die_two" value="1" />
            <input type="hidden" name="attr_gear_die_one" value="1" />
            <div class="dice-gear-col1">
              <input type="radio" name="attr_gear" value="6" class="dice-selection gear" /><span title="6"></span>
              <input type="radio" name="attr_gear" value="5" class="dice-selection gear" /><span title="5"></span>
              <input type="radio" name="attr_gear" value="4" class="dice-selection gear" /><span title="4"></span>
              <input type="radio" name="attr_gear" value="3" class="dice-selection gear" /><span title="3"></span>
              <input type="radio" name="attr_gear" value="2" class="dice-selection gear" /><span title="2"></span>
              <input type="radio" name="attr_gear" value="1" class="dice-selection gear" /><span title="1"></span>
              <input type="radio" name="attr_gear" value="0" class="dice-selection gear" checked /><span title="0"></span>
            </div>
            <div class="dice-gear-col2">
              <input type="radio" name="attr_gear" value="7" class="dice-selection gear" /><span title="7"></span>
              <input type="radio" name="attr_gear" value="8" class="dice-selection gear" /><span title="8"></span>
              <input type="radio" name="attr_gear" value="9" class="dice-selection gear" /><span title="9"></span>
              <input type="radio" name="attr_gear" value="10" class="dice-selection gear" /><span title="10"></span>
              <input type="radio" name="attr_gear" value="11" class="dice-selection gear" /><span title="11"></span>
              <input type="radio" name="attr_gear" value="12" class="dice-selection gear" /><span title="12"></span>
            </div>
          </div>
          <div class="dice-rolls">
            <input class="hidden api-toggle-show" type="checkbox" name="attr_api_toggle" value="1" />
            <div class="template-roll dice-rolls-roll">
              <input class="hidden roll-indicator" type="checkbox" name="attr_roll_the_dice_flag" value="1" readonly />
              <span class="box-indicator">
                <button class="dice-pool" type="roll" name="roll_the_dice" value="@{whisper_option} &{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{dice-pool}}} {{subtitle=@{current_preset}}} {{free-text}} {{footer}} {{attribute-die-one=[[ @{attribute_die_one}]] }} {{attribute-roll-one=[[1d6]] }} {{attribute-die-two=[[ @{attribute_die_two}]] }} {{attribute-roll-two=[[1d6]] }} {{attribute-die-three=[[ @{attribute_die_three}]] }} {{attribute-roll-three=[[1d6]] }} {{attribute-die-four=[[ @{attribute_die_four}]] }} {{attribute-roll-four=[[1d6]] }} {{attribute-die-five=[[ @{attribute_die_five}]] }} {{attribute-roll-five=[[1d6]] }} {{attribute-die-six=[[ @{attribute_die_six}]] }} {{attribute-roll-six=[[1d6]] }} {{attribute-die-seven=[[ @{attribute_die_seven}]] }} {{attribute-roll-seven=[[1d6]] }} {{attribute-die-eight=[[ @{attribute_die_eight}]] }} {{attribute-roll-eight=[[1d6]] }} {{attribute-die-nine=[[ @{attribute_die_nine}]] }} {{attribute-roll-nine=[[1d6]] }} {{attribute-die-ten=[[ @{attribute_die_ten}]] }} {{attribute-roll-ten=[[1d6]] }} {{attribute-die-eleven=[[ @{attribute_die_eleven}]] }} {{attribute-roll-eleven=[[1d6]] }} {{attribute-die-twelve=[[ @{attribute_die_twelve}]] }} {{attribute-roll-twelve=[[1d6]] }} {{skill-die-one=[[ @{skill_die_one}]] }} {{skill-roll-one=[[1d6]] }} {{skill-die-two=[[ @{skill_die_two}]] }} {{skill-roll-two=[[1d6]] }} {{skill-die-three=[[ @{skill_die_three}]] }} {{skill-roll-three=[[1d6]] }} {{skill-die-four=[[ @{skill_die_four}]] }} {{skill-roll-four=[[1d6]] }} {{skill-die-five=[[ @{skill_die_five}]] }} {{skill-roll-five=[[1d6]] }} {{skill-die-six=[[ @{skill_die_six}]] }} {{skill-roll-six=[[1d6]] }} {{skill-die-seven=[[ @{skill_die_seven}]] }} {{skill-roll-seven=[[1d6]] }} {{skill-die-eight=[[ @{skill_die_eight}]] }} {{skill-roll-eight=[[1d6]] }} {{skill-die-nine=[[ @{skill_die_nine}]] }} {{skill-roll-nine=[[1d6]] }} {{skill-die-ten=[[ @{skill_die_ten}]] }} {{skill-roll-ten=[[1d6]] }} {{negative-die-one=[[ @{negative_die_one}]] }} {{negative-roll-one=[[1d6]] }} {{negative-die-two=[[ @{negative_die_two}]] }} {{negative-roll-two=[[1d6]] }} {{negative-die-three=[[ @{negative_die_three}]] }} {{negative-roll-three=[[1d6]] }} {{gear-die-one=[[ @{gear_die_one}]] }} {{gear-roll-one=[[1d6]] }} {{gear-die-two=[[ @{gear_die_two}]] }} {{gear-roll-two=[[1d6]] }} {{gear-die-three=[[ @{gear_die_three}]] }} {{gear-roll-three=[[1d6]] }} {{gear-die-four=[[ @{gear_die_four}]] }} {{gear-roll-four=[[1d6]] }} {{gear-die-five=[[ @{gear_die_five}]] }} {{gear-roll-five=[[1d6]] }} {{gear-die-six=[[ @{gear_die_six}]] }} {{gear-roll-six=[[1d6]] }} {{gear-die-seven=[[ @{gear_die_seven}]] }} {{gear-roll-seven=[[1d6]] }} {{gear-die-eight=[[ @{gear_die_eight}]] }} {{gear-roll-eight=[[1d6]] }} {{gear-die-nine=[[ @{gear_die_nine}]] }} {{gear-roll-nine=[[1d6]] }} {{gear-die-ten=[[ @{gear_die_ten}]] }} {{gear-roll-ten=[[1d6]] }} {{gear-die-eleven=[[ @{gear_die_eleven}]] }} {{gear-roll-eleven=[[1d6]] }} {{gear-die-twelve=[[ @{gear_die_twelve}]] }} {{gear-roll-twelve=[[1d6]] }} @{include_with_roll}" data-i18n-title="roll-dice" title="Roll the Dice!">
                  &nbsp;<span data-i18n="roll">Roll</span>&nbsp;
                </button>
              </span>
            </div>
            <div class="grid-item api-roll">
              <input class="hidden roll-indicator" type="checkbox" name="attr_roll_the_dice_flag" value="1" readonly />
              <span class="box-api-indicator">
                <button class="dice-pool" type="roll" name="roll_the_dice_api" value="@{whisper_option_api} [[(@{skill})d6]] [[(@{attribute})d6]] [[(@{gear})d6]] --Character|@{character_name} --Roll|@{current_preset}" data-i18n-title="roll-dice-api" title="Roll API Dice!">
                  &nbsp;<span data-i18n="roll">Roll</span>&nbsp;
                </button>
              </span>
            </div>
            <div class="template-roll dice-rolls-push">
              <button class="dice-pool" type="roll" name="roll_a_push" value="@{whisper_option} &{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{pushes-the-roll}}} {{subtitle=@{current_preset}}} {{free-text}} {{footer}} {{attribute-die-one=[[ @{attribute_die_one}]] }} {{attribute-roll-one=[[1d6]] }} {{attribute-die-two=[[ @{attribute_die_two}]] }} {{attribute-roll-two=[[1d6]] }} {{attribute-die-three=[[ @{attribute_die_three}]] }} {{attribute-roll-three=[[1d6]] }} {{attribute-die-four=[[ @{attribute_die_four}]] }} {{attribute-roll-four=[[1d6]] }} {{attribute-die-five=[[ @{attribute_die_five}]] }} {{attribute-roll-five=[[1d6]] }} {{attribute-die-six=[[ @{attribute_die_six}]] }} {{attribute-roll-six=[[1d6]] }} {{attribute-die-seven=[[ @{attribute_die_seven}]] }} {{attribute-roll-seven=[[1d6]] }} {{attribute-die-eight=[[ @{attribute_die_eight}]] }} {{attribute-roll-eight=[[1d6]] }} {{attribute-die-nine=[[ @{attribute_die_nine}]] }} {{attribute-roll-nine=[[1d6]] }} {{attribute-die-ten=[[ @{attribute_die_ten}]] }} {{attribute-roll-ten=[[1d6]] }} {{attribute-die-eleven=[[ @{attribute_die_eleven}]] }} {{attribute-roll-eleven=[[1d6]] }} {{attribute-die-twelve=[[ @{attribute_die_twelve}]] }} {{attribute-roll-twelve=[[1d6]] }} {{skill-die-one=[[ @{skill_die_one}]] }} {{skill-roll-one=[[1d6]] }} {{skill-die-two=[[ @{skill_die_two}]] }} {{skill-roll-two=[[1d6]] }} {{skill-die-three=[[ @{skill_die_three}]] }} {{skill-roll-three=[[1d6]] }} {{skill-die-four=[[ @{skill_die_four}]] }} {{skill-roll-four=[[1d6]] }} {{skill-die-five=[[ @{skill_die_five}]] }} {{skill-roll-five=[[1d6]] }} {{skill-die-six=[[ @{skill_die_six}]] }} {{skill-roll-six=[[1d6]] }} {{skill-die-seven=[[ @{skill_die_seven}]] }} {{skill-roll-seven=[[1d6]] }} {{skill-die-eight=[[ @{skill_die_eight}]] }} {{skill-roll-eight=[[1d6]] }} {{skill-die-nine=[[ @{skill_die_nine}]] }} {{skill-roll-nine=[[1d6]] }} {{skill-die-ten=[[ @{skill_die_ten}]] }} {{skill-roll-ten=[[1d6]] }} {{negative-die-one=[[ @{negative_die_one}]] }} {{negative-roll-one=[[1d6]] }} {{negative-die-two=[[ @{negative_die_two}]] }} {{negative-roll-two=[[1d6]] }} {{negative-die-three=[[ @{negative_die_three}]] }} {{negative-roll-three=[[1d6]] }} {{gear-die-one=[[ @{gear_die_one}]] }} {{gear-roll-one=[[1d6]] }} {{gear-die-two=[[ @{gear_die_two}]] }} {{gear-roll-two=[[1d6]] }} {{gear-die-three=[[ @{gear_die_three}]] }} {{gear-roll-three=[[1d6]] }} {{gear-die-four=[[ @{gear_die_four}]] }} {{gear-roll-four=[[1d6]] }} {{gear-die-five=[[ @{gear_die_five}]] }} {{gear-roll-five=[[1d6]] }} {{gear-die-six=[[ @{gear_die_six}]] }} {{gear-roll-six=[[1d6]] }} {{gear-die-seven=[[ @{gear_die_seven}]] }} {{gear-roll-seven=[[1d6]] }} {{gear-die-eight=[[ @{gear_die_eight}]] }} {{gear-roll-eight=[[1d6]] }} {{gear-die-nine=[[ @{gear_die_nine}]] }} {{gear-roll-nine=[[1d6]] }} {{gear-die-ten=[[ @{gear_die_ten}]] }} {{gear-roll-ten=[[1d6]] }} {{gear-die-eleven=[[ @{gear_die_eleven}]] }} {{gear-roll-eleven=[[1d6]] }} {{gear-die-twelve=[[ @{gear_die_twelve}]] }} {{gear-roll-twelve=[[1d6]] }} {{push-query=?{@{translation_push_query}} }} @{include_with_roll}" data-i18n-title="push-dice" title="Push the Dice!">
                &nbsp;<span data-i18n="push">Push</span>&nbsp;
              </button>
              <input type="hidden" name="attr_translation_push_query" value="push-query" />
            </div>
            <div class="dice-rolls-d66">
              <button class="dice-pool" type="roll" name="roll_d66" value="@{whisper_option} &{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{d66-roll}}} {{subtitle}} {{free-text}}  {{d66-die-one=[[ 1 ]] }} {{d66-roll-one=[[ 1d6 ]] }} {{d66-die-two=[[ 1 ]] }} {{d66-roll-two=[[ 1d6 ]] }} {{footer}}" data-i18n-title="roll-dice-66" title="Roll d66!">
                &nbsp;<span class="small-caps" data-i18n="die-66-u">D66</span>&nbsp;
              </button>
            </div>
          </div>
          <div class="dice-preset">
            <input type="hidden" class="input" name="attr_current_preset" value="" readonly />
            <input type="hidden" name="attr_include_with_roll" value="" readonly />
            <span class="label dice-preset-header" data-i18n="current-preset">Current Preset</span>
            <input type="text" class="header-h1 dice-preset-preset chartype-background-light" name="attr_current_preset">
          </div>
          <div class="dice-footer">
            <button type="action" name="act_dice_pool_clear" class="small-caps dice-footer-clear" data-i18n-title="reset-dice" title="Reset dice pool." data-i18n="clear-dice-pool">
              Clear Dice Pool
            </button>
            <button type="action" name="act_api_dice_toggle" class="api-button small-caps dice-footer-api" data-i18n-title="api-dice-title" title="Use API Dice Roller. (API is a Pro feature) 'Forbidden Lands Year-Zero Die Roller' script must be installed." data-i18n="api-dice">
              api dice
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="character-column3 box toggle-dice-only toggle-monster-only ">

      <div class="character-experience box sheet-header toggle-dice-only toggle-monster-only toggle-npc-only">
        <div class="experience-grid">
          <div class="experience-box1">
            <h1 data-i18n="experience-u">EXPERIENCE</h1>
          </div>
          <div class="experience-box2">
            <input class="input-number input-experience" type="number" name="attr_experience" value="0" min="0" title="@{experience}" />
          </div>
          <div class="experience-box3"></div>
        </div>
      </div>

      <div class="character-talents sheet-box chartype-background-light toggle-dice-only toggle-monster-only toggle-npc-only">
        <div class="talents-grid">
          <div class="talents-box header">
            <h1 data-i18n="talent-u">TALENTS</h1>
          </div>
          <div class="talents-box2 column-header">
            <span data-i18n="type">Type</span>
          </div>
          <div class="talents-box3 column-header">
            <span data-i18n="rank">Roll</span>
          </div>
          <div class="talents-box4">
            <fieldset class="repeating_talents">
              <div class="talents-grid">
                <input class="expand" type="checkbox" name="attr_expand" data-i18n-title="show-hide" title="show/hide" /><span></span>
                <input class="talents-box1 input" type="text" name="attr_name" value="" title="@{repeating_talents_$X_name}" data-i18n-placeholder="name" placeholder="Name" />
                <select class="talents-box2 input" name="attr_talent_type" title="@{repeating_talents_$X_talent_type}">
                  <option value="Prof" data-i18n="profession-abbrv">Prof</option>
                  <option value="Gen" data-i18n="general-abbrv" selected>Gen</option>
                </select>
                <span class="talents-box3 input">
                  <button name="act_talentroll" class="roll-button" type="action">t</button>
                </span>
                <!-- expand 2nd row -->
                <textarea class="talents-box4 input-textarea" name="attr_talent_description" title="@{repeating_talents_$X_talent_description}" data-i18n-placeholder="description" placeholder="description"></textarea>
              </div>
            </fieldset>
          </div>
        </div>
      </div>

      <div class="character-mutations sheet-box chartype-background-light toggle-dice-only toggle-monster-only toggle-npc-only">
        <div class="talents-grid">
          <div class="talents-box header">
            <h1 data-i18n="mutation-u">MUTATIONS</h1>
          </div>
          <div class="talents-box2 column-header">
            <span data-i18n="power">Power</span>
          </div>
          <div class="talents-box3 column-header">
            <span data-i18n="misfire">Misfire</span>
          </div>
          <div class="talents-box4">
            <fieldset class="repeating_mutations">
              <div class="talents-grid">
                <input class="expand" type="checkbox" name="attr_expand" data-i18n-title="show-hide" title="show/hide" /><span></span>
                <input class="talents-box1 input" type="text" name="attr_name" value="" title="@{repeating_mutations_$X_name}" data-i18n-placeholder="name" placeholder="Name" />
                <input type="number" class="talents-box2 input-number" name="attr_powerlevel" min="1" max="10" title="@{repeating_mutations_$X_powerlevel}">
                <span class="talents-box3 input">
                  <button name="act_powerroll" class="roll-button" type="action">t</button>
                </span>
                <!-- expand 2nd row -->
                <textarea class="talents-box4 input-textarea" name="attr_mutation_description" title="@{repeating_mutations_$X_mutation_description}" data-i18n-placeholder="description" placeholder="description"></textarea>
              </div>
            </fieldset>
          </div>
        </div>
        <div class="willpower-grid">
          <div class="willpower-box2 chartype-background-dark">
            <input type="radio" name="attr_mutationpoints" value="0" data-i18n-title="no-mutationpoints" title="No Mutation Points" style="margin: 4px 8px 3px 2px; width: 0.95em; height: 0.95em;" checked />
            <input class="xbox" type="radio" name="attr_mutationpoints" value="1" title="1 @{mutationpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_mutationpoints" value="2" title="2 @{mutationpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_mutationpoints" value="3" title="3 @{mutationpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_mutationpoints" value="4" title="4 @{mutationpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_mutationpoints" value="5" title="5 @{mutationpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_mutationpoints" value="6" title="6 @{mutationpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_mutationpoints" value="7" title="7 @{mutationpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_mutationpoints" value="8" title="8 @{mutationpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_mutationpoints" value="9" title="9 @{mutationpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_mutationpoints" value="10" title="10 @{mutationpoints}" /><span></span>
            <input type="hidden" name="attr_mutationpoints_max" value="10" />
          </div>
          <div class="willpower-box3 chartype-background-dark">
            <span class="input-span" name="attr_mutationpoints" title="@{mutationpoints}" readonly></span>
          </div>
        </div>
      </div>

      <div class="character-modules sheet-box chartype-background-light toggle-dice-only toggle-monster-only toggle-npc-only">
        <div class="talents-grid">
          <div class="talents-box header">
            <h1 data-i18n="modules-u">MODULES</h1>
          </div>
          <div class="talents-box2 column-header">
            <span data-i18n="power">Power</span>
          </div>
          <div class="talents-box3 column-header">
            <span data-i18n="overheat">Overheat</span>
          </div>
          <div class="talents-box4">
            <fieldset class="repeating_modules">
              <div class="talents-grid">
                <input class="expand" type="checkbox" name="attr_expand" data-i18n-title="show-hide" title="show/hide" /><span></span>
                <input class="talents-box1 input" type="text" name="attr_name" value="" title="@{repeating_modules_$X_name}" data-i18n-placeholder="name" placeholder="Name" />
                <input type="number" class="talents-box2 input-number" name="attr_powerlevel" min="1" max="10" title="@{repeating_modules_$X_powerlevel}">
                <span class="talents-box3 input" >
                  <button name="act_powerroll" class="roll-button" type="action">t</button>
                </span>
                <!-- expand 2nd row -->
                <textarea class="talents-box4 input-textarea" name="attr_module_description" title="@{repeating_modules_$X_module_description}" data-i18n-placeholder="description" placeholder="description"></textarea>
              </div>
            </fieldset>
          </div>
        </div>
        <div class="willpower-grid">
          <div class="willpower-box2 chartype-background-dark">
            <input type="radio" name="attr_energypoints" value="0" data-i18n-title="no-energypoints" title="No Energy Points" style="margin: 4px 8px 3px 2px; width: 0.95em; height: 0.95em;" checked />
            <input class="xbox" type="radio" name="attr_energypoints" value="1" title="1 @{energypoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_energypoints" value="2" title="2 @{energypoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_energypoints" value="3" title="3 @{energypoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_energypoints" value="4" title="4 @{energypoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_energypoints" value="5" title="5 @{energypoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_energypoints" value="6" title="6 @{energypoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_energypoints" value="7" title="7 @{energypoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_energypoints" value="8" title="8 @{energypoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_energypoints" value="9" title="9 @{energypoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_energypoints" value="10" title="10 @{energypoints}" /><span></span>
            <input type="hidden" name="attr_energypoints_max" value="10" />
          </div>
          <div class="willpower-box3 chartype-background-dark">
            <span class="input-span" name="attr_energypoints" title="@{energypoints}" readonly></span>
          </div>
        </div>
      </div>

      <div class="character-animalpowers sheet-box chartype-background-light toggle-dice-only toggle-monster-only toggle-npc-only">
        <div class="talents-grid">
          <div class="talents-box header">
            <h1 data-i18n="animalpowers-u">ANIMAL POWERS</h1>
          </div>
          <div class="talents-box2 column-header">
            <span data-i18n="power">Power</span>
          </div>
          <div class="talents-box3 column-header">
            <span data-i18n="feral">Feral</span>
          </div>
          <div class="talents-box4">
            <fieldset class="repeating_animalpowers">
              <div class="talents-grid">
                <input class="expand" type="checkbox" name="attr_expand" data-i18n-title="show-hide" title="show/hide" /><span></span>
                <input class="talents-box1 input" type="text" name="attr_name" value="" title="@{repeating_animalpowers_$X_name}" data-i18n-placeholder="name" placeholder="Name" />
                <input type="number" class="talents-box2 input-number" name="attr_powerlevel" min="1" max="10" title="@{repeating_animalpowers_$X_powerlevel}">
                <span class="talents-box3 input">
                  <button name="act_powerroll" class="roll-button" type="action">t</button>
                </span>
                <!-- expand 2nd row -->
                <textarea class="talents-box4 input-textarea" name="attr_animalpower_description" title="@{repeating_animalpowers_$X_animalpower_description}" data-i18n-placeholder="description" placeholder="description"></textarea>
              </div>
            </fieldset>
          </div>
        </div>
        <div class="willpower-grid">
          <div class="willpower-box2 chartype-background-dark">
            <input type="radio" name="attr_feralpoints" value="0" data-i18n-title="no-feralpoints" title="No Feral Points" style="margin: 4px 8px 3px 2px; width: 0.95em; height: 0.95em;" checked />
            <input class="xbox" type="radio" name="attr_feralpoints" value="1" title="1 @{feralpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_feralpoints" value="2" title="2 @feralpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_feralpoints" value="3" title="3 @{feralpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_feralpoints" value="4" title="4 @{feralpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_feralpoints" value="5" title="5 @{feralpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_feralpoints" value="6" title="6 @{feralpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_feralpoints" value="7" title="7 @{feralpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_feralpoints" value="8" title="8 @{feralpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_feralpoints" value="9" title="9 @{feralpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_feralpoints" value="10" title="10 @{feralpoints}" /><span></span>
            <input type="hidden" name="attr_feralpoints_max" value="10" />
          </div>
          <div class="willpower-box3 chartype-background-dark">
            <span class="input-span" name="attr_feralpoints" title="@{feralpoints}" readonly></span>
          </div>
        </div>
      </div>

      <div class="character-contacts character sheet-box chartype-background-light toggle-dice-only toggle-monster-only toggle-npc-only">
        <div class="talents-grid">
          <div class="talents-box header">
            <h1 data-i18n="contacts-u">CONTACTS</h1>
          </div>
          <div class="talents-box2 column-header">
            <span data-i18n="power">Points</span>
          </div>
          <div class="talents-box3 column-header">
            <span data-i18n="backlash">Backlash</span>
          </div>
          <div class="talents-box4">
            <fieldset class="repeating_contacts">
              <div class="talents-grid">
                <input class="expand" type="checkbox" name="attr_expand" data-i18n-title="show-hide" title="show/hide" /><span></span>
                <input class="talents-box1 input" type="text" name="attr_name" value="" title="@{repeating_contacts_$X_name}" data-i18n-placeholder="name" placeholder="Name" />
                <input type="number" class="talents-box2 input-number" name="attr_powerlevel" min="1" max="10" title="@{repeating_contact_$X_powerlevel}">
                <span class="talents-box3 input" >
                  <button name="act_powerroll" class="roll-button" type="action">t</button>
                </span>
                <!-- expand 2nd row -->
                <textarea class="talents-box4 input-textarea" name="attr_contact_description" title="@{repeating_contacts_$X_contact_description}" data-i18n-placeholder="description" placeholder="description"></textarea>
              </div>
            </fieldset>
          </div>
        </div>
        <div class="willpower-grid">
          <div class="willpower-box2 chartype-background-dark">
            <input type="radio" name="attr_influencepoints" value="0" data-i18n-title="no-influencepoints" title="No Influence Points" style="margin: 4px 8px 3px 2px; width: 0.95em; height: 0.95em;" checked />
            <input class="xbox" type="radio" name="attr_influencepoints" value="1" title="1 @{influencepoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_influencepoints" value="2" title="2 @{influencepoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_influencepoints" value="3" title="3 @{influencepoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_influencepoints" value="4" title="4 @{influencepoints}" /><span></span>
            <input class="xbox" type="radio" name="attrinfluencepoints" value="5" title="5 @{influencepoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_influencepoints" value="6" title="6 @{influencepoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_influencepoints" value="7" title="7 @{influencepoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_influencepoints" value="8" title="8 @{influencepoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_influencepoints" value="9" title="9 @{influencepoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_influencepoints" value="10" title="10 @{influencepoints}" /><span></span>
            <input type="hidden" name="attr_influencepoints_max" value="10" />
          </div>
          <div class="willpower-box3 chartype-background-dark">
            <span class="input-span" name="attr_influencepoints" title="@{influencepoints} readonly"></span>
          </div>
        </div>
      </div>

      <div class="character-biomechs character sheet-box chartype-background-light toggle-dice-only toggle-monster-only toggle-npc-only">
        <div class="talents-grid">
          <div class="talents-box header">
            <h1 data-i18n="biomechatronics-u">BIOMECHATRONICS</h1>
          </div>
          <div class="talents-box4">
            <fieldset class="repeating_biomechs">
              <div class="talents-grid">
                <input class="expand" type="checkbox" name="attr_expand" data-i18n-title="show-hide" title="show/hide" /><span></span>
                <input class="talents-box1 input" type="text" name="attr_biomech_name" value="" title="@{repeating_biomechs_$X_biomech_name}" data-i18n-placeholder="name" placeholder="Name" />
                <!-- expand 2nd row -->
                <textarea class="talents-box4 input-textarea" name="attr_biomech_description" title="@{repeating_biomechs_$X_biomech_description}" data-i18n-placeholder="description" placeholder="description"></textarea>
              </div>
            </fieldset>
          </div>
        </div>
      </div>

      <div class="character-rotpoints sheet-box chartype-background-light toggle-dice-only toggle-monster-only toggle-npc-only">
        <div class="talents-grid">
          <div class="talents-box header">
            <h1 data-i18n="rotpoints-u">ROT POINTS</h1>
          </div>
        </div>
        <div class="willpower-grid">
          <div class="willpower-box2 chartype-background-dark">
            <input type="radio" name="attr_rotpoints" value="0" data-i18n-title="no-rotpoints" title="No Rot Points" style="margin: 4px 8px 3px 2px; width: 0.95em; height: 0.95em;" checked />
            <input class="xbox" type="radio" name="attr_rotpoints" value="1" title="1 @{rotpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_rotpoints" value="2" title="2 @{rotpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_rotpoints" value="3" title="3 @{rotpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_rotpoints" value="4" title="4 @{rotpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_rotpoints" value="5" title="5 @{rotpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_rotpoints" value="6" title="6 @{rotpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_rotpoints" value="7" title="7 @{rotpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_rotpoints" value="8" title="8 @{rotpoints}" /><span></span>
            <input class="xbox" type="radio" name="attr_rotpoints" value="9" title="9 @{rotpoints}" /><span></span> 
            <input class="xbox" type="radio" name="attr_rotpoints" value="10" title="10 @{rotpoints}" /><span></span>
            <input type="hidden" name="attr_rotpoints_max" value="10" />
          </div>
          <div class="willpower-box3 chartype-background-dark">
            <span class="input-span" name="attr_rotpoints" title="@{rotpoints}" readonly></span>
          </div>
        </div>
      </div>

      <div class="character-consumables box chartype-background-light toggle-dice-only toggle-monster-only">
        <div class="consumables-grid">
          <div class="consumables-box header">
            <h1 data-i18n="consumable-u">CONSUMABLES</h1>
          </div>
          <div class="consumables-box1 column-header">
            <span data-i18n="die">Amount</span>
          </div>
          <div class="consumables-box2 column-header">
            <span data-i18n="die">Amount</span>
          </div>
          <!--<div class="consumables-box3"><span>&nbsp;</span></div>-->
          <div class="consumables-box4">
            <span class="header-h1" data-i18n="food">Food</span>
          </div>
          <div class="consumables-box5">
            <input type="number" class="input-number" name="attr_food" value="0" min="0" title="@{food}"></option>
          </div>
          <div class="consumables-box6">
            <!--<button type="roll" name="roll_food" title="%{food}" value="@{whisper_option} &{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{consumable}}} {{footer=^{consumable-note}}} @{food}"></button>
            -->
            </div>
          <div class="consumables-box7">
            <span class="header-h1" data-i18n="water">Water</span>
          </div>
          <div class="consumables-box8">
            <input type="number" class="input-number" name="attr_water" value="0" min="0" title="@{water}"></option>
          </div>
          <div class="consumables-box9">
            <!--<button type="roll" name="roll_water" title="%{water}" value="@{whisper_option} &{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{consumable}}} {{footer=^{consumable-note}}} @{water}"></button>
            -->
            </div>
          <div class="consumables-box10">
            <span class="header-h1" data-i18n="e-pack">E-pack</span>
          </div>
          <div class="consumables-box11">
            <input type="number" class="input-number" name="attr_epacks" value="0" min="0" title="@{epacks}"></option>
          </div>
          <div class="consumables-box12">
            <!--<button type="roll" name="roll_arrows" title="%{arrows}" value="@{whisper_option} &{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{consumable}}} {{footer=^{consumable-note}}} @{arrows}"></button>
            -->
          </div>
          <div class="consumables-box13">
            <span class="header-h1" data-i18n="bullets">Bullets</span>
          </div>
          <div class="consumables-box14">
            <input type="number" class="input-number" name="attr_bullets" value="0" min="0" title="@{bullets}"></option>
          </div>
          <div class="consumables-box15">
            <!--<button type="roll" name="roll_torches" title="%{torches}" value="@{whisper_option} &{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{consumable}}} {{footer=^{consumable-note}}} @{torches}"></button>
            -->
          </div>
        </div>
      </div>

      <div class="character-coins box chartype-background-light toggle-dice-only toggle-monster-only">
        <div class="coins-grid">
          <div class="coins-box header">
            <h1 data-i18n="money-u">MONEY</h1>
          </div>
          <!--<div class="coins-box1 column-header"></div>
          <div class="coins-box2 column-header">
            <span data-i18n="gold">Gold</span>
          </div>
          <div class="coins-box3 column-header">
            <span data-i18n="silver">Silver</span>
          </div>-->
          <div class="coins-box2 column-header">
            <span data-i18n="credits">Credits</span>
          </div>
          <div class="coins-box4 column-header">
            <span data-i18n="credits">Credits</span>
          </div>
  
          <div class="coins-box5">
            <span class="label" data-i18n="carried">Carried</span>
          </div>
          <!--<div class="coins-box6">
            <input class="input-number" type="text" name="attr_gold" value="0" title="@{gold}" />
          </div>
          <div class="coins-box7">
            <input class="input-number" type="text" name="attr_silver" value="0" title="@{silver}" />
          </div>-->
          <div class="coins-box6">
            <input class="input-number" type="text" name="attr_credits" value="0" min="0" title="@{credits}" />
          </div>
  
          <div class="coins-box7">
            <span class="label" style="text-align: center;" data-i18n="vehicle-credits">Vehicle</span>
          </div>
          <!--<div class="coins-box10">
            <input class="input-number" type="text" name="attr_gold_vehicle" value="0" title="@{gold_vehicle}" />
          </div>
          <div class="coins-box11">
            <input class="input-number" type="text" name="attr_silver_vehicle" value="0" title="@{silver_vehicle}" />
          </div>-->
          <div class="coins-box8">
            <input class="input-number" type="text" name="attr_credits_vehicle" value="0" min="0" title="@{credits_vehicle}" />
          </div>
  
          <div class="coins-box9">
            <span class="label" data-i18n="stash">Stash</span>
          </div>
          <!--<div class="coins-box14">
            <input class="input-number" type="text" name="attr_gold_other" value="0" title="@{gold_vehicle}" />
          </div>
          <div class="coins-box15">
            <input class="input-number" type="text" name="attr_silver_other" value="0" title="@{silver_vehicle}" />
          </div>-->
          <div class="coins-box10">
            <input class="input-number" type="text" name="attr_credits_stash" value="0" min="0" title="@{credits_stash}" />
          </div>
          <input type="hidden" name="attr_coins_other_total" value="0" min="0" />
  
          <div class="coins-box11">
            <span class="label" data-i18n="total">Total</span>
          </div>
          <!--<div class="coins-box18">
            <input class="input-number" type="text" name="attr_gold_total" value="0" title="@{gold_total}" readonly />
          </div>
          <div class="coins-box18">
            <input class="input-number" type="text" name="attr_silver_total" value="0" title="@{silver_total}" readonly />
          </div>-->
          <div class="coins-box12">
            <input class="input-number" type="text" name="attr_credits_total" value="0" min="0" readonly />
          </div>
        </div>
      </div> 

      <div class="gear-grid box chartype-background-light">
        <div class="gear-box1 header">
          <h1 data-i18n="gea-u">GEAR</h1>
        </div>
        <div class="gear-box2 column-header">
          <span data-i18n="quantity-abbr">Qty</span>
        </div>
        <div class="gear-box3 column-header">
          <span data-i18n="carried-abbr">Carr</span>
        </div>
        <div class="gear-box4 column-header">
          <span data-i18n="weight-abbr">Wt</span>
        </div>
        <div class="gear-box5">
          <fieldset class="repeating_gear">
            <div class="gear-grid">
              <input class="expand" type="checkbox" name="attr_expand" value="1" data-i18n-title="show-hide" title="show/hide" /><span></span>
              <input class="gear-box1 input" type="text" name="attr_gear_name" value="" title="@{repeating_gear_$X_gear_name}" data-i18n-placeholder="item" placeholder="item" />
              <input class="gear-box2 input-number" type="number" name="attr_gear_qty" value="1" min="0" title="@{repeating_gear_$X_gear_qty}" />
              <input class="gear-box3 input" type="checkbox" name="attr_gear_carried" value="1" title="@{repeating_gear_$X_gear_carried}" checked />
              <select class="gear-box4 input" name="attr_gear_weight" title="@{repeating_gear_$X_gear_weight}">
                <option data-i18n="tiny-abbr" value="0" selected>T</option>
                <option data-i18n="quarter-abbr" value="0.25">Q</option>
                <option data-i18n="light-abbr" value="0.5">L</option>
                <option data-i18n="normal-abbr" value="1">N</option>
                <option data-i18n="heavy-abbr" value="2">H</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
              </select>
              <!-- expand 2nd row -->
              <textarea class="gear-box5 input-textarea" name="attr_gear_description" title="@{repeating_gear_$X_gear_description}" data-i18n-placeholder="description" placeholder="description"></textarea>
            </div>
          </fieldset>
        </div>
        <div class="gear-weight">
          <div><span class="label" data-i18n="gear">Gear</span></div>
          <div>
            <input class="input-number" type="text" name="attr_gear_encumbrance" value="0" title="@{gear_encumbrance}" readonly />
          </div>
          <div><span class="label" data-i18n="consumables">Consumables</span></div>
          <div>
            <input class="input-number" type="text" name="attr_consumables_encumbrance" value="0" title="@{character_consumables_encumbrance}" readonly />
          </div>
          <div><span class="label" data-i18n="weapons">Weapons</span></div>
          <div>
            <input class="input-number" type="text" name="attr_weapons_encumbrance" value="0" title="@{weapons_encumbrance}" readonly />
          </div>
          <div><span class="label" data-i18n="armor">Armor</span></div>
          <div>
            <input class="input-number" type="text" name="attr_armor_encumbrance" value="0" title="@{armor_encumbrance}" readonly />
          </div>
        </div>
        <div class="gear-box6 header">
          <div class="gear">
            <span class="label encumberance" data-i18n="encumbrance">Encumbrance</span>
          </div>
          <div class="gear">
            <input type="hidden" name="attr_gear_encumbrance" value="1" />
            <input class="input-number" type="text" name="attr_character_encumbrance" value="0" title="@{character_encumbrance}" readonly />
          </div>
          <div class="gear">
            <span class="label carry-separator"> / </span>
          </div>
          <div class="gear">
            <span class="label carry-cap" data-i18n="carry-cap">Carry Cap</span>
          </div>
          <div class="gear">
            <input class="input-number" type="text" name="attr_carry" value="((2*(@{strength}))*@{pack_rat})" title="@{carry} = 2 x @{strength} x @{pack_rat}" disabled />
          </div>
        </div>
        <div class="gear-subgrid2 chartype-background-light" style="margin-bottom: 1em;">
          <div class="gear-box12">
            <span class="label" data-i18n-title="pack-rat-title" data-i18n="pack-rat">Pack Rat Talent?&nbsp;</span>
          </div>
          <div class="gear-box13">
            <select class="input" name="attr_pack_rat">
              <option value="1" data-i18n="no" selected>No</option>
              <option value="2" data-i18n="yes">Yes</option>
            </select>
          </div>
        </div>
      </div>

      <div class="vehicle-grid box chartype-background-light">
        <div class="vehicle-box1 header">
          <h1 data-i18n="vehicle-u">VEHICLE</h1>
        </div>
        <input class="expand" type="checkbox" name="attr_expand_vehicle1" value="1" data-i18n-title="show-hide" title="show/hide" style="margin-top: 3.35em;" /><span></span>
        <input class="vehicle-box2 input" type="text" name="attr_vehicle_name" value="" title="@{vehicle_name}" data-i18n-placeholder="name" placeholder="name" />
        <input type="hidden" name="attr_vehicle_advancedencumbrance" value="0" readonly hidden />
        <!-- First row of stats -->
        <div class="vehicle-box3">
          <span class="label" data-i18n="bonus">Bonus</span>
          <input class="input-number" type="number" name="attr_vehicle_bonus" value="0" title="@{vehicle_bonus}" />
        </div>
        <div class="vehicle-box4">
          <input class="input-number" type="number" name="attr_vehicle_maxload" value="0" title="@{vehicle_maxload}" />
          <span class="label" data-i18n="carry-load">Max load</span>
        </div>
        <div class="vehicle-box5">
          <span class="label" data-i18n="armor">Armor</span>
          <input class="vehicle-box6 input-number" type="number" name="attr_vehicle_armor" value="0" title="@{vehicle_armor}" />
        </div>        
        <div class="vehicle-box7">
          <input class="input-number" type="number" name="attr_vehicle_resilience" value="0" title="@{vehicle_resilience}" />
          <span class="label" data-i18n="resilience">Resilience</span>
        </div>
        <div class="vehicle-box9">
          <span class="label" data-i18n="fuel">Fuel</span>
          <input class="input-number" type="number" name="attr_vehicle_fuel" value="0" title="@{vehicle_fuel}" />
        </div>
        <div class="vehicle-box11">
          <input class="input-number" type="number" name="attr_vehicle_fuel_cap" value="0" title="@{vehicle_fuel}" />
          <span class="label" data-i18n="fuel-capacity">Fuel Capacity</span>
        </div>
        <div class="vehicle-box13">
          <span class="label" data-i18n="occupants">Occupants</span>
          <input class="input-number" type="number" name="attr_vehicle_occupants" value="0" title="@{vehicle_occupants}" />
        </div>
        <div class="vehicle-box15">
          <input class="input-number" type="number" name="attr_vehicle_seats" value="1" title="@{vehicle_seats}" />
          <span class="label" data-i18n="seats">Seats</span>
        </div>
        <!-- expand 2nd row -->
        <textarea class="vehicle-box-desc vehicle-row2 input-textarea" name="attr_vehicle_description"
          title="@{vehicle_description}" data-i18n-placeholder="description" placeholder="description"></textarea>

        <!-- vehicle gear -->

        <div class="vehiclegear-box chartype-background-light">
          <div class="vehiclegear-grid chartype-background-light">
            <div class="vehiclegear-box1 header">
              <h1 data-i18n="gear-on-vehicle">Gear on vehicle</h1>
            </div>
            <div class="vehiclegear-box2 column-header">
              <span data-i18n="quantity-abbr">Qty</span>
            </div>
            <div class="vehiclegear-box3 column-header">
              <span data-i18n="carry-cap">Carry Cap</span>
            </div>
            <div class="vehiclegear-box4 column-header">
              <span data-i18n="weight-abbr">Wt</span>
            </div>
            <div class="vehiclegear-box5">
              <fieldset class="repeating_vehiclegear">
                <div class="vehiclegear-grid">
                  <input class="expand" type="checkbox" name="attr_expand" value="1" data-i18n-title="show-hide" title="show/hide" /><span></span>
                  <input class="vehiclegear-box1 input" type="text" name="attr_vehiclegear_name" value="" title="@{repeating_vehiclegear_$X_vehiclegear_name}" data-i18n-placeholder="item" placeholder="item" />
                  <input class="vehiclegear-box2 input-number" type="number" name="attr_vehiclegear_qty" value="1" title="Quantity @{repeating_vehiclegear_$X_vehiclegear_qty}" />
                  <input class="vehiclegear-box3 input" type="checkbox" name="attr_vehiclegear_carried" value="1" title="@{repeating_vehiclegear_$X_vehiclegear_carried}" checked />
                  <select class="vehiclegear-box4 input" name="attr_vehiclegear_weight" title="@{repeating_vehiclegear_$X_vehiclegear_weight}">
                    <option data-i18n="tiny-abbr" value="0" selected>T</option>
                    <option data-i18n="quarter-abbr" value="0.25">Q</option>
                    <option data-i18n="light-abbr" value="0.5">L</option>
                    <option data-i18n="normal-abbr" value="1">N</option>
                    <option data-i18n="heavy-abbr" value="2">H</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                  </select>
                  <textarea class="vehiclegear-box5 input-textarea" name="attr_vehiclegear_description" title="@{repeating_vehiclegear_$X_vehiclegear_description}" data-i18n-placeholder="description" placeholder="description"></textarea>
                </div>
              </fieldset>
            </div>
            <div class="gear-weight">
              <div><span class="label" data-i18n="gear">Gear</span></div>
              <div>
                <input class="input-number" type="text" name="attr_vehiclegear_encumbrance" value="0" title="@{vehiclegear_encumbrance}" readonly />
              </div>
              <div>
                <span class="label" data-i18n="occupants">Occupants</span>
              </div>
              <div>
                <input class="input-number" type="text" name="attr_vehicle_occupants_weight" value="0" title="@{vehicle_occupants_weight}" readonly />
              </div>
              <div>
                <span class="label" data-i18n="fuel">Fuel</span>
              </div>
              <div>
                <input class="input-number" type="text" name="attr_vehicle_fuel_weight" value="0" title="@{vehicle_fuel_weight}" readonly />
              </div>
            </div>
            <div class="vehiclegear-box6 header">
              <input type="hidden" name="attr_vehicle_overencumbered" hidden readonly />
              <div class="vehiclegear">
                <span class="label encumberance" data-i18n="encumbrance">Encumbrance</span>
              </div>
              <div class="vehiclegear">
                <input class="input-number" type="text" name="attr_vehiclegear_total" value="0" title="@{vehiclegear_total}" readonly />
              </div>
              <div class="gear">
                <span class="label carry-separator"> / </span>
              </div>
              <div class="vehiclegear">
                <span class="label carry-cap" data-i18n="carry-cap">Carry Cap</span>
              </div>
              <div class="vehiclegear">
                <input class="input-number" type="text" name="attr_vehicle_carry" value="@{vehicle_carry}" title="@{vehicle_carry} = vehicle_strength x2, unvehicleed x4" readonly />
              </div>
            </div>
        </div>
      </div>
      
      </div>
    </div>

    <div class="character-armor box chartype-background-light toggle-dice-only toggle-monster-only ">
      <div class="armor-container">
        <div class="armor-grid">
          <div class="armor-box header">
          </div>
          <div class="armor-box-header header">
            <h1 data-i18n="armor-u">ARMOR</h1>
          </div>
          <div class="armor-box1 column-header">
            <span data-i18n="name">Name</span>
          </div>
          <div class="armor-box2 column-header">
            <span data-i18n="armor-rating-abbr">AR</span>
          </div>
          <div class="armor-box3 column-header">
            <span data-i18n="max-abbr">Max</span>
          </div>
          <div class="armor-box4 column-header">
            <span data-i18n="modifier-abbr">Mod</span>
          </div>
          <div class="armor-box5 column-header">
            <span data-i18n="carried">Carried</span>
          </div>
          <div class="armor-box6 column-header">
            <span data-i18n="donned">Donned</span>
          </div>
          <div class="armor-box7 column-header">
            <span data-i18n="weight">Weight</span>
          </div>
          <div class="armor-box8 column-header">
            <span data-i18n="features">Features</span>
          </div>
          <div class="armor-box9 column-header">
            <span data-i18n="total-abbr" title-i18n="armor-rating">AR</span>
          </div>
          <div class="armor-box10">
            <fieldset class="repeating_armor">
              <div class="armor-grid">
                <input class="armor-box1 input" type="text" name="attr_armor_name" value="" title="@{armor_name}" data-i18n-placeholder="name" placeholder="name" />
                <input class="armor-box2 input-number" type="number" name="attr_armor_bonus" value="0" min="0" max="@{armor-bonus-max}" data-i18n-title="armor-bonus" title="Record the armor's CURRENT bonus up to MAX (adjusts GEAR dice). @{armor_bonus}" />
                <input class="armor-box3 input-number" type="number" name="attr_armor_bonus_max" value="0" min="0" data-i18n-title="armor-bonus-max" title="Record the armor's UNDAMAGED bonus. @{armor_bonus_max}" />
                <select class="armor-box4 input" name="attr_armor_bonus_misc" data-i18n-title="armor-bonus-misc" title="Miscellaneous bonus modifier (adjusts GEAR dice). @{armor_damage}">
                  <option value="6">+6</option>
                  <option value="5">+5</option>
                  <option value="4">+4</option>
                  <option value="3">+3</option>
                  <option value="2">+2</option>
                  <option value="1">+1</option>
                  <option value="0" selected>+0</option>
                  <option value="-1">-1</option>
                  <option value="-2">-2</option>
                  <option value="-3">-3</option>
                  <option value="-4">-4</option>
                  <option value="-5">-5</option>
                  <option value="-6">-6</option>
                </select>
                <select class="armor-box5 input" name="attr_armor_carried" title="@{armor_carried}">
                  <option data-i18n="yes" value="1" selected>Yes</option>
                  <option data-i18n="no" value="0">No</option>
                </select>
                <input class="armor-box6 input" type="checkbox" name="attr_armor_equipped" value="1" title="@{armor_equipped}" checked />
                <select class="armor-box7 input" name="attr_armor_weight" title="@{armor_weight}">
                  <option data-i18n="tiny-abbr" value="0" selected>T</option>
                  <option data-i18n="quarter-abbr" value="0.25">Q</option>
                  <option data-i18n="light-abbr" value="0.5">L</option>
                  <option data-i18n="normal-abbr" value="1">N</option>
                  <option data-i18n="heavy-abbr" value="2">H</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select>
                <input class="armor-box8 input" type="text" name="attr_armor_features" value="" title="@{armor_features}" />
                <span class="armor-box9 readonly" name="attr_armor_ar" value="0" data-i18n-title="armor-ar" title="Total GEAR and SKILL dice included for armor. @{armor_ar}" readonly>0</span>
                <!-- expand 2nd row 
                <input class="expand" type="checkbox" name="attr_expand_armor" value="1" data-i18n-title="show-hide" title="show/hide" checked /><span></span>
                -->
                  <!-- 2nd row -->
                  <!-- 
                <div class="armor-row2">               
                  <span class="armor-box21">
                    <span data-i18n="carried">Carried</span>
                  </span>
                  <select class="armor-box22 input" name="attr_armor_carried" title="@{armor_carried}">
                    <option data-i18n="yes" value="1" selected>Yes</option>
                    <option data-i18n="no" value="0">No</option>
                  </select>
                  <span class="armor-box23">
                    <span data-i18n="weight">Weight</span>
                  </span>
                  <select class="armor-box24 input" name="attr_armor_weight" title="@{armor_weight}">
                    <option data-i18n="tiny-abbr" value="0" selected>T</option>
                    <option data-i18n="quarter-abbr" value="0.25">Q</option>
                    <option data-i18n="light-abbr" value="0.5">L</option>
                    <option data-i18n="normal-abbr" value="1">N</option>
                    <option data-i18n="heavy-abbr" value="2">H</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                  </select>
                  <span class="armor-box25"><span data-i18n="donned">Donned</span></span>
                  <input class="armor-box26 input" type="checkbox" name="attr_armor_equipped" value="1" title="@{armor_equipped}" checked />
                </div>--> 
              </div>       
            </fieldset>
          </div>
        </div>
        <div class="armor-ar chartype-background-dark">
            <span class="armor-box-ar">
              <h1 data-i18n="armor-rating-u" style="margin: 0;">
                ARMOR RATING
              </h1>
              <button type="action" class="armor-button" name="act_armor-roll" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
                <span class="readonly character-skill-total ar-total" name="attr_ar_total" value="0" title="@{ar_total}">0</span>
              </button>
            </span>
        </div>
      </div>
    </div>

    <div class="character-relationships box chartype-background-light toggle-dice-only toggle-monster-only toggle-npc-only ">
      <div class="relationships-grid">
        <div class="relationships-box1 header">
          <h1 data-i18n="relationships-u">RELATIONSHIPS</h1>
        </div>
        <div class="relationships-box1">
            <div class="relationships-grid">
              <div class="relationships-box3">
                <span data-i18n="hate">Hate: </span>
              </div>
              <div class="relationships-box6">
                <textarea class="input-textarea" name="attr_relation_hate" title="@{{relation_hate}" data-i18n-placeholder="relationship-description" placeholder="Describe the relationship."></textarea>
              </div>
            </div>
        </div>
        <div class="relationships-box1">
            <div class="relationships-grid">
              <div class="relationships-box3">
                <span data-i18n="protect">Protect: </span>
              </div>
              <div class="relationships-box6">
                <textarea class="input-textarea" name="attr_relation_protect" title="@{{relation_protect}" data-i18n-placeholder="relationship-description" placeholder="Describe the relationship."></textarea>
              </div>
            </div>
        </div>
        <div class="relationships-box1">
            <div class="relationships-grid">
              <div class="relationships-box3">
                <span data-i18n="dream">Dream: </span>
              </div>
              <div class="relationships-box6">
                <textarea class="input-textarea" name="attr_relation_dream" title="@{relation_dream}" data-i18n-placeholder="relationship-description" placeholder="Describe the relationship."></textarea>
              </div>
            </div>
        </div>
        <div class="relationships-box11 chartype-background-dark">
          <div class="relationships-grid-repeating">
            <div class="relationships-box3 column-subheader chartype-background-dark">
              <span data-i18n="rpc-name">Player Character</span>
            </div>
            <div class="relationships-box4 column-subheader chartype-background-dark">
              <span data-i18n="description">Description</span>
            </div>
            <div class="relationships-box5 column-subheader chartype-background-dark">
              <span data-i18n="close">Close</span>
            </div>
          </div>
        </div>      
        <div class="relationships-box11">
          <fieldset class="repeating_rpcrelations">
            <div class="relationships-box11">
              <div class="relationships-grid-repeating">
                <div class="relationships-box3">
                  <input class="input" type="text" name="attr_rpcrelations_name" value="" title="@{repeating_rpcrealtions_$X_relation_name}" data-i18n-placeholder="rpc-name"   placeholder="RPC's name" />
                </div>
                <div class="relationships-box4">
                  <textarea class="input-textarea" name="attr_rpcrelations_description" title="@{repeating_rpcrealtions_$X_relation_description}" data-i18n-placeholder="relationship-description"   placeholder="Describe the relationship."></textarea>
                </div>
                <div class="relationships-box5">
                  <input type="radio" name="attr_rpcrelations_close" title="@{repeating_rpcrealtions_$X_rrelation_close}" data-i18n-placeholder="relationship-description"   placeholder="Describe the relationship."></textarea>
                </div>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="relationships-box11 chartype-background-dark">          
          <div class="relationships-grid-repeating">
            <div class="relationships-box3 column-subheader chartype-background-dark">
              <span data-i18n="npc-name">Non-Player Character</span>
            </div>
            <div class="relationships-box6 column-subheader chartype-background-dark">
              <span data-i18n="description">Description</span>
            </div>
          </div>
        </div>      
        <div class="relationships-box11">
          <fieldset class="repeating_npcrelations">
            <div class="relationships-box11">
              <div class="relationships-grid-repeating">
                <div class="relationships-box3">
                  <input class="input" type="text" name="attr_npcrelations_name" value="" title="@{repeating_npcrelations_$X_relation_name}" data-i18n-placeholder="npc-name"   placeholder="NPC's name" />
                </div>
                <div class="relationships-box6">
                  <textarea class="input-textarea" name="attr_npcrelations_description" title="@{repeating_npcrelations_$X_relation_description}" data-i18n-placeholder="relationship-description"   placeholder="Describe the relationship."></textarea>
                </div>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
    </div>

    <div class="character-spells box toggle-dice-only toggle-monster-only ">
      <div class="spells-grid">
        <div class="spells-box header">
          <h1 data-i18n="spell-u">SPELLS</h1>
        </div>
        <div class="spells-box0 column-header"></div>
        <div class="spells-box1 column-header">
          <span data-i18n="name">Name</span>
        </div>
        <div class="spells-box2 column-header">
          <span data-i18n="rank">Rank</span>
        </div>
        <div class="spells-box3 column-header">
          <span data-i18n="willpower-abbr">Will</span>
        </div>
        <div class="spells-box4 column-header">
          <span data-i18n="range">Range</span>
        </div>
        <div class="spells-box5 column-header">
          <span data-i18n="duration">Duration</span>
        </div>
        <div class="spells-box6 column-header">
          <span data-i18n="ingredients">Ingredients</span>
        </div>
        <div class="spells-box7">
          <fieldset class="repeating_spells">
            <div class="spells-grid">
              <input class="expand" type="checkbox" name="attr_expand" value="1" data-i18n-title="show-hide" title="show/hide" checked /><span></span>
              <button class="spells-box0 roll-button" type="action" name="act_spell-roll" data-i18n-title="update-dice-pool" title="Update the dice pool. Use the 'Roll' button to roll the dice.">
                t
              </button>
              <input class="spells-box1 input" type="text" name="attr_spell_name" value="" title="@{repeating_spells_$X_spell_name}" data-i18n-placeholder="spell-name" placeholder="Spell's name" />
              <select class="spells-box2 input" name="attr_spell_rank" title="@{repeating_spells_$X_spell_rank}">
                <option value="1" selected>1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
              </select>
              <input class="spells-box3 input" type="number" name="attr_spell_willpower" value="1" min="1" title="@{repeating_spells_$X_spell_willpower}" />
              <select class="spells-box4 input" name="attr_spell_range" title="@{repeating_spells_$X_spell_range}">
                <option value="Personal" selected data-i18n="personal">Personal</option>
                <option value="Arm's L." data-i18n="arms-length-abbr">Arm's L.</option>
                <option value="Short" data-i18n="short">Short</option>
                <option value="Near" data-i18n="near">Near</option>
                <option value="Distant" data-i18n="distant">Distant</option>
              </select>
              <input class="spells-box5 input" type="text" name="attr_spell_duration" value="" title="@{repeating_spells_$X_spell_duration}" />
              <input class="spells-box6 input" type="text" name="attr_spell_ingredients" value="" title="@{repeating_spells_$X_spell_ingredients}" />
              <textarea class="spells-box7 input-textarea" name="attr_spell_description" title="@{repeating_spells_$X_spell_description}" data-i18n-placeholder="description" placeholder="Description."></textarea>
            </div>
          </fieldset>
        </div>
      </div>
    </div>

    <div class="character-notes box chartype-background-light toggle-dice-only ">
      <div class="notes-grid">
        <div class="notes-box1 header">
          <h1 data-i18n="notes-u">NOTES</h1>
        </div>
        <div class="notes-box2">
          <fieldset class="repeating_notes">
            <div class="notes-grid">
              <div class="notes-box4">
                <input class="input" type="text" name="attr_note_name" value="" title="@{repeating_notes_$X_note_name}" data-i18n-placeholder="note-name" placeholder="Note's name" />
              </div>
              <div class="notes-box5">
                <textarea class="input-textarea" name="attr_note_description" title="@{repeating_notes_$X_note_description}" data-i18n-placeholder="note-description"   placeholder="Note's description."></textarea>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="wrapper tab-content ark">
  <div class="ark-grid">

    <div class="box ark-development chartype-background-dark char-human char-robot char-mutant">
      <div class="ark-development-grid">
        <div class="ark-development-box1 header">
          <h1 data-i18n="development-u">
            DEVELOPMENT
          </h1>
        </div>
        <div class="ark-development-subheader ark-development-subheader1 column-header">
          <span data-i18n="foodsupply-u">Food Supply</span>
        </div>
        <div class="ark-development-subheader ark-development-subheader2 column-header">
          <span data-i18n="culture">Culture</span>
        </div>
        <div class="ark-development-subheader ark-development-subheader3 column-header">
          <span data-i18n="technology">Technology</span>
        </div>
        <div class="ark-development-subheader ark-development-subheader4 column-header">
          <span data-i18n="warfare">Warfare</span>
        </div>      
        <div class="ark-development-col ark-development-col1">
          <input type="number" class="input-number" name="attr_ark_dev_food" />
        </div>
        <div class="ark-development-col ark-development-col2">
          <input type="number" class="input-number" name="attr_ark_dev_cult" />
        </div>
        <div class="ark-development-col ark-development-col3">
          <input type="number" class="input-number" name="attr_ark_dev_tech" />
        </div>
        <div class="ark-development-col ark-development-col4">
          <input type="number" class="input-number" name="attr_ark_dev_war" />
        </div>
      </div>
    </div>

    <div class="box ark-influence chartype-background-light char-human">
      <div class="ark-influence-core ark-influence-grid">
        <div class="ark-influence-header header">
          <h1 data-i18n="thecore-influence-u">
            THE CORE - INFLUENCE
          </h1>
        </div>
        <div class="ark-influence-subheaderrow">
          <span class="ark-influence ark-influence-subheader ark-influence-subheader1 column-header" data-i18n="sector">Sector</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader2 column-header" data-i18n="warburg">Warburg</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader3 column-header" data-i18n="fortescue">Fortescue</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader4 column-header" data-i18n="kilgore">Kilgore</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader5 column-header" data-i18n="morningstar">Morningstar</span>
        </div>
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="nova-paloma">Nova Paloma</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_novapaloma_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_novapaloma_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_novapaloma_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_novapaloma_morningstar" class="input-number" value="0" min="0" max="2" /></span>
        </div>
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="old-koly">Old Koly</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_oldkoly_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_oldkoly_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_oldkoly_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_oldkoly_morningstar" class="input-number" value="0" min="0" max="2" /></span>
        </div>
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="pirius">Pirius</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_pirius_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_pirius_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_pirius_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_pirius_morningstar" class="input-number" value="0" min="0" max="2" /></span>
        </div>
        <div class="ark-influence-row"> 
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="tindertuft">Tindertuft</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_tindertuft_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_tindertuft_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_tindertuft_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_tindertuft_morningstar" class="input-number" value="0" min="0" max="2" /></span>
        </div>
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="northolme">Northolme</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_northolme_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_northolme_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_northolme_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_northolme_morningstar" class="input-number" value="0" min="0" max="2" /></span>      
        </div>
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="calista">Calista</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_calista_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_calista_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_calista_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_calista_morningstar" class="input-number" value="0" min="0" max="2" /></span>
        </div> 
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="hindenburg">Hindenburg</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_hindenburg_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_hindenburg_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_hindenburg_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_hindenburg_morningstar" class="input-number" value="0" min="0" max="2" /></span>
        </div>              
      </div>
      <div class="ark-influence-deep ark-influence-grid">
        <div class="ark-influence-header header">
          <h1 data-i18n="thedeep-influence-u">
            THE DEEP - INFLUENCE
          </h1>
        </div>
        <div class="ark-influence-subheaderrow">
          <span class="ark-influence ark-influence-subheader ark-influence-subheader1 column-header" data-i18n="sector">Sector</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader2 column-header" data-i18n="warburg">Warburg</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader3 column-header" data-i18n="fortescue">Fortescue</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader4 column-header" data-i18n="kilgore">Kilgore</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader5 column-header" data-i18n="morningstar">Morningstar</span>
        </div>
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="mosel">Mosel</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_mosel_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_mosel_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_mosel_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_mosel_morningstar" class="input-number" value="0" min="0" max="2" /></span>          
        </div>
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="laborum">Laborum</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_laborum_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_laborum_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_laborum_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_laborum_morningstar" class="input-number" value="0" min="0" max="2" /></span>         
        </div>
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="arcadium">Arcadium</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_arcadium_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_arcadium_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_arcadium_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_arcadium_morningstar" class="input-number" value="0" min="0" max="2" /></span>
      
        </div>
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="cinderfalls">Cinderfalls</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_cinderfalls_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_cinderfalls_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_cinderfalls_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_cinderfalls_morningstar" class="input-number" value="0" min="0" max="2" /></span>
     
        </div>
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1 chartype-background-dark" data-i18n="cogsofhel">Cogs of Hel</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" name="attr_cogsofhel_warburg" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" name="attr_cogsofhel_fortescue" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" name="attr_cogsofhel_kilgore" class="input-number" value="0" min="0" max="2" /></span>
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" name="attr_cogsofhel_morningstar" class="input-number" value="0" min="0" max="2" /></span>
    
        </div>
        
    </div>
      <div class="ark-influence-total ark-influence-grid">
        <div class="ark-influence-header header">
          <h1 data-i18n="total-influence-u">
            TOTAL INFLUENCE
          </h1>
        </div>
        <div class="ark-influence-subheaderrow">
          <span class="ark-influence ark-influence-subheader ark-influence-subheader1 column-header">&nbsp;</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader2 column-header" data-i18n="warburg">Warburg</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader3 column-header" data-i18n="fortescue">Fortescue</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader4 column-header" data-i18n="kilgore">Kilgore</span>
          <span class="ark-influence ark-influence-subheader ark-influence-subheader5 column-header" data-i18n="morningstar">Morningstar</span>
        </div>
        <div class="ark-influence-row">
          <span class="ark-influence ark-influence-col ark-influence-col1">&nbsp;</span>
          <span class="ark-influence ark-influence-col ark-influence-col2"><input type="number" disabled readonly name="attr_total_warburg" class="input-number" value="(@{novapaloma_warburg}+@{oldkoly_warburg}+@{pirius_warburg}+@{tindertuft_warburg}+@{northolme_warburg}+@{calista_warburg}+@{hindenburg_warburg}+@{mosel_warburg}+@{laborum_warburg}+@{arcadium_warburg}+@{cinderfalls_warburg}+@{cogsofhel_warburg})" min="0" /></span>
          
          <span class="ark-influence ark-influence-col ark-influence-col3"><input type="number" disabled readonly name="attr_total_fortescue" class="input-number" value="(@{novapaloma_fortescue}+@{oldkoly_fortescue}+@{pirius_fortescue}+@{tindertuft_fortescue}+@{northolme_fortescue}+@{calista_fortescue}+@{hindenburg_fortescue}+@{mosel_fortescue}+@{laborum_fortescue}+@{arcadium_fortescue}+@{cinderfalls_fortescue}+@{cogsofhel_fortescue})" min="0" /></span>
          
          <span class="ark-influence ark-influence-col ark-influence-col4"><input type="number" disabled readonly name="attr_total_kilgore" class="input-number" value="(@{novapaloma_kilgore}+@{oldkoly_kilgore}+@{pirius_kilgore}+@{tindertuft_kilgore}+@{northolme_kilgore}+@{calista_kilgore}+@{hindenburg_kilgore}+@{mosel_kilgore}+@{laborum_kilgore}+@{arcadium_kilgore}+@{cinderfalls_kilgore}+@{cogsofhel_kilgore})" min="0" /></span>
          
          <span class="ark-influence ark-influence-col ark-influence-col5"><input type="number" disabled readonly name="attr_total_morningstar" class="input-number" value="(@{novapaloma_morningstar}+@{oldkoly_morningstar}+@{pirius_morningstar}+@{tindertuft_morningstar}+@{northolme_morningstar}+@{calista_morningstar}+@{hindenburg_morningstar}+@{mosel_morningstar}+@{laborum_morningstar}+@{arcadium_morningstar}+@{cinderfalls_morningstar}+@{cogsofhel_morningstar})" min="0" /></span>
        </div>
      </div>

    </div>

    <div class="box ark-details chartype-background-dark char-mutant">
      <div class="ark-details-grid">
        <div class="ark-details-header header">
          <h1 data-i18n="ark-u">
            ARK
          </h1>
        </div>
        <div class="ark-details-box ark-details-box1">
          <span class="label ark-details-label" data-i18n="name">Name</span>
        </div>
        <div class="ark-details-box ark-details-box2">
          <input class="input-text" type="text" name="attr_ark_name" value="" title="@{ark_name}" />
        </div>

        <div class="ark-details-box ark-details-box3">
          <span class="label ark-details-label" data-i18n="type">Type</span>
        </div>
        <div class="ark-details-box ark-details-box4">
          <input class="input-text" type="text" name="attr_ark_type" value="" title="@{ark_type}" />
        </div>

        <div class="ark-details-box ark-details-box5">
          <span class="label ark-details-label" data-i18n="location">Location</span>
        </div>
        <div class="ark-details-box ark-details-box6">
          <input class="input-text" type="text" name="attr_ark_location" title="@{ark_location}" />
        </div>

        <div class="ark-details-box ark-details-box7">
          <span class="label ark-description-label" data-i18n="description" style="margin: 0 5px 0 0;">Description</span>
          <textarea class="input-textarea" name="attr_ark_description" title="@{ark_description}"></textarea>
        </div>
      </div>
    </div>

    <div class="box ark-other chartype-background-dark char-mutant">
      <div class="ark-details-grid">
        <div class="ark-details-header header">
          <h1 data-i18n="other-u">
            OTHER
          </h1>
        </div>
        <div class="ark-details-box ark-details-box1">
          <span class="label ark-details-label" data-i18n="population">Population</span>
        </div>
        <div class="ark-details-box ark-details-box2">
          <input class="input-text ark-population" type="text" name="attr_ark_population" value="" min="0" title="@{ark_population}" />
        </div>

        <div class="ark-details-box ark-details-box3">
          <span class="label ark-details-label" data-i18n="water-source">Water source</span>
        </div>
        <div class="ark-details-box ark-details-box4">
          <input class="input-text" type="text" name="attr_ark_watersource" value="" title="@{ark_watersource}" />
        </div>

        <div class="ark-details-box ark-details-box5">
          <span class="label ark-details-label" data-i18n="season">Season</span>
        </div>
        <div class="ark-details-box ark-details-box6">
          <input class="input-text" type="text" name="attr_ark_season" title="@{ark_season}"/>
        </div>

        <div class="ark-details-box ark-details-box7">
          <span class="label ark-description-label " data-i18n="notable-inhabitants">Notable inhabitants</span>
          <textarea class="input-textarea" name="attr_ark_notableinhabitants" title="@{ark_notableinhabitants}"></textarea>
        </div>
      </div>
    </div>
       
    <div class="box ark-bosses chartype-background-light char-mutant">
      <div class="ark-bosses-grid">
        <div class="ark-bosses-box header">
          <h1 data-i18n="bosses-u">BOSSES</h1>
        </div>
        <div class="ark-bosses-subheader ark-bosses-subheader1 column-header">
          <span data-i18n="description">Description</span>
        </div>
        <div class="ark-bosses-subheader ark-bosses-subheader2 column-header">
          <span data-i18n="type">Type</span>
        </div>
        <div class="ark-bosses-repeating">
          <fieldset class="repeating_bosses">
            <div class="ark-bosses-grid">
              <input class="ark-bosses-box1 input-textarea" type="text" name="attr_boss_desc" value="" title="@{repeating_bosses_$X_boss_desc}" />
              <input class="ark-bosses-box2 input-text" type="text" name="attr_boss_type" value="" title="@{repeating_bosses_$X_boss_type}" />
            </div>
          </fieldset>
        </div>
      </div>
    </div>

    <div class="box ark-projects chartype-background-light char-mutant char-robot">
      <div class="ark-projects-grid">
        <div class="ark-projects-box header">
          <h1 data-i18n="projects-u">PROJECTS</h1>
        </div>
        <div class="ark-projects-box1 column-header">
          <span data-i18n="project">Project</span>
        </div>
        <div class="ark-projects-box2 column-header">
          <span data-i18n="comment">Comment</span>
        </div>
        <div class="ark-projects-box3 column-header">
          <span data-i18n="skill-u">Skills</span>
        </div>
        <div class="ark-projects-box4 column-header">
          <span data-i18n="workpoints">Work Points</span>
        </div>
        <div class="ark-projects-box5 column-header">
          <span data-i18n="complete">Complete</span>
        </div>
        <div class="ark-projects-repeating">
          <fieldset class="repeating_projects">
            <div class="ark-projects-grid">
              <input class="ark-projects-col ark-projects-box6 input-text" type="text" name="attr_project_desc" title="@{repeating_projects_$X_project_desc}" />
              <input class="ark-projects-col ark-projects-box7 input-text" type="text" name="attr_project_comment" title="@{repeating_projects_$X_project_comment}" />            
              <input class="ark-projects-col ark-projects-box8 input-text" type="text" name="attr_project_skills" title="@{repeating_projects_$X_project_skills}" />
              <input class="ark-projects-col ark-projects-box9 input-number" type="number" name="attr_project_points" title="@{repeating_projects_$X_project_points}" />
              <input class="ark-projects-col ark-projects-box10 input-checkbox" type="checkbox" name="attr_project_complete" title="@{repeating_projects_$X_project_complete}" />
            </div>
          </fieldset>
        </div>
      </div>
    </div>

    <div class="box ark-notes chartype-background-light">
      <div class="ark-notes-grid">
        <div class="ark-notes-box header">
          <h1 data-i18n="ark-notes-u">ARK NOTES</h1>
        </div>
        <div class="ark-notes-box1 column-header">
          <span data-i18n="title">Title</span>
        </div>
        <div class="ark-notes-box2 column-header">
          <span data-i18n="note">Note</span>
        </div>
        <div class="ark-notes-repeating">
          <fieldset class="repeating_arknotes">
            <div class="ark-notes-grid">
              <div class="ark_notes-box3">                
                <input type="text" class="input-text" name="attr_ark_notes_title" title="@{repeating_arknotes_$X_ark_notes_title}" />
              </div>
              <div class="ark_notes-box4">
                <textarea class="input-textarea" name="attr_ark_notes_note" title="@{repeating_arknotes_$X_ark_notes_note}"></textarea>
              </div>
            </div>
          </fieldset>
        </div>  
      </div>
    </div>
  </div>
</div>

<div class="wrapper tab-content settings">

  <!--announcements/updates-->
  <input type="checkbox" class="announcements-show toggle-dice-only toggle-monster-only" name="attr_show_announcements" value="1" data-i18n-title="version-announcements" title="Sheet version and announcements" style="width: 4.5em; height: 2em;">
  <!--<span class="announcements-show toggle-dice-only toggle-monster-only" name="attr_version">&nbsp;</span>-->
  <div class="settings-options">
    <input type="hidden" name="attr_translation_whisper_query" value="whisper-query" />
    <input type="hidden" name="attr_translation_whisper_api_query" value="whisper_api-query" />
    <div>
      <span data-i18n="whisper-options">Whisper Options:</span>
      <select name="attr_whisper_option" title="@{whisper_option}">
        <option value="" data-i18n="whisper-nothing" selected>Do not whisper rolls(default).</option>
        <option value="/w gm" data-i18n="whisper-rolls">Whisper all rolls to the GM.</option>
        <option value="@{translation_whisper_macro_query}" data-i18n="whisper-query">Use a query.</option>
      </select>
    </div>
    <div>
      <span data-i18n="whisper-options-api">API Whisper Options:</span>
      <select name="attr_whisper_option_api" title="@{whisper_option_api}">
        <option value="!forl" data-i18n="whisper-nothing" selected>Do not whisper rolls(default).</option>
        <option value="!wforl" data-i18n="whisper-rolls">Whisper all rolls to the GM.</option>
        <option value="@{translation_whisper_api_macro_query}" data-i18n="whisper-query">Use a query.</option>
      </select>
    </div>
    <!-- used to translate query-->
    <span style="display: none;" name="attr_translation_whisper_macro_query" value=""></span>
    <span style="display: none;" name="attr_translation_whisper_api_macro_query" value=""></span>
    <span style="display: none;" data-i18n="whisper-query">Whisper roll?</span>
    <span style="display: none;" data-i18n="yes">yes</span>
    <span style="display: none;" data-i18n="no">no</span>
    <div>
      <span data-i18n="sort-skills">Sort Skills by Attribute:</span>
      <input type="checkbox" name="attr_skill_order_group" value="1" title="@{skill_order_group}" style="vertical-align: text-top;" />
    </div>
    <div>
      <span data-i18n="sort-stockpile">Sort Stockpile resources alphabetically:</span>
      <input type="checkbox" name="attr_stockpile_order_group" value="1" title="@{stockpile_order_group}" style="vertical-align: text-top;" checked />
    </div>
  </div>
  <div class="announcements toggle-dice-only toggle-monster-only">
    <h3 data-i18n="latest-announcements">Latest Announcements</h3>
    <span class="footer">11/12/20</span>
    <ol style="margin: 0 2em 0 2em; padding: 0 1em 0 3em;">
      <span>v1.75</span>
      <li>Fixed a translation error that caused the dice pool to show "false" when the Melee skill was selected.</li>
    </ol>
    <br />
    <input type="checkbox" class="announcements-older-show" name="attr_show_announcements_old" value="1" data-i18n-title="old-announcements" />
    <span data-i18n-title="old-announcements">&nbsp;</span>
    <span class="announcements-older-show">
      <ol>
        <span>v1.74</span>
        <li>Updated the sheet with the an "offical" FBL logo. The english logo will be used unless a translation has been completed which also has an offical logo in the same language. The swedish translation will use the "svärdets sång" logo.</li>
        <span>v1.73</span>
        <li>Brazilian Portuguese translation added.(thank you Teuri)</li>
        <span>v1.72</span>
        <li>Updated the language files to include the latest changes to the translation.json</li>
        <span>v1.71</span>
        <li>Updated version checking(sheetworker). Thank you GiGs.</li>
        <li>Added two additional rows of armor. Use button under 2nd row to show/hide additional rows as needed.  Armor Rating dice are included for all <b>donned</b> armor. Armor weight is included toward encumbrance if the armor is <b>carried</b>.</li>
        <li>Updated roll template for the additional rows of armor. Details about the armor are only included in the roll if the armor is donned and includes a name.</li>
        <li>Updated armor artifact dice. A single artifact die will be included for a given column (mighty, mighty 2, epic, and legendary) even if multiple rows have been selected.  This is necessary due to the limits of the roll template.</li>
        <li>Corrected a few misspelled attributes. Converted automatically using version checking routine.</li>

        <span>v1.70</span>
        <li>Expanded item weight beyond Heavy.</li>

        <span>v1.69</span>
        <li>updated the Consumable reminder footnote; 'be sure to manually reduce the consumable die on the sheet if you roll bane of 1 or 2.'</li>

        <span>v1.68</span>
        <li>Default sheet settings have been added. Make default changes from the campaign Settings page. These defaults will apply to all new sheets. To apply these changes to all existing sheets as well, you must also use the           "Apply Default Settings" button found at the bottom of the sidebar's "My           Settings" page.</li>
        <li>Option added to Settings; group Skills by their primary attribute. Disabled by default to match existing sheet.</li>
        <li>Option added to Settings; sort Stockpile resources alphabetically. Enabled by default to match existing sheet.</li>

        <span>v1.67</span>
        <li>Updated the Consumables resource dice reminder used for the Swedish translation.</li>

        <span>v1.66</span>
        <li>Increased the range of each d66 dice to allow for custom rolls 0-100(normally, each d6 allows 1-6). While this does not effect the d66 roll on the sheet, it does allow more flexibility for custom macros if desired.
          <br /><b>d100 Roll macro example;</b> <br /><textarea style="height: auto;"> @{selected|whisper_option} &amp;{template:forbiddenlands} {{character_name=@{selected|character_name}}} {{character_id=@{selected|character_id}}} {{name=D100 Roll}} {{d66-die-one=[[ 1 ]] }} {{d66-roll-one=[[ 1d10-1 ]] }} {{d66-die-two=[[ 1 ]] }} {{d66-roll-two=[[ 1d10-1 ]] }}</textarea></li>
        <li>Fixed the translation list ordering for Skills and Stockpile.</li>

        <span>v1.65</span>
        <li>Added Misc Gear modifier to Skills.</li>
        <li>All Attributes are now "rollable".</li>
        <li>Fixed missing whisper option for notes rolls.</li>
        <li>Replaced the repeating row text "+Add" and "Modify" with simple icons.</li>
        <li>Swedish translations have been added. Thank you Magnus M.</li>

        <span>v1.64</span>
        <li>Bug fix: shield shove/parry rolls were erroneously including strength as gear dice.</li>
        <li>Optimized the css that reduces the opacity of damage skulls above the attribute's max value. Purely cosmetic.</li>

        <span>v1.63</span>
        <li>Added a toggleable 2nd row to each skill.</li>
        <li>Added Artifact dice, Misc Skill modifier, and Notes to each skill.</li>
        <li>Updated the roll template for skill rolls.</li>
        <li>Added Misc Skill modifier to strength-based monster skills.</li>
        <li>Visual enhancement; reduced the opacity of damage skulls that are beyond the character's max value.</li>

        <span>v1.62</span>
        <li>Added the 'IM Fell English' webfont to better match Forbidden Lands style.</li>
        <li>Updated all image links to point to the images located on roll20's github repo.</li>
        <li>Updated Armor and Shield Misc modifier to adjust Skill dice, not Gear dice.</li>
        <li>Fixed negative skill dice bug.</li>
        <li>Updated shield shove/parry roll template.</li>

        <span>v1.61</span>
        <li>fixed strength bug that reset strength to "0" for previously created characters.</li>
        <li>fixed encumbrance calculation bug introduced in last update.</li>
        <li>added event listener to repeating weapons to recalc attributes when added/changed.</li>
        <li>refinements to the roll template.</li>
        <li>coming soon; 1. Change armor/shield Misc modifier to adjust Skill dice instead of Gear dice. 2. Skills will
          get a Misc field and artifact dice.</li>

        <span>v1.60</span>
        <li>added an attribute for 'willpower_max'. Now you track willpower using a linked token bar.</li>
        <li>small updates to roll templates; removed whitespace for empty elements, adjusted the show/hide logic to better work with custom macros.</li>
        <li>updated the Reputation roll to use Age + Reputation.</li>
        <li>spells now roll Base dice(was rolling Gear dice) and Total WP is now displayed in the roll template.</li>
        <li>fixed monster strength vs pc/npc strength incompatibilities.(Thank you GiGs!)</li>
        <li>added columns for misc attack and damage bonuses, skill total, attack total, and damage total.</li>
        <li>added artifact dice (d8, d8, d10, d12) to weapons, armor, and shield that add artifact dice to the dice pool.</li>
        <li>added an expandable 2nd row to weapons, armor, and shield to show/hide additional attributes.</li>
      </ol>
    </span>
    <!--<input type="checkbox" class="announcements-show" name="attr_show_announcements" value="1" data-i18n-title="close-announcements" title="Close Announcements" style="margin: 10px 0 0 -10px; position: relative;" />
    <span class="announcements-exit" data-i18n-title="close">*</span>-->
  </div> 
</div>

<!-- Roll Templates -->
<rolltemplate class="sheet-rolltemplate-forbiddenlands">
  <div class="template-wrap">
    <div class="template-grid">
      <div class="template-grid-item template-span-six template-header">
        {{#character_name}}
        <div class="template-grid-item template-span-six template-header">
          {{#character_id}}[{{character_name}}](https://journal.roll20.net/character/{{character_id}}){{/character_id}}
          {{^character_id}}{{character_name}}{{/character_id}}
        </div>
        {{#name}}
        <div class="template-grid-item template-span-six template-header" style="width: 15px; z-index: 0; margin: 2px 2px 5px 2px;">
          ◇
        </div>
        {{/name}} {{/character_name}} {{#name}}
        <div class="template-grid-item template-span-six template-header">
          {{#name_link}}[{{name}}]({{name_link}}){{/name_link}} {{^name_link}}{{name}}{{/name_link}}
        </div>
        {{/name}}
      </div>

      {{#subtitle}}
      <div class="template-grid-item template-span-six template-subtitle">
        &ldquo;<span>{{subtitle}}</span>&rdquo;
      </div>
      {{/subtitle}}

      <!--- dice pool -->
      {{#rollTotal() attribute-die-one 1}}
      <div class="template-grid-item template-span-one template-white-dice">
        {{#rollWasFumble() attribute-roll-one}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-one}} {{#rollBetween() attribute-roll-one 2 5}} {{attribute-roll-one}}
        {{/rollBetween() attribute-roll-one 2 5}} {{#rollWasCrit() attribute-roll-one}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-one}}
      </div>
      {{/rollTotal() attribute-die-one 1}} {{#rollTotal() attribute-die-two 1}}
      <div class="template-grid-item template-span-two template-white-dice">
        {{#rollWasFumble() attribute-roll-two}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-two}} {{#rollBetween() attribute-roll-two 2 5}} {{attribute-roll-two}}
        {{/rollBetween() attribute-roll-two 2 5}} {{#rollWasCrit() attribute-roll-two}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-two}}
      </div>
      {{/rollTotal() attribute-die-two 1}} {{#rollTotal() skill-die-one 1}}
      <div class="template-grid-item template-span-three template-maroon-dice">
        {{#rollBetween() skill-roll-one 1 5}} {{skill-roll-one}} {{/rollBetween() skill-roll-one 1 5}}
        {{#rollWasCrit() skill-roll-one}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() skill-roll-one}}
      </div>
      {{/rollTotal() skill-die-one 1}} {{#rollTotal() skill-die-two 1}}
      <div class="template-grid-item template-span-four template-maroon-dice">
        {{#rollBetween() skill-roll-two 1 5}} {{skill-roll-two}} {{/rollBetween() skill-roll-two 1 5}}
        {{#rollWasCrit() skill-roll-two}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() skill-roll-two}}
      </div>
      {{/rollTotal() skill-die-two 1}} {{#rollTotal() negative-die-one 1}}
      <div class="template-grid-item template-span-three template-purple-dice">
        {{#rollBetween() negative-roll-one 1 5}} {{negative-roll-one}} {{/rollBetween() negative-roll-one 1 5}}
        {{#rollWasCrit() negative-roll-one}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() negative-roll-one}}
      </div>
      {{/rollTotal() negative-die-one 1}} {{#rollTotal() negative-die-two 1}}
      <div class="template-grid-item template-span-four template-purple-dice">
        {{#rollBetween() negative-roll-two 1 5}} {{negative-roll-two}} {{/rollBetween() negative-roll-two 1 5}}
        {{#rollWasCrit() negative-roll-two}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() negative-roll-two}}
      </div>
      {{/rollTotal() negative-die-two 1}} {{#rollTotal() gear-die-one 1}}
      <div class="template-grid-item template-span-five template-black-dice">
        {{#rollWasFumble() gear-roll-one}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-one}} {{#rollBetween() gear-roll-one 2 5}} {{gear-roll-one}}
        {{/rollBetween() gear-roll-one 2 5}} {{#rollWasCrit() gear-roll-one}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-one}}
      </div>
      {{/rollTotal() gear-die-one 1}} {{#rollTotal() gear-die-two 1}}
      <div class="template-grid-item template-span-shix template-black-dice">
        {{#rollWasFumble() gear-roll-two}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-two}} {{#rollBetween() gear-roll-two 2 5}} {{gear-roll-two}}
        {{/rollBetween() gear-roll-two 2 5}} {{#rollWasCrit() gear-roll-two}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-two}}
      </div>
      {{/rollTotal() gear-die-two 1}}
      <!--- BEGIN ROW TWO --->
      {{#rollTotal() attribute-die-three 1}}
      <div class="template-grid-item template-span-one template-white-dice">
        {{#rollWasFumble() attribute-roll-three}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-three}} {{#rollBetween() attribute-roll-three 2 5}} {{attribute-roll-three}}
        {{/rollBetween() attribute-roll-three 2 5}} {{#rollWasCrit() attribute-roll-three}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-three}}
      </div>
      {{/rollTotal() attribute-die-three 1}} {{#rollTotal() attribute-die-four 1}}
      <div class="template-grid-item template-span-two template-white-dice">
        {{#rollWasFumble() attribute-roll-four}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-four}} {{#rollBetween() attribute-roll-four 2 5}} {{attribute-roll-four}}
        {{/rollBetween() attribute-roll-four 2 5}} {{#rollWasCrit() attribute-roll-four}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-four}}
      </div>
      {{/rollTotal() attribute-die-four 1}} {{#rollTotal() skill-die-three 1}}
      <div class="template-grid-item template-span-three template-maroon-dice">
        {{#rollBetween() skill-roll-three 1 5}} {{skill-roll-three}} {{/rollBetween() skill-roll-three 1 5}}
        {{#rollWasCrit() skill-roll-three}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() skill-roll-three}}
      </div>
      {{/rollTotal() skill-die-three 1}} {{#rollTotal() skill-die-four 1}}
      <div class="template-grid-item template-span-four template-maroon-dice">
        {{#rollBetween() skill-roll-four 1 5}} {{skill-roll-four}} {{/rollBetween() skill-roll-four 1 5}}
        {{#rollWasCrit() skill-roll-four}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() skill-roll-four}}
      </div>
      {{/rollTotal() skill-die-four 1}} {{#rollTotal() negative-die-three 1}}
      <div class="template-grid-item template-span-three template-purple-dice">
        {{#rollBetween() negative-roll-three 1 5}} {{negative-roll-three}} {{/rollBetween() negative-roll-three 1 5}}
        {{#rollWasCrit() negative-roll-three}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() negative-roll-three}}
      </div>
      {{/rollTotal() negative-die-three 1}} {{#rollTotal() gear-die-three 1}}
      <div class="template-grid-item template-span-five template-black-dice">
        {{#rollWasFumble() gear-roll-three}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-three}} {{#rollBetween() gear-roll-three 2 5}} {{gear-roll-three}}
        {{/rollBetween() gear-roll-three 2 5}} {{#rollWasCrit() gear-roll-three}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-three}}
      </div>
      {{/rollTotal() gear-die-three 1}} {{#rollTotal() gear-die-four 1}}
      <div class="template-grid-item template-span-shix template-black-dice">
        {{#rollWasFumble() gear-roll-four}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-four}} {{#rollBetween() gear-roll-four 2 5}} {{gear-roll-four}}
        {{/rollBetween() gear-roll-four 2 5}} {{#rollWasCrit() gear-roll-four}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-four}}
      </div>
      {{/rollTotal() gear-die-four 1}}
      <!--- BEGIN ROW THREE -->
      {{#rollTotal() attribute-die-five 1}}
      <div class="template-grid-item template-span-one template-white-dice">
        {{#rollWasFumble() attribute-roll-five}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-five}} {{#rollBetween() attribute-roll-five 2 5}} {{attribute-roll-five}}
        {{/rollBetween() attribute-roll-five 2 5}} {{#rollWasCrit() attribute-roll-five}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-five}}
      </div>
      {{/rollTotal() attribute-die-five 1}} {{#rollTotal() attribute-die-six 1}}
      <div class="template-grid-item template-span-two template-white-dice">
        {{#rollWasFumble() attribute-roll-six}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-six}} {{#rollBetween() attribute-roll-six 2 5}} {{attribute-roll-six}}
        {{/rollBetween() attribute-roll-six 2 5}} {{#rollWasCrit() attribute-roll-six}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-six}}
      </div>
      {{/rollTotal() attribute-die-six 1}} {{#rollTotal() skill-die-five 1}}
      <div class="template-grid-item template-span-three template-maroon-dice">
        {{#rollBetween() skill-roll-five 1 5}} {{skill-roll-five}} {{/rollBetween() skill-roll-five 1 5}}
        {{#rollWasCrit() skill-roll-five}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() skill-roll-five}}
      </div>
      {{/rollTotal() skill-die-five 1}} {{#rollTotal() skill-die-six 1}}
      <div class="template-grid-item template-span-four template-maroon-dice">
        {{#rollBetween() skill-roll-six 1 5}} {{skill-roll-six}} {{/rollBetween() skill-roll-six 1 5}}
        {{#rollWasCrit() skill-roll-six}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() skill-roll-six}}
      </div>
      {{/rollTotal() skill-die-six 1}} {{#rollTotal() gear-die-five 1}}
      <div class="template-grid-item template-span-five template-black-dice">
        {{#rollWasFumble() gear-roll-five}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-five}} {{#rollBetween() gear-roll-five 2 5}} {{gear-roll-five}}
        {{/rollBetween() gear-roll-five 2 5}} {{#rollWasCrit() gear-roll-five}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-five}}
      </div>
      {{/rollTotal() gear-die-five 1}} {{#rollTotal() gear-die-six 1}}
      <div class="template-grid-item template-span-shix template-black-dice">
        {{#rollWasFumble() gear-roll-six}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-six}} {{#rollBetween() gear-roll-six 2 5}} {{gear-roll-six}}
        {{/rollBetween() gear-roll-six 2 5}} {{#rollWasCrit() gear-roll-six}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-six}}
      </div>
      {{/rollTotal() gear-die-six 1}}
      <!--- BEGIN ROW FOUR -->
      {{#rollTotal() attribute-die-seven 1}}
      <div class="template-grid-item template-span-one template-white-dice">
        {{#rollWasFumble() attribute-roll-seven}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-seven}} {{#rollBetween() attribute-roll-seven 2 5}} {{attribute-roll-seven}}
        {{/rollBetween() attribute-roll-seven 2 5}} {{#rollWasCrit() attribute-roll-seven}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-seven}}
      </div>
      {{/rollTotal() attribute-die-seven 1}} {{#rollTotal() attribute-die-eight 1}}
      <div class="template-grid-item template-span-two template-white-dice">
        {{#rollWasFumble() attribute-roll-eight}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-eight}} {{#rollBetween() attribute-roll-eight 2 5}} {{attribute-roll-eight}}
        {{/rollBetween() attribute-roll-eight 2 5}} {{#rollWasCrit() attribute-roll-eight}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-eight}}
      </div>
      {{/rollTotal() attribute-die-eight 1}} {{#rollTotal() skill-die-seven 1}}
      <div class="template-grid-item template-span-three template-maroon-dice">
        {{#rollBetween() skill-roll-seven 1 5}} {{skill-roll-seven}} {{/rollBetween() skill-roll-seven 1 5}}
        {{#rollWasCrit() skill-roll-seven}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() skill-roll-seven}}
      </div>
      {{/rollTotal() skill-die-seven 1}} {{#rollTotal() skill-die-eight 1}}
      <div class="template-grid-item template-span-four template-maroon-dice">
        {{#rollBetween() skill-roll-eight 1 5}} {{skill-roll-eight}} {{/rollBetween() skill-roll-eight 1 5}}
        {{#rollWasCrit() skill-roll-eight}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() skill-roll-eight}}
      </div>
      {{/rollTotal() skill-die-eight 1}} {{#rollTotal() gear-die-seven 1}}
      <div class="template-grid-item template-span-five template-black-dice">
        {{#rollWasFumble() gear-roll-seven}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-seven}} {{#rollBetween() gear-roll-seven 2 5}} {{gear-roll-seven}}
        {{/rollBetween() gear-roll-seven 2 5}} {{#rollWasCrit() gear-roll-seven}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-seven}}
      </div>
      {{/rollTotal() gear-die-seven 1}} {{#rollTotal() gear-die-eight 1}}
      <div class="template-grid-item template-span-shix template-black-dice">
        {{#rollWasFumble() gear-roll-eight}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-eight}} {{#rollBetween() gear-roll-eight 2 5}} {{gear-roll-eight}}
        {{/rollBetween() gear-roll-eight 2 5}} {{#rollWasCrit() gear-roll-eight}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-eight}}
      </div>
      {{/rollTotal() gear-die-eight 1}}
      <!--- BEGIN ROW FIVE -->
      {{#rollTotal() attribute-die-nine 1}}
      <div class="template-grid-item template-span-one template-white-dice">
        {{#rollWasFumble() attribute-roll-nine}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-nine}} {{#rollBetween() attribute-roll-nine 2 5}} {{attribute-roll-nine}}
        {{/rollBetween() attribute-roll-nine 2 5}} {{#rollWasCrit() attribute-roll-nine}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-nine}}
      </div>
      {{/rollTotal() attribute-die-nine 1}} {{#rollTotal() attribute-die-ten 1}}
      <div class="template-grid-item template-span-two template-white-dice">
        {{#rollWasFumble() attribute-roll-ten}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-ten}} {{#rollBetween() attribute-roll-ten 2 5}} {{attribute-roll-ten}}
        {{/rollBetween() attribute-roll-ten 2 5}} {{#rollWasCrit() attribute-roll-ten}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-ten}}
      </div>
      {{/rollTotal() attribute-die-ten 1}} {{#rollTotal() skill-die-nine 1}}
      <div class="template-grid-item template-span-three template-maroon-dice">
        {{#rollBetween() skill-roll-nine 1 5}} {{skill-roll-nine}} {{/rollBetween() skill-roll-nine 1 5}}
        {{#rollWasCrit() skill-roll-nine}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() skill-roll-nine}}
      </div>
      {{/rollTotal() skill-die-nine 1}} {{#rollTotal() skill-die-ten 1}}
      <div class="template-grid-item template-span-four template-maroon-dice">
        {{#rollBetween() skill-roll-ten 1 5}} {{skill-roll-ten}} {{/rollBetween() skill-roll-ten 1 5}}
        {{#rollWasCrit() skill-roll-ten}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() skill-roll-ten}}
      </div>
      {{/rollTotal() skill-die-ten 1}} {{#rollTotal() gear-die-nine 1}}
      <div class="template-grid-item template-span-five template-black-dice">
        {{#rollWasFumble() gear-roll-nine}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-nine}} {{#rollBetween() gear-roll-nine 2 5}} {{gear-roll-nine}}
        {{/rollBetween() gear-roll-nine 2 5}} {{#rollWasCrit() gear-roll-nine}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-nine}}
      </div>
      {{/rollTotal() gear-die-nine 1}} {{#rollTotal() gear-die-ten 1}}
      <div class="template-grid-item template-span-shix template-black-dice">
        {{#rollWasFumble() gear-roll-ten}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-ten}} {{#rollBetween() gear-roll-ten 2 5}} {{gear-roll-ten}}
        {{/rollBetween() gear-roll-ten 2 5}} {{#rollWasCrit() gear-roll-ten}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-ten}}
      </div>
      {{/rollTotal() gear-die-ten 1}}
      <!--- BEGIN ROW SIX -->
      {{#rollTotal() attribute-die-eleven 1}}
      <div class="template-grid-item template-span-one template-white-dice">
        {{#rollWasFumble() attribute-roll-eleven}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-eleven}} {{#rollBetween() attribute-roll-eleven 2 5}}
        {{attribute-roll-eleven}} {{/rollBetween() attribute-roll-eleven 2 5}} {{#rollWasCrit() attribute-roll-eleven}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-eleven}}
      </div>
      {{/rollTotal() attribute-die-eleven 1}} {{#rollTotal() attribute-die-twelve 1}}
      <div class="template-grid-item template-span-two template-white-dice">
        {{#rollWasFumble() attribute-roll-twelve}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_black.png" alt="Bane" class="template-bane" />
        {{/rollWasFumble() attribute-roll-twelve}} {{#rollBetween() attribute-roll-twelve 2 5}}
        {{attribute-roll-twelve}} {{/rollBetween() attribute-roll-twelve 2 5}} {{#rollWasCrit() attribute-roll-twelve}}
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_black.png" alt="Success" class="template-success" />
        {{/rollWasCrit() attribute-roll-twelve}}
      </div>
      {{/rollTotal() attribute-die-twelve 1}} {{#rollTotal() gear-die-eleven 1}}
      <div class="template-grid-item template-span-five template-black-dice">
        {{#rollWasFumble() gear-roll-eleven}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-eleven}} {{#rollBetween() gear-roll-eleven 2 5}} {{gear-roll-eleven}}
        {{/rollBetween() gear-roll-eleven 2 5}} {{#rollWasCrit() gear-roll-eleven}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-eleven}}
      </div>
      {{/rollTotal() gear-die-eleven 1}} {{#rollTotal() gear-die-twelve 1}}
      <div class="template-grid-item template-span-shix template-black-dice">
        {{#rollWasFumble() gear-roll-twelve}}
        <span data-i18n-title="bane" title="Bane"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/bane_skull_white.png" alt="Bane" class="template-bane" /></span>
        {{/rollWasFumble() gear-roll-twelve}} {{#rollBetween() gear-roll-twelve 2 5}} {{gear-roll-twelve}}
        {{/rollBetween() gear-roll-twelve 2 5}} {{#rollWasCrit() gear-roll-twelve}}
        <span data-i18n-title="success" title="Success"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Forbidden_Lands/images/success_swords_white.png" alt="Success" class="template-success" /></span>
        {{/rollWasCrit() gear-roll-twelve}}
      </div>
      {{/rollTotal() gear-die-twelve 1}}
      <!--- d66 -->
      <!-- increased range of each d66 dice to allow for custom rolls 0-100-->
      {{#rollTotal() d66-die-one 1}}
      <div class="template-grid-item template-span-three template-maroon-dice">
        {{#rollBetween() d66-roll-one 0 100}} {{d66-roll-one}} {{/rollBetween() d66-roll-one 0 100}}
      </div>
      {{/rollTotal() d66-die-one 1}} {{#rollTotal() d66-die-two 1}}
      <div class="template-grid-item template-span-four template-maroon-dice">
        {{#rollBetween() d66-roll-two 0 100}} {{d66-roll-two}} {{/rollBetween() d66-roll-two 0 100}}
      </div>
      {{/rollTotal() d66-die-two 1}}

      <!--- dice pool column labels in footer-->
      {{#attribute-die-one}}
      <div class="template-grid-item template-span-left">
        <span class="template-smaller sheet-small-caps" data-i18n="base-dice">Base Dice</span>
      </div>
      <div class="template-grid-item template-span-center">
        <span class="template-smaller sheet-small-caps" data-i18n="skill-dice">Skill Dice</span>
      </div>
      <div class="template-grid-item template-span-right">
        <span class="template-smaller sheet-small-caps" data-i18n="gear-dice">Gear Dice</span>
      </div>
      {{/attribute-die-one}}

      <!--- attack -->
      <div class="template-grid-item template-span-six condensed">
        {{#weapon-bonus}}
        <span class="label" data-i18n="bonus">Bonus</span>:&nbsp;{{weapon-bonus}}
        {{/weapon-bonus}}
        {{#weapon-bonus-max}}/{{weapon-bonus-max}}
        {{/weapon-bonus-max}}
        {{#weapon-bonus-misc}} &nbsp;&#177;&nbsp;<span class="label" data-i18n="misc-abbr">Misc</span>:&nbsp;{{weapon-bonus-misc}}
        {{/weapon-bonus-misc}} 
        {{#weapon-damage}}
        <span class="label" data-i18n="damage">Damage</span>:&nbsp;{{weapon-damage}}
        {{/weapon-damage}}
        {{#weapon-damage-misc}}&nbsp;&#177;&nbsp;
        <span class="label" data-i18n="misc-abbr">Misc</span>:&nbsp;{{weapon-damage-misc}}
        {{/weapon-damage-misc}}
        {{#attack-features}}
        <span>( {{attack-features}} )</span>
        {{/attack-features}}

        <div class="template-grid-item template-span-six">{{#weapon-range}}<span class="label"data-i18n="range">Range</span>:&nbsp;{{weapon-range}}
          {{/weapon-range}} 
          {{#weapon-features}}
          <span class="label" data-i18n="features">Features</span>:&nbsp;{{weapon-features}}
          {{/weapon-features}}</div>

        {{#attack-description}}
        <hr class="template-span-six" style="margin: 5px 10px 5px 10px;" />
        <div class="template-grid-item template-span-six scroll-text">
        {{attack-description}}
        </div>
        {{/attack-description}}
      </div>

      <!--- armor/shield -->
      {{#rollTotal() armor-equipped}}
      {{#armor-name}}
      <div class="template-grid-item template-span-six">
        <span><b>{{armor-name}}</b></span>
      </div>
      <div class="template-grid-item template-span-six condensed">
        {{#armor-rating}}<span class="label" data-i18n="armor-rating-abbr">AR</span>:&nbsp;{{armor-rating}}{{/armor-rating}}
        {{#armor-rating-max}}/{{armor-rating-max}}{{/armor-rating-max}}
        {{#armor-rating-misc}}&nbsp;&#177;&nbsp;<span class="label" data-i18n="misc-abbr">Misc</span>:&nbsp;{{armor-rating-misc}}{{/armor-rating-misc}}
        {{#armor-rating-total}}&nbsp;=&nbsp;<span class="label" data-i18n="total">Total</span>:&nbsp;{{armor-rating-total}}{{/armor-rating-total}}
      </div>
      {{/armor-name}}
      {{/rollTotal() armor-equipped}}

      {{#rollTotal() armor1-equipped 1}}
      {{#armor1-name}}
      <div class="template-grid-item template-span-six">
        <span><b>{{armor1-name}}</b></span>
      </div>
      <div class="template-grid-item template-span-six condensed">
        {{#armor1-rating}}<span class="label" data-i18n="armor-rating-abbr">AR</span>:&nbsp;{{armor1-rating}}{{/armor1-rating}}
        {{#armor1-rating-max}}/{{armor1-rating-max}}{{/armor1-rating-max}}
        {{#armor1-rating-misc}}&nbsp;&#177;&nbsp;<span class="label" data-i18n="misc-abbr">Misc</span>:&nbsp;{{armor1-rating-misc}}{{/armor1-rating-misc}}
        {{#armor1-rating-total}}&nbsp;=&nbsp;<span class="label" data-i18n="total">Total</span>:&nbsp;{{armor1-rating-total}}{{/armor1-rating-total}}
      </div>
      {{/armor1-name}}
      {{/rollTotal() armor1-equipped 1}}

      {{#rollTotal() armor2-equipped 1}}
      {{#armor2-name}}
      <div class="template-grid-item template-span-six">
        <span><b>{{armor2-name}}</b></span>
      </div>
      <div class="template-grid-item template-span-six condensed">
        {{#armor2-rating}}<span class="label" data-i18n="armor-rating-abbr">AR</span>:&nbsp;{{armor2-rating}}{{/armor2-rating}}
        {{#armor2-rating-max}}/{{armor2-rating-max}}{{/armor2-rating-max}}
        {{#armor2-rating-misc}}&nbsp;&#177;&nbsp;<span class="label" data-i18n="misc-abbr">Misc</span>:&nbsp;{{armor2-rating-misc}}{{/armor2-rating-misc}}
        {{#armor2-rating-total}}&nbsp;=&nbsp;<span class="label" data-i18n="total">Total</span>:&nbsp;{{armor2-rating-total}}{{/armor2-rating-total}}
      </div>
      {{/armor2-name}}
      {{/rollTotal() armor2-equipped 1}}

      {{#rollTotal() armor3-equipped 1}}
      {{#armor3-name}}
      <div class="template-grid-item template-span-six">
        <span><b>{{armor3-name}}</b></span>
      </div>
      <div class="template-grid-item template-span-six condensed">
        {{#armor3-rating}}<span class="label" data-i18n="armor-rating-abbr">AR</span>:&nbsp;{{armor3-rating}}{{/armor3-rating}}
        {{#armor3-rating-max}}/{{armor3-rating-max}}{{/armor3-rating-max}}
        {{#armor3-rating-misc}}&nbsp;&#177;&nbsp;<span class="label" data-i18n="misc-abbr">Misc</span>:&nbsp;{{armor3-rating-misc}}{{/armor3-rating-misc}}
        {{#armor3-rating-total}}&nbsp;=&nbsp;<span class="label" data-i18n="total">Total</span>:&nbsp;{{armor3-rating-total}}{{/armor3-rating-total}}
      </div>
      {{/armor3-name}}
      {{/rollTotal() armor3-equipped 1}}

      {{#rollTotal() armor4-equipped 1}}
      {{#armor4-name}}
      <div class="template-grid-item template-span-six">
        <span><b>{{armor4-name}}</b></span>
      </div>
      <div class="template-grid-item template-span-six condensed">
        {{#armor4-rating}}<span class="label" data-i18n="armor-rating-abbr">AR</span>:&nbsp;{{armor4-rating}}{{/armor4-rating}}
        {{#armor4-rating-max}}/{{armor4-rating-max}}{{/armor4-rating-max}}
        {{#armor4-rating-misc}}&nbsp;&#177;&nbsp;<span class="label" data-i18n="misc-abbr">Misc</span>:&nbsp;{{armor4-rating-misc}}{{/armor4-rating-misc}}
        {{#armor4-rating-total}}&nbsp;=&nbsp;<span class="label" data-i18n="total">Total</span>:&nbsp;{{armor4-rating-total}}{{/armor4-rating-total}}
      </div>
      {{/armor4-name}}
      {{/rollTotal() armor4-equipped 1}}

      <!--skills-->
      <div class="template-grid-item template-span-six condensed">
        {{#skill-base}}<span class="label" data-i18n="attr-abbr">Attr</span>:&nbsp; {{skill-base}}{{/skill-base}}
        {{#skill-skill}}&nbsp;<span class="label" data-i18n="skill">Skill</span>:&nbsp; {{skill-skill}}{{/skill-skill}}
        {{#skill-bonus-misc-skill}}&nbsp;&#177;&nbsp;<span class="label" data-i18n="misc-abbr">Misc</span>:&nbsp;
        {{skill-bonus-misc-skill}}{{/skill-bonus-misc-skill}} {{#skill-bonus-misc-gear}}&nbsp;&#177;&nbsp;<span class="label" data-i18n="misc-abbr">Misc</span>:&nbsp; {{skill-bonus-misc-gear}}{{/skill-bonus-misc-gear}}
        {{#skill-notes}}
        <hr class="template-span-six" style="margin: 5px 10px 5px 10px;" />
        <div class="template-grid-item template-span-six scroll-text"><span>{{skill-notes}}</span></div>
        {{/skill-notes}}
      </div>

      {{#free-text}}
      <div class="template-grid-item template-span-six free-text scroll-text"><span>{{free-text}}</span></div>
      {{/free-text}}
      {{#footer}}
      <div class="template-grid-item template-span-six template-footer">{{footer}}</div>
      {{/footer}}

      {{#allprops() character_name name character_id name_link subtitle free-text footer attribute-die-one attribute-die-two attribute-die-three attribute-die-four attribute-die-five attribute-die-six attribute-die-seven attribute-die-eight attribute-die-nine attribute-die-ten attribute-die-eleven attribute-die-twelve skill-die-one skill-die-two skill-die-three skill-die-four skill-die-five skill-die-six skill-die-seven skill-die-eight skill-die-nine skill-die-ten negative-die-one negative-die-two negative-die-three gear-die-one gear-die-two gear-die-three gear-die-four gear-die-five gear-die-six gear-die-seven gear-die-eight gear-die-nine gear-die-ten gear-die-eleven gear-die-twelve artifact-die-eight artifact-die-ocho artifact-die-ten artifact-die-twelve attribute-roll-one attribute-roll-two attribute-roll-three attribute-roll-four attribute-roll-five attribute-roll-six attribute-roll-seven attribute-roll-eight attribute-roll-nine attribute-roll-ten attribute-roll-eleven attribute-roll-twelve skill-roll-one skill-roll-two skill-roll-three skill-roll-four skill-roll-five skill-roll-six skill-roll-seven skill-roll-eight skill-roll-nine skill-roll-ten negative-roll-one negative-roll-two negative-roll-three gear-roll-one gear-roll-two gear-roll-three gear-roll-four gear-roll-five gear-roll-six gear-roll-seven gear-roll-eight gear-roll-nine gear-roll-ten gear-roll-eleven gear-roll-twelve artifact-roll-eight artifact-roll-ocho artifact-roll-ten artifact-roll-twelve consumable-die-six consumable-die-eight d66-die-one d66-roll-one d66-die-two d66-roll-two consumable-die-ten consumable-die-twelve consumable-roll-six consumable-roll-eight consumable-roll-ten consumable-roll-twelve push-query weapon-bonus weapon-bonus-max weapon-bonus-misc weapon-damage weapon-damage-misc attack-features weapon-range weapon-features attack-description spell-rank spell-willpower spell-range spell-duration spell-ingredients spell-description willpower-total armor1-equipped armor1-name armor1-rating armor1-rating-max armor1-rating-total armor1-rating-misc armor2-equipped armor2-name armor2-rating armor2-rating-max armor2-rating-misc armor2-rating-total armor3-equipped armor3-name armor3-rating armor3-rating-max armor3-rating-misc armor3-rating-total armor4-equipped armor4-name armor4-rating armor4-rating-max armor4-rating-misc armor4-rating-total shield1-name shield1-base shield1-skill shield1-bonus shield1-bonus-max shield1-bonus-misc skill-base skill-skill skill-bonus-misc-skill skill-bonus-misc-gear skill-notes}}
      <div class="template-grid-item template-span-half">
        <span>**{{key}}**:</span>
      </div>
      <div class="template-grid-item template-span-2nd-half">
        <span>{{value}}</span>
      </div>
      {{/allprops() character_name name character_id name_link subtitle free-text footer attribute-die-one attribute-die-two attribute-die-three attribute-die-four attribute-die-five attribute-die-six attribute-die-seven attribute-die-eight attribute-die-nine attribute-die-ten attribute-die-eleven attribute-die-twelve skill-die-one skill-die-two skill-die-three skill-die-four skill-die-five skill-die-six skill-die-seven skill-die-eight skill-die-nine skill-die-ten negative-die-one negative-die-two negative-die-three gear-die-one gear-die-two gear-die-three gear-die-four gear-die-five gear-die-six gear-die-seven gear-die-eight gear-die-nine gear-die-ten gear-die-eleven gear-die-twelve artifact-die-eight artifact-die-ocho artifact-die-ten artifact-die-twelve attribute-roll-one attribute-roll-two attribute-roll-three attribute-roll-four attribute-roll-five attribute-roll-six attribute-roll-seven attribute-roll-eight attribute-roll-nine attribute-roll-ten attribute-roll-eleven attribute-roll-twelve skill-roll-one skill-roll-two skill-roll-three skill-roll-four skill-roll-five skill-roll-six skill-roll-seven skill-roll-eight skill-roll-nine skill-roll-ten negative-roll-one negative-roll-two negative-roll-three gear-roll-one gear-roll-two gear-roll-three gear-roll-four gear-roll-five gear-roll-six gear-roll-seven gear-roll-eight gear-roll-nine gear-roll-ten gear-roll-eleven gear-roll-twelve artifact-roll-eight artifact-roll-ocho artifact-roll-ten artifact-roll-twelve consumable-die-six consumable-die-eight d66-die-one d66-roll-one d66-die-two d66-roll-two consumable-die-ten consumable-die-twelve consumable-roll-six consumable-roll-eight consumable-roll-ten consumable-roll-twelve push-query weapon-bonus weapon-bonus-max weapon-bonus-misc weapon-damage weapon-damage-misc attack-features weapon-range weapon-features attack-description spell-rank spell-willpower spell-range spell-duration spell-ingredients spell-description willpower-total armor1-equipped armor1-name armor1-rating armor1-rating-max armor1-rating-total armor1-rating-misc armor2-equipped armor2-name armor2-rating armor2-rating-max armor2-rating-misc armor2-rating-total armor3-equipped armor3-name armor3-rating armor3-rating-max armor3-rating-misc armor3-rating-total armor4-equipped armor4-name armor4-rating armor4-rating-max armor4-rating-misc armor4-rating-total shield1-name shield1-base shield1-skill shield1-bonus shield1-bonus-max shield1-bonus-misc skill-base skill-skill skill-bonus-misc-skill skill-bonus-misc-gear skill-notes}}
    </div>
  </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-myz">
  <div class="template-wrap">
      <div class="template-grid">
          <div class="template-grid-item template-span-six template-header">
              {{#character_name}}
              <div class="template-grid-item template-span-left template-header">
              {{#character_id}}[{{character_name}}](https://journal.roll20.net/character/{{character_id}}){{/character_id}}
              {{^character_id}}{{character_name}}{{/character_id}}
              </div>
              {{/character_name}}
              {{#name}}
              <div class="template-grid-item template-span-center template-header">◇</div>
              {{/name}}                
              {{#name}}
              <div class="template-grid-item template-span-right template-header">
              {{#name_link}}[{{name}}]({{name_link}}){{/name_link}}
              {{^name_link}}{{name}}{{/name_link}}
              </div>
              {{/name}}
          </div>
          {{#subtitle}}<div class="template-grid-item template-span-six template-subtitle"><span>{{subtitle}}</span></div>{{/subtitle}}

  <!--- dice pool -->
      {{#base1}}<div class="template-span-one template-base-dice dice">{{base1}}</div>{{/base1}}
      {{#base2}}<div class="template-span-two template-base-dice dice">{{base2}}</div>{{/base2}}
      {{#skill1}}<div class="template-span-three template-skill-dice dice">{{skill1}}</div>{{/skill1}}
      {{#skill2}}<div class="template-span-four template-skill-dice dice">{{skill2}}</div>{{/skill2}}
      {{#negative1}}<div class="template-span-three template-purple-dice dice">{{negative1}}</div>{{/negative1}}
      {{#negative2}}<div class="template-span-four template-purple-dice dice">{{negative2}}</div>{{/negative2}}
      {{#gear1}}<div class="template-span-five template-gear-dice dice">{{gear1}}</div>{{/gear1}}
      {{#gear2}}<div class="template-span-shix template-gear-dice dice">{{gear2}}</div>{{/gear2}}
      <!--- BEGIN ROW TWO --->
      {{#base3}}<div class="template-span-one template-base-dice dice">{{base3}}</div>{{/base3}}
      {{#base4}}<div class="template-span-two template-base-dice dice">{{base4}}</div>{{/base4}}
      {{#skill3}}<div class="template-span-three template-skill-dice dice">{{skill3}}</div>{{/skill3}}
      {{#skill4}}<div class="template-span-four template-skill-dice dice">{{skill4}}</div>{{/skill4}}
      {{#negative3}}<div class="template-span-three template-purple-dice dice">{{negative3}}</div>{{/negative3}}
      {{#gear3}}<div class="template-span-five template-gear-dice dice">{{gear3}}</div>{{/gear3}}
      {{#gear4}}<div class="template-span-shix template-gear-dice dice">{{gear4}}</div>{{/gear4}}
      <!--- BEGIN ROW THREE -->
      {{#base5}}<div class="template-span-one template-base-dice dice">{{base5}}</div>{{/base5}}
      {{#base6}}<div class="template-span-two template-base-dice dice">{{base6}}</div>{{/base6}}
      {{#skill5}}<div class="template-span-three template-skill-dice dice">{{skill5}}</div>{{/skill5}}
      {{#skill6}}<div class="template-span-four template-skill-dice dice">{{skill6}}</div>{{/skill6}}
      {{#gear5}}<div class="template-span-five template-gear-dice dice">{{gear5}}</div>{{/gear5}}
      {{#gear6}}<div class="template-span-shix template-gear-dice dice">{{gear6}}</div>{{/gear6}}
      <!--- BEGIN ROW FOUR -->
      {{#base7}}<div class="template-span-one template-base-dice dice">{{base7}}</div>{{/base7}}
      {{#base8}}<div class="template-span-two template-base-dice dice">{{base8}}</div>{{/base8}}
      {{#skill7}}<div class="template-span-three template-skill-dice dice">{{skill7}}</div>{{/skill7}}
      {{#gear7}}<div class="template-span-five template-gear-dice dice">{{gear7}}</div>{{/gear7}}
      {{#gear8}}<div class="template-span-shix template-gear-dice dice">{{gear8}}</div>{{/gear8}}
      <!--- BEGIN ROW FIVE -->
      {{#base9}}<div class="template-span-one template-base-dice dice">{{base7}}</div>{{/base9}}
      {{#base10}}<div class="template-span-two template-base-dice dice">{{base10}}</div>{{/base10}}
      {{#gear9}}<div class="template-span-five template-gear-dice dice">{{gear9}}</div>{{/gear9}}
      {{#gear10}}<div class="template-span-shix template-gear-dice dice">{{gear10}}</div>{{/gear10}}
      <!--- BEGIN ROW SIX -->
      {{#gear11}}<div class="template-span-five template-gear-dice dice">{{gear11}}</div>{{/gear11}}
      {{#gear12}}<div class="template-span-shix template-gear-dice dice">{{gear12}}</div>{{/gear12}}
      <!-- ROT & MUTATION points -->
      {{#other1}}<div class="template-other-dice dice">{{other1}}</div>{{/other1}}
      {{#other2}}<div class="template-other-dice dice">{{other2}}</div>{{/other2}}
      {{#other3}}<div class="template-other-dice dice">{{other3}}</div>{{/other3}}
      {{#other4}}<div class="template-other-dice dice">{{other4}}</div>{{/other4}}
      {{#other5}}<div class="template-other-dice dice">{{other5}}</div>{{/other5}}
      {{#other6}}<div class="template-other-dice dice">{{other6}}</div>{{/other6}}
      {{#other7}}<div class="template-other-dice dice">{{other7}}</div>{{/other7}}
      {{#other8}}<div class="template-other-dice dice">{{other8}}</div>{{/other8}}
      {{#other9}}<div class="template-other-dice dice">{{other9}}</div>{{/other9}}
      {{#other10}}<div class="template-other-dice dice">{{other10}}</div>{{/other10}}
<!--- dice pool column labels in footer-->            
          {{#attribute-die-one}}
          <div class="template-grid-item template-span-left">
              <span class="template-smaller" data-i18n="attribute-dice dice">Attribute Dice</span>
          </div>
          <div class="template-grid-item template-span-center">
              <span class="template-smaller" data-i18n="skill-dice dice">Skill Dice</span>
          </div>
          <div class="template-grid-item template-span-right">
              <span class="template-smaller" data-i18n="gear-dice dice">Gear Dice</span>
          </div>
          {{/attribute-die-one}}

<!--- attack -->
          {{#weapon-bonus}}{{#weapon-damage}}{{#weapon-range}}
          <div class="template-grid-item template-span-six">
              <span class="label" data-i18n="bonus">Bonus</span>:&nbsp;{{weapon-bonus}}
              <span class="label" data-i18n="damage">Damage</span>:&nbsp;{{weapon-damage}}
              <span class="label" data-i18n="range">Range</span>:&nbsp;{{weapon-range}}
          </div>
          {{/weapon-range}}{{/weapon-damage}}{{/weapon-bonus}}
          {{#weapon-features}}<div class="template-grid-item template-span-six">{{weapon-features}}</div>{{/weapon-features}}
      </div>
  </div>
</rolltemplate>

<script type="text/worker">
  /* beautify preserve:start */

  "use strict";
    
  /* START RACE TYPE UPDATES */
  
    //object reference for Race specific attribute names
  
    //Upate sheet labels when chartype attribute changes
    on("change:chartype", function(eventInfo) {
        
        var character_types = {
            "Mutant":{strength_name:"Strength",
                        agility_name: "Agility",
                        wits_name: "Wits",
                        empathy_name:"Empathy",
                        damage_name: "Damage",
                        fatigue_name: "Fatigue",
                        confusion_name: "Confusion",
                        doubt_name: "Doubt",
                        appearance_name: "Appearance",
                        face_name: "Face",
                        body_name: "Body",
                        clothing_name: "Clothing",
                        skill_name: "Skills",
                        mutation_name: "Mutations",
                        talent_name: "Talents",
                        mutation_points_name: "Mutation Points",
                        role_name:"Role",
                        rank_name: "Rank",
                        endure_name: "Endure",
                        force_name: "Force",
                        fight_name: "Fight",
                        sneak_name: "Sneak",
                        move_name: "Move",
                        shoot_name: "Shoot",
                        scout_name: "Scout",
                        comprehend_name: "Comprehend",
                        know_the_zone_name: "Know the Zone",
                        sense_emotion_name:"Sense Emotion",
                        manipulate_name:"Manipulate",
                        heal_name:"Heal" },
                        
            "Animal":{strength_name:"Strength",
                        agility_name: "Agility",
                        wits_name: "Wits",
                        empathy_name:"Instinct",
                        damage_name: "Damage",
                        fatigue_name: "Fatigue",
                        confusion_name: "Confusion",
                        doubt_name: "Doubt",
                        appearance_name: "Appearance",
                        face_name: "Face",
                        body_name: "Body",
                        clothing_name: "Clothing",
                        skill_name: "Skills",
                        mutation_name: "Animal Powers",
                        talent_name: "Talents",
                        mutation_points_name: "Feral Points",
                        role_name:"Role",
                        rank_name: "Rank",
                        endure_name: "Endure",
                        force_name: "Force",
                        fight_name: "Fight)",
                        sneak_name: "Sneak",
                        move_name: "Move",
                        shoot_name: "Shoot",
                        scout_name: "Scout",
                        comprehend_name: "Comprehend",
                        know_the_zone_name: "Know Nature",
                        sense_emotion_name:"Sense Emotion",
                        manipulate_name:"Dominate",
                        heal_name:"Heal" },
              
            "Robot":{strength_name:"Servos",
                        agility_name: "Stability",
                        wits_name: "Processor",
                        empathy_name:"Network",
                        damage_name: "Damage",
                        fatigue_name: "Damage",
                        confusion_name: "Damage",
                        doubt_name: "Damage",
                        appearance_name: "Chassis Parts",
                        face_name: "Head",
                        body_name: "Torso",
                        clothing_name: "Undercarriage",
                        skill_name: "Programs",
                        mutation_name: "Modules",
                        talent_name: "Secondary Functions",
                        mutation_points_name: "Energy Points",
                        role_name:"Model",
                        rank_name: "Heirarchy",
                        endure_name: "Overload",
                        force_name: "Force",
                        fight_name: "Assault",
                        sneak_name: "Infiltrate",
                        move_name: "Move",
                        shoot_name: "Shoot",
                        scout_name: "Scan",
                        comprehend_name: "Datamine",
                        know_the_zone_name: "Analyze",
                        sense_emotion_name:"Question",
                        manipulate_name:"Interact",
                        heal_name:"Repair" },
              
            "Human":{strength_name:"Strength",
                        agility_name: "Agility",
                        wits_name: "Wits",
                        empathy_name:"Empathy",
                        damage_name: "Damage",
                        fatigue_name: "Fatigue",
                        confusion_name: "Confusion",
                        doubt_name: "Doubt",
                        appearance_name: "Appearance",
                        face_name: "Face",
                        body_name: "Body",
                        clothing_name: "Clothing",
                        skill_name: "Skills",
                        mutation_name: "Abilities",
                        talent_name: "Talents",
                        mutation_points_name: "Power Points",
                        role_name:"Role",
                        rank_name: "Rank",
                        endure_name: "Endure",
                        force_name: "Force",
                        fight_name: "Fight",
                        sneak_name: "Sneak",
                        move_name: "Move",
                        shoot_name: "Shoot",
                        scout_name: "Scout",
                        comprehend_name: "Comprehend",
                        know_the_zone_name: "Know the Zone",
                        sense_emotion_name:"Sense Emotion",
                        manipulate_name:"Manipulate",
                        heal_name:"Heal" },
        };   
        
        getAttrs(["chartype"], function(values) {
                             
            var race_att_names;
            if (_.has(character_types, values.chartype) ) {
              race_att_names = character_types[values.chartype];
            } 
            else {
              race_att_names = character_types["Mutant"];
            }
            setAttrs({strength_name: race_att_names.strength_name});
            setAttrs({agility_name: race_att_names.agility_name});
            setAttrs({wits_name: race_att_names.wits_name});
            setAttrs({empathy_name: race_att_names.empathy_name});
                                    
            setAttrs({damage_name: race_att_names.damage_name});
            setAttrs({fatigue_name: race_att_names.fatigue_name});
            setAttrs({confusion_name: race_att_names.confusion_name});
            setAttrs({doubt_name: race_att_names.doubt_name});
            setAttrs({appearance_name: race_att_names.appearance_name});
            setAttrs({face_name: race_att_names.face_name});
            setAttrs({body_name: race_att_names.body_name});
            setAttrs({clothing_name: race_att_names.clothing_name});
            setAttrs({skill_name: race_att_names.skill_name});
            setAttrs({mutation_name: race_att_names.mutation_name});
            setAttrs({talent_name: race_att_names.talent_name});
            setAttrs({mutation_points_name: race_att_names.mutation_points_name});
            setAttrs({role_name: race_att_names.role_name});
            setAttrs({rank_name: race_att_names.rank_name});
            setAttrs({endure_name: race_att_names.endure_name});
            setAttrs({force_name: race_att_names.force_name});
            setAttrs({fight_name: race_att_names.fight_name});
            setAttrs({sneak_name: race_att_names.sneak_name});
            setAttrs({move_name: race_att_names.move_name});
            setAttrs({shoot_name: race_att_names.shoot_name});
            setAttrs({scout_name: race_att_names.scout_name});
            setAttrs({comprehend_name: race_att_names.comprehend_name});
            setAttrs({know_the_zone_name: race_att_names.know_the_zone_name});
            setAttrs({sense_emotion_name: race_att_names.sense_emotion_name});
            setAttrs({manipulate_name: race_att_names.manipulate_name});
            setAttrs({heal_name: race_att_names.heal_name});
        });
  
        //getAttrs(["chartype","CharacterType"], function(values) {
        //  setAttrs("CharacterType"="chartype");
        //});
    });
  
  /* END RACE TYPE UPDATES */
  
  /* number and log handling */
  const int = (score, on_error = 0) => parseInt(score) || on_error;
  const float = (score, on_error = 0) => parseFloat(score) || on_error;
  const clog = (text, title = "", color = "green", style = "font-size:12px; font-weight:normal;", headerstyle = "font-size:13px; font-weight:bold;") => {
    let titleStyle = `color:${color}; ${headerstyle} text-decoration:underline;`;
    let textStyle = `color:${color}; ${style}`;
    let output = `%c${title} %c${text}`;
    if (title) {
      console.log(output, titleStyle, textStyle);
    } else {
      output = `%c${text}`;
      console.log(output, textStyle);
    }
  };
  
  /* version tracking */
  
  const newAnnouncement = (old_version, new_version, show_announcement) => {
    const setter = {};
    clog(`Current sheet data version: ${old_version}, Sheet code version: ${new_version}`);
  
    if (new_version > old_version) {
      setter.version = new_version;
    }
    if (show_announcement) {
      clog("New Announcements: v" + new_version);
      setter.show_announcements = 1;
    }
    if (setter) {
      setAttrs(setter, { silent: true });
    }
  };
  
  const versionator = (old_version) => {
    // set the sheet version you are upgrading sheet to, 
    //and set show_announcement to 1 if you want to force an announcement to be shown.
    // don't set a code_version; we use the switch below for that.
    let new_version = 1.75;
    let show_announcement = 0;
    if (!old_version) old_version = 0;
    switch (true) {
      //add checks for updates here
      case old_version < 1.71:
        clog("updating to version 1.71");
        update_to_1_71(old_version);
        break;
      default:
        // if reach this, all codeversion upgrades are complete
        // can run your recalculate function to show announcements
        newAnnouncement(old_version, new_version, show_announcement);
    }
  };
  //add updates here
  
  //rename misspelled attributes
  const update_to_1_71 = (old_version) => {
    getAttrs(["armor1_equiped", "armor2_equiped", "shield1_equiped", "stockpile_vegatables"], (v) => {
      const setter = {};
  
      const statswaps = {
        armor1_equiped: "armor1_equipped",
        armor2_equiped: "armor2_equipped",
        shield1_equiped: "shield1_equipped",
        stockpile_vegatables: "stockpile_vegetables",
      };
  
      Object.entries(statswaps).forEach(([key, value]) => {
        if (v[key]) setter[key] = v[value];
      });
  
  /*** UPDATE THIS ***/
  // MUST set the version to a specific value here, the one where the sheet was updated like this.  
      const current_version = 1.75;
      setter.version = current_version;
  
      setAttrs(setter, { silent: true }, versionator(current_version));
      clog("updating misspelled attributes");
    });
  };
  
  on("sheet:opened", () => {
    getAttrs(["version"], (v) => {
      versionator(float(v.version));
    });
  });
  
  
  /* ===== PARAMETERS ==========
  GiGs 'Super Simple Summarizer'
  */
  const repeatingSum = (destination, section, fields, multiplier = 1) => {
    if (!Array.isArray(fields)) fields = [fields];
    getSectionIDs(`repeating_${section}`, (idArray) => {
      const attrArray = idArray.reduce((m, id) => [...m, ...fields.map((field) => `repeating_${section}_${id}_${field}`)], []);
      getAttrs(attrArray, (v) => {
        clog("values of v: " + JSON.stringify(v));
        // getValue: if not a number, returns 1 if it is 'on' (checkbox), otherwise returns 0..
        const getValue = (section, id, field) => float(v[`repeating_${section}_${id}_${field}`]) || (v[`repeating_${section}_${id}_${field}`] === "on" ? 1 : 0);
  
        const sumTotal = idArray.reduce((total, id) => total + fields.reduce((subtotal, field) => subtotal * getValue(section, id, field), 1), 0);
        setAttrs({
          [destination]: sumTotal * multiplier,
        });
      });
    });
  };
  
  /* hireling cost */
  on("change:repeating_hirelings remove:repeating_hirelings sheet:opened", function () {
    clog("Change Detected: Hirelings");
    repeatingSum("hirelings_cost", "hirelings", ["hireling_number", "hireling_salary"]);
  });
  
  /* character encumbrance */
  on("change:repeating_gear remove:repeating_gear sheet:opened", function () {
    clog("Change Detected: Character Gear Encumbrance");
    repeatingSum("gear_encumbrance", "gear", ["gear_weight", "gear_qty", "gear_carried"]);
  });
  
  /* vehicle encumbrance */
  on("change:repeating_vehiclegear remove:repeating_vehiclegear sheet:opened", function () {
    clog("Change Detected: Vehicle Gear Encumbrance");
    repeatingSum("vehiclegear_encumbrance", "vehiclegear", ["vehiclegear_weight", "vehiclegear_qty", "vehiclegear_carried"]);
  });
  
  /* weapons encumbrance */
  on("change:repeating_weapons remove:repeating_weapons sheet:opened", function () {
    clog("Change Detected: Character Weapons Encumbrance");
    repeatingSum("weapons_encumbrance", "weapons", ["weapon_weight", "weapon_carried"]);
  });
  
  /* armor encumbrance */
  on("change:repeating_armor remove:repeating_armor sheet:opened", function () {
    clog("Change Detected: Character Armor Encumbrance");
    repeatingSum("armor_encumbrance", "armor", ["armor_weight", "armor_carried"]);
  });
  
  /* armor rating */
  on("change:repeating_armor remove:repeating_armor sheet:opened", function () {
    clog("Change Detected: Character Armor Rating");
    repeatingSum("ar_total", "armor", ["armor_ar", "armor_equipped"]);
  });
  
  /* total encumbrance */
  on("sheet:opened change:gear_encumbrance change:vehiclegear_encumbrance change:weapons_encumbrance change:armor_encumbrance change:food change:water change:bullets", function () {
    getAttrs(["gear_encumbrance", "vehiclegear_encumbrance", "weapons_encumbrance", "armor_encumbrance", "food", "water", "bullets"], function (values) {      clog("Change Detected: Character Encumbrance");

      const gear_encumbrance = float(values["gear_encumbrance"]),
        vehiclegear_encumbrance = float(values["vehiclegear_encumbrance"]),
        weapons_encumbrance = float(values["weapons_encumbrance"]),
        armor_encumbrance = float(values["armor_encumbrance"]),
        food = float(values["food"]),
        water = float(values["water"]),
        bullets = float(values["bullets"]),
        consumables_enc = (food * 0.25) + (water * 0.25),
        bullets_enc = bullets <= 10 ? 0 : (bullets <= 20 ? 0.5 : (bullets <= 40 ? 1 : 2)),
        consumables_encumbrance = consumables_enc + bullets_enc, 
        sum_character_encumbrance = gear_encumbrance + weapons_encumbrance + armor_encumbrance + consumables_encumbrance,
        sum_vehicle_encumbrance = vehiclegear_encumbrance;
      setAttrs({
        weapons_encumbrance: weapons_encumbrance,
        armor_encumbrance: armor_encumbrance,
        character_encumbrance: sum_character_encumbrance,
        consumables_encumbrance: consumables_encumbrance,
        vehicle_encumbrance: sum_vehicle_encumbrance,
      });
    });
  });
 
  /* total vehicle encumbrance */
  on("sheet:opened change:vehicle_advancedencumbrance change:vehiclegear_encumbrance change:vehicle_occupants change:vehicle_seats change:vehicle_fuel change:vehicle_fuel_cap change:vehicle_maxload", function () { 
   getAttrs(["vehicle_advancedencumbrance", "vehiclegear_total", "vehicle_carry", "vehiclegear_encumbrance", "vehicle_occupants", "vehicle_occupants_weight", "vehicle_seats", "vehicle_fuel", "vehicle_fuel_cap", "vehicle_fuel_weight", "vehicle_maxload", "vehicle_overencumbered"], function (values) {
      clog("Change Detected: Vehicle Encumbrance");
      const adv = int(values["vehicle_advancedencumbrance"]),
        gear = float(values["vehiclegear_encumbrance"]),
        occupants = int(values["vehicle_occupants"]),
        seats = int(values["vehicle_seats"]),
        fuel_cap = int(values["vehicle_fuel_cap"]),
        fuel_in = float(values["vehicle_fuel"]),
        fuel = fuel_in > fuel_cap ? fuel_cap : fuel_in,
        fuel_wght = (adv > 0) ? fuel * 2 : 0, // If Adv, A unit of fuel weighs 2 units
        maxload = int(values["vehicle_maxload"]),
        carry = (adv > 0) ? maxload + (seats * 10) + (fuel_cap * 2) : maxload, // If Adv, Adjusted to accommodate poccupants and fuel
        occupants_wght = (adv > 0) ? occupants * 10 : 0, // If Adv, A person weighs 10 units
        total = gear + fuel_wght + occupants_wght,
        overencumbered = (carry - total) < 0 ? 1 : 0;
      setAttrs({
        vehiclegear_encumbrance: gear,
        vehicle_fuel_weight: fuel_wght,
        vehicle_occupants_weight: occupants_wght,
        vehiclegear_total: total,
        vehicle_carry: carry,
        vehicle_overencumbered: overencumbered,
      });
    });
  });
  
  /* Credits total */
  on("sheet:opened change:credits change:credits_vehicle change:credits_stash", function () {
    getAttrs(["credits", "credits_vehicle", "credits_stash"], function (values) {
      clog("Change Detected: Credits Total");
      const credits = float(values["credits"]),
        credits_vehicle = float(values["credits_vehicle"]),
        credits_stash = float(values["credits_stash"]),
        sum_credits = credits + credits_vehicle + credits_stash;
      setAttrs({
        credits_total: sum_credits,
      });
    });
  });
  
  /* Monster or PC Strength handling. updates attr_strength depending on sheet tab*/
  on("change:tab change:strength_pc change:strength_monster sheet:opened", () => {
    getAttrs(["tab", "strength", "strength_pc", "strength_monster"], (v) => {
      const settings = {},
        tab = int(v.tab, 1), // sets tab to 1 if not recognized - so goes to pc tab;
        str = int(v.strength);
      let pc = int(v.strength_pc),
        monster = int(v.strength_monster),
        forceupdate = 0;
  
      // check if character existed before strength_pc or _monster stats were introduced.
      if (str > 0) {
        if (0 === pc || 0 === monster) forceupdate = 1;
        if (0 === pc) {
          pc = str;
          settings.strength_pc = str;
        }
        if (0 === monster) {
          monster = str;
          settings.strength_monster = str;
        }
      }
      // if tab is not pc or monster, end the function and leave strength unchanged
      if (tab !== 1 && tab !== 3 && !forceupdate) return;
  
      // if tab = 1 or 3, set strength to the appropriate value
      settings.strength = tab === 3 ? monster : pc;
  
      setAttrs(settings);
    });
  });
  
  /* ability damage calcs */
  const damages = {
    // an Object Literal: damages['strength'] returns 'damage', damages['empathy'] returns 'doubt', etc
    strength: "damage",
    agility: "fatigue",
    wits: "confusion",
    empathy: "doubt",
  };
  Object.keys(damages).forEach((stat) => {
    // creates a sheet worker for each stat in damages - first stat = 'strength', then stat = 'agility', etc
    // in each worker, stat = the stat (strength, agility, etc) and damages[stat] = the associated damage ('damage'. 'fatigue', etc)
    on(`change:${stat} change:${damages[stat]}`, function () {
      clog(`${stat} or ${damages[stat]} has changed.`);
      getAttrs([stat, damages[stat]], (values) => {
        const stat_score = int(values[stat]),
          damage_score = int(values[damages[stat]]);
        setAttrs({
          [stat + "_total"]: Math.max(0, stat_score - damage_score),
          //Math.max returns the highest value from a comma separated list - it's just like roll20's kh1 dice function.
          // so you don't need the if( value > 0) test. With math.max, if the value is below 0, it becomes 0.
        });
      });
    });
  });
  
  /*** UPDATE ***/
  /* skill total calcs */
  const attributes = {
      // a javascript Object Literal, containing each skill, and its corresponding attribute
      endure: "strength_total",
      heal: "empathy_total",
      comprehend: "wits_total",
      manipulate: "empathy_total",
      shoot: "agility_total",
      fight: "strength_total",
      force: "strength_total",
      Move: "agility_total",
      sense_emotion: "empathy_total",
      scout: "wits_total",
      "Know the Zone": "wits",
      sneak: "agility_total",
    },
    misc = {
      // a javascript Object Literal, containing each skill, and its corresponding attribute
      endure: "endure_skill_misc",
      heal: "heal_skill_misc",
      comprehend: "comprehend_skill_misc",
      manipulate: "manipulate_skill_misc",
      shoot: "shoot_skill_misc",
      fight: "fight_skill_misc",
      force: "force_skill_misc",
      Move: "move_skill_misc",
      sense_emotion: "sense_emotion_skill_misc",
      scout: "scout_skill_misc",
      "Know the Zone": "know_the_zone_skill_misc",
      sneak: "sneak_skill_misc",
    },
    miscGear = {
      // a javascript Object Literal, containing each skill, and its corresponding attribute
      endure: "endure_gear_misc",
      heal: "heal_gear_misc",
      comprehend: "comprehend_gear_misc",
      manipulate: "manipulate_gear_misc",
      shoot: "shoot_gear_misc",
      fight: "fight_gear_misc",
      force: "force_gear_misc",
      Move: "move_gear_misc",
      sense_emotion: "sense_emotion_gear_misc",
      scout: "scout_gear_misc",
      "Know the Zone": "know_the_zone_gear_misc",
      sneak: "sneak_gear_misc",
    },
    getSkill = (label) => label.split(" ").join("_").toLowerCase(),
    // a function to change (for example) "Know the Zone" to "know_the_zone"
    // needed for a couple of functions below
  
    getSkillKey = (label) => label.split(" ").join("-").toLowerCase();
    // a function to change (for example) "Know the Zone" to "know-the-zone"
    // needed for a couple of functions below
  
  Object.keys(attributes).forEach((skill_name) => {
    // creates a sheet worker for each skill in attributes - first skill = 'strength', then stat = 'agility', etc
    // in each worker, stat = the stat (strength, agility, etc) and damages[stat] = the associated damage ('damage'. 'fatigue', etc)
    const skill = getSkill(skill_name);
    on(`change:${skill} change:${attributes[skill_name]} change:${misc[skill_name]} change:${miscGear[skill_name]}`, function () {
      clog(`${skill} or ${attributes[skill_name]} or ${misc[skill_name]} or ${miscGear[skill_name]} has changed.`);
      getAttrs([skill, attributes[skill_name], misc[skill_name], miscGear[skill_name]], function (values) {
        const stat_score = int(values[attributes[skill_name]]),
          miscSkill_score = int(values[misc[skill_name]]),
          miscGear_score = int(values[miscGear[skill_name]]),
          skillRank_score = int(values[skill]);
        setAttrs({
          [skill + "_total"]: stat_score + skillRank_score + miscSkill_score + miscGear_score,
        });
      });
    });
  });
   
    
  /* set profession skill base and skill total FIX courtesy of GiGs*/
  on('sheet:opened change:repeating_pskills:pskill_name change:repeating_pskills:pskill_attr change:repeating_pskills:pskill_level change:repeating_pskills:pskill_misc change:repeating_pskills:pskill_gear change:strength_total change:agility_total change:wits_total change:empathy_total', function () {
    clog('Change Detected: Profession Skill - recalculating Base & Skill totals');
    getSectionIDs('repeating_pskills', idarray => {
      const fields = [];
      idarray.forEach(id => fields.push(
        `repeating_pskills_${id}_pskill_name`,
        `repeating_pskills_${id}_pskill_attr`, 
        `repeating_pskills_${id}_pskill_base`, 
        `repeating_pskills_${id}_pskill_level`, 
        `repeating_pskills_${id}_pskill_misc`, 
        `repeating_pskills_${id}_pskill_gear`, 
        `repeating_pskills_${id}_pskill_total`
      ));
      // made the change event specific, so its only fired when needed, and likewise reduced the getAttrs to those only needed
      getAttrs([...fields, 'strength_total', 'agility_total', 'wits_total', 'empathy_total'], function (values) {
        const output = {};
        idarray.forEach(id => {
          const name = values[`repeating_pskills_${id}_pskill_name`];
          const attr = values[`repeating_pskills_${id}_pskill_attr`];
          const pskill_skill = int(values[`repeating_pskills_${id}_pskill_level`]);
          const pskill_misc = int(values[`repeating_pskills_${id}_pskill_misc`]);
          const pskill_gear = int(values[`repeating_pskills_${id}_pskill_gear`]);
          // separate out the basic values read from the sheet from those calculated within the worker. for clarity
          const pskill_base = values[`${attr}_total`] || 0;
          const pskill_total = pskill_base + pskill_skill + pskill_misc + pskill_gear;
          output[`repeating_pskills_${id}_pskill_base`] = pskill_base;
          output[`repeating_pskills_${id}_pskill_total`] = pskill_total;
          clog('pskill_name: ' + name);
          clog('pskill_base: ' + pskill_base);
          clog('weapon_skill_total: ' + pskill_total);
        });              
      setAttrs(output);
      });
    });
  });

  /* set repeating armor rating */
  on("change:repeating_armor:armor_bonus change:repeating_armor:armor_bonus_max change:repeating_armor:armor_bonus_misc", function () {
    clog("Change Detected: Repeating Armor Bonus - recalculating Bonus totals");
    // made the change event specific, so its only fired when needed, and likewise reduced the getAttrs to those only needed
    getAttrs(["repeating_armor_armor_bonus", "repeating_armor_armor_bonus_misc", "repeating_armor_armor_bonus_max", "repeating_armor_armor_ar"], function (values) {
      const armor_bonus_misc = int(values.repeating_armor_armor_bonus_misc),
      armor_bonus = int(values.repeating_armor_armor_bonus),
      armor_bonus_max = int(values.repeating_armor_armor_bonus_max);
      // separate out the basic values read from the sheet from those calculated within the worker
      const armor_ar = Math.min(armor_bonus, armor_bonus_max) + armor_bonus_misc;
      clog("armor calculation: armor_bonus " + armor_bonus + " armor_bonus_misc " + armor_bonus_misc + " = armor_bonus_total " +armor_ar);
      setAttrs({
        repeating_armor_armor_ar: armor_ar,
      });
      clog("armor_rating: " + armor_ar);
    });
  });
  
  /* set weapon base_total and skill_total */
  on("change:repeating_weapons:weapon_name change:repeating_weapons:weapon_skill change:repeating_weapons:weapon_skill_misc", function () {
    clog("Change Detected: Weapon Attacks - recalculating Base & Skill totals");
    // made the change event specific, so its only fired when needed, and likewise reduced the getAttrs to those only needed
    getAttrs(["repeating_weapons_weapon_skill", "repeating_weapons_weapon_skill_value", "repeating_weapons_weapon_skill_misc", "repeating_weapons_weapon_skill_total", "repeating_weapons_weapon_base_total", "strength_total", "agility_total", "shoot", "fight"], function (values) {
      const strength = int(values.strength_total),
        agility = int(values.agility_total),
        fight = int(values.fight),
        shoot = int(values.shoot),
        weapon_skill = int(values.repeating_weapons_weapon_skill),
        weapon_skill_misc = int(values.repeating_weapons_weapon_skill_misc);
      // separate out the basic values read from the sheet from those calculated within the worker. for clarity
      const attribute = weapon_skill === 0 ? strength : agility,
        skill = weapon_skill === 0 ? fight : shoot,
        weapon_base_total = attribute,
        weapon_skill_value = skill,
        weapon_skill_total = skill + weapon_skill_misc;
      setAttrs({
        repeating_weapons_weapon_base_total: weapon_base_total,
        repeating_weapons_weapon_skill_value: weapon_skill_value,
        repeating_weapons_weapon_skill_total: weapon_skill_total,
      });
      clog("weapon_base_total: " + weapon_base_total);
      clog("weapon_skill_value: " + weapon_skill_value);
      clog("weapon_skill_total: " + weapon_skill_total);
    });
  });
  
  /* set weapon bonus_total */  
  on("repeating_weapons:weapon_name change:repeating_weapons:weapon_bonus change:repeating_weapons:weapon_bonus_misc  change:repeating_weapons:weapon_bonus_max", function () {
    clog("Change Detected: Weapon Attacks - recalculating Bonus totals");
    // made the change event specific, so its only fired when needed, and likewise reduced the getAttrs to those only needed
    getAttrs(["repeating_weapons_weapon_bonus", "repeating_weapons_weapon_bonus_misc", "repeating_weapons_weapon_bonus_max"], function (values) {
      const weapon_bonus_misc = int(values.repeating_weapons_weapon_bonus_misc),
        weapon_bonus = int(values.repeating_weapons_weapon_bonus),
        weapon_bonus_max = int(values.repeating_weapons_weapon_bonus_max);
      // separate out the basic values read from the sheet from those calculated within the worker
      const weapon_bonus_total = Math.min(weapon_bonus, weapon_bonus_max) + weapon_bonus_misc;
      setAttrs({
        repeating_weapons_weapon_bonus_total: weapon_bonus_total,
      });
      clog("weapon_bonus_total: " + weapon_bonus_total);
    });
  });
  
  /* set weapon damage totals */
  on("change:repeating_weapons:weapon_damage change:repeating_weapons:weapon_damage_misc", function () {
    clog("Change Detected: Weapon Damage - recalculating totals");
    getAttrs(["repeating_weapons_weapon_damage", "repeating_weapons_weapon_damage_misc"], function (values) {
      const weapon_damage = int(values.repeating_weapons_weapon_damage),
        weapon_damage_misc = int(values.repeating_weapons_weapon_damage_misc),
        damage = Math.max(weapon_damage + weapon_damage_misc, 0);
      setAttrs({
        repeating_weapons_weapon_damage_total: damage,
      });
      clog(">>>> weapon_damage_total: " + damage);
    });
  });
  
  /* re-calculate repeating_weapons when outside attributes change */
  on("change:strength_total change:agility_total change:fight change:shoot", function () {
    getSectionIDs("repeating_weapons", function (ids) {
      const fieldnames = [];
      ids.forEach((id) => {
        fieldnames.push(`repeating_weapons_${id}_weapon_skill`, `repeating_weapons_${id}_weapon_skill_misc`, `repeating_weapons_${id}_weapon_skill_value`, `repeating_weapons_${id}_weapon_bonus`, `repeating_weapons_${id}_weapon_bonus_max`, `repeating_weapons_${id}_weapon_bonus_misc`);
      });
      getAttrs(["strength_total", "agility_total", "fight", "shoot", ...fieldnames], function (values) {
        const settings = {};
        const strength = int(values.strength_total),
          agility = int(values.agility_total),
          fight = int(values.fight),
          shoot = int(values.shoot);
  
        ids.forEach((id) => {
          const weapon_skill = int(values[`repeating_weapons_${id}_weapon_skill`]),
            // calculate attribute total
            attribute = weapon_skill === 0 ? strength : agility,
            weapon_base_total = attribute;
          // calculate skill total
          const weapon_skill_misc = int(values[`repeating_weapons_${id}_weapon_skill_misc`]),
            skill = weapon_skill === 0 ? fight : shoot,
            weapon_skill_total = skill + weapon_skill_misc;
          //calculate bonus total
          const weapon_bonus = int(values[`repeating_weapons_${id}_weapon_bonus`]),
            weapon_bonus_max = int(values[`repeating_weapons_${id}_weapon_bonus_max`]),
            weapon_bonus_misc = int(values[`repeating_weapons_${id}_weapon_bonus_misc`]),
            weapon_bonus_total = Math.min(weapon_bonus, weapon_bonus_max) + weapon_bonus_misc;
          // no need to calculate damage total, its not affected by external factors
          settings[`repeating_weapons_${id}_weapon_base_total`] = weapon_base_total;
          settings[`repeating_weapons_${id}_weapon_skill_value`] = skill;
          settings[`repeating_weapons_${id}_weapon_skill_total`] = weapon_skill_total;
          settings[`repeating_weapons_${id}_weapon_bonus_total`] = weapon_bonus_total;
        });
        setAttrs(settings, { silent: true });
      });
    });
  });
  
  /* Monster strength-based skill total calcs */
  const monster_attributes = {
    "crafting monster": "crafting_monster",
    "endure monster": "endure_monster",
    "fight monster": "fight_monster",
    "force monster": "force_monster",
  };
  const monster_misc = {
      "crafting monster": "crafting_skill_misc_monster",
      "endure monster": "endure_skill_misc_monster",
      "fight monster": "fight_skill_misc_monster",
      "force monster": "force_skill_misc_monster",
    },
    monster_miscGear = {
      "crafting monster": "crafting_gear_misc_monster",
      "endure monster": "endure_gear_misc_monster",
      "fight monster": "fight_gear_misc_monster",
      "force monster": "force_gear_misc_monster",
    };
  
  Object.keys(monster_attributes).forEach((skill_name) => {
    const monster_skill = getSkill(skill_name);
    on(`change:${monster_skill} change:${monster_attributes[skill_name]} change:${monster_misc[skill_name]} change:${monster_miscGear[skill_name]}`, function () {
      clog(`${monster_skill} or ${monster_attributes[skill_name]} or ${monster_misc[skill_name]} or ${monster_miscGear[skill_name]} has changed.`);
      getAttrs([monster_skill, monster_attributes[skill_name], monster_misc[skill_name], monster_miscGear[skill_name]], function (values) {
        const stat_score = int(values[monster_attributes[skill_name]]),
          miscSkill_score = int(values[monster_misc[skill_name]]),
          miscGear_score = int(values[monster_miscGear[skill_name]]);
        setAttrs({
          [monster_skill + "_total"]: stat_score + miscSkill_score + miscGear_score,
        });
      });
    });
  });
  
  /* Wes's Dice Pool */
  const pools = {
    attribute: {
      max: 12,
      negative: 0,
    },
    skill: {
      max: 10,
      negative: 3,
    },
    gear: {
      max: 12,
      negative: 0,
    },
  };
  // need to know the max pool size for each type, and whether negative dice should be in the pool.
  const numbers = ["", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten", "eleven", "twelve"];
  // need to convert numbers 1-12 to text. left index 0 empty, as its not needed.
  Object.keys(pools).forEach((which) => {
    on(`change:${which}`, function () {
      getAttrs([which], function (values) {
        let score = Math.min(pools[which].max, int(values[which]));
        const settings = {};
        // loop through numbers from 1 to the pool's max, and enter a value of 1 if less < pool value, or 0 otherwise.
        for (let d = 1; d <= pools[which].max; d++) {
          // pools[which].max gets the max value from the pools object.
          settings[`${which}_die_${numbers[d]}`] = d <= score ? 1 : 0;
          // `${which}_die_${numbers[d]}` creates a name like 'gear_die_three'
          //  (d <= score) ? 1 : 0; checks current index and assigns value of 1 if less than equal to pool score
          // settings[attribute] = value stores the appropriate attribute names and values
        }
        // need to check negative dice, and compare score
        // negative dice are set to zero. They are set to 1 only if pool.negative > 0, score is below zero, and absolute value of score is below 1-3.
        for (let n = 1; n <= 3; n++) {
          settings[`negative_die_${numbers[n]}`] = pools[which].negative && score < 0 && n <= Math.abs(score) ? 1 : 0;
  
          clog("Negative dice are being evaluated. |pools.negative value=" + pools[which].negative + " |Skill score=" + score + " |n=" + n + " |abs of score=" + Math.abs(score) + " |include negative die=" + settings[`negative_die_${numbers[n]}`]);
        }
        setAttrs(settings);
      });
    });
  });
  
  const dicePoolButtons = (which) => {
    clog(`Change Detected: Dice Pool ${which} - button clicked`);
    getAttrs([attributes[which], misc[which], miscGear[which], getSkill(which), getSkillKey(which), getSkill(which) + "_notes"], function (
      values
    ) {
      // attributes[which] returns the attribute; e.g attributes['sneak'] gives 'agility_total'
      // getSkill(which) converts the skill name to a valid attribute string: getSkill('Animal Handling') gives 'animal_handling'
      const stat = int(values[attributes[which]]),
        miscSkill_score = Math.max(int(values[misc[which]]), -3),
        miscGear_score = int(values[miscGear[which]]),
        // stat here first gets attributes['sneak'] which will be, say, 'agility_total' and
        //  then values['ability_total'] gives you the score from the character sheet.
        skill_attribute_selected = stat > 0 ? stat : 0,
        skill_bonus_misc_selected = miscSkill_score,
        skill_bonus_misc_gear_selected = miscGear_score,
        skill_only_selected = int(values[getSkill(which)]),
        skill_notes_selected = values[getSkill(which) + "_notes"];
      // used to set the proper translation key
      let whichKey = getTranslationByKey(getSkillKey(which));
  
      setAttrs({
        attribute: stat > 0 ? stat : 0, // this is a Ternary Operator, it starts with a question (e.g. is stat > 0)
        // and if true, returns the bit after the ? and if false returns the bit after the :
        // you can often replace simple if/then expressions with a single line ternary operator.
        // uses the translation key
        gear: miscGear_score,
        skill: int(values[getSkill(which)]) + miscSkill_score,
        skill_attribute_selected: skill_attribute_selected,
        skill_bonus_misc_selected: skill_bonus_misc_selected,
        skill_bonus_misc_gear_selected: skill_bonus_misc_gear_selected,
        skill_only_selected: skill_only_selected,
        skill_notes_selected: skill_notes_selected,
        current_preset: whichKey,
        include_with_roll: `{{skill-base=${skill_attribute_selected}}} {{skill-skill=${skill_only_selected}}} {{skill-bonus-misc-skill=${skill_bonus_misc_selected}}} {{skill-bonus-misc-gear=${skill_bonus_misc_gear_selected}}} {{skill-notes=${skill_notes_selected}}}`,
      });
    });
  };
  
  Object.keys(attributes).forEach((skill) => {
    on(`clicked:dice_pool_${getSkill(skill)}`, () => dicePoolButtons(skill));
  });
  
  /* Monster strength-based skill dice pool */
  const monster_dicePoolButtons = (which) => {
    clog(`Change Detected: Dice Pool ${which} - button clicked`);
    getAttrs([monster_attributes[which], monster_misc[which], monster_miscGear[which], getSkill(which), getSkillKey(which)], function (values) {
      const stat = int(values[monster_attributes[which]]),
        miscSkill_score = Math.max(int(values[monster_misc[which]]), -3),
        miscGear_score = int(values[monster_miscGear[which]]);
      let whichKey = getTranslationByKey(getSkillKey(which));
      setAttrs({
        attribute: stat > 0 ? stat : 0,
        gear: miscGear_score,
        skill: miscSkill_score,
        current_preset: whichKey,
        include_with_roll: "",
      });
    });
  };
  
  Object.keys(monster_attributes).forEach((monster_skill) => {
    on(`clicked:dice_pool_${getSkill(monster_skill)}`, () => monster_dicePoolButtons(monster_skill));
  });
  
  on("sheet:opened clicked:dice_pool_clear", function () {
    clog("Change Detected: Clear Dice Pool - button clicked or sheet loaded");
    setAttrs({
      attribute: 0,
      skill: 0,
      gear: 0,
      attribute_die_twelve: 0,
      attribute_die_eleven: 0,
      attribute_die_ten: 0,
      attribute_die_nine: 0,
      attribute_die_eight: 0,
      attribute_die_seven: 0,
      attribute_die_six: 0,
      attribute_die_five: 0,
      attribute_die_four: 0,
      attribute_die_three: 0,
      attribute_die_two: 0,
      attribute_die_one: 0,
      negative_die_one: 0,
      negative_die_two: 0,
      negative_die_three: 0,
      skill_die_ten: 0,
      skill_die_nine: 0,
      skill_die_eight: 0,
      skill_die_seven: 0,
      skill_die_six: 0,
      skill_die_five: 0,
      skill_die_four: 0,
      skill_die_three: 0,
      skill_die_two: 0,
      skill_die_one: 0,
      gear_die_twelve: 0,
      gear_die_eleven: 0,
      gear_die_ten: 0,
      gear_die_nine: 0,
      gear_die_eight: 0,
      gear_die_seven: 0,
      gear_die_six: 0,
      gear_die_five: 0,
      gear_die_four: 0,
      gear_die_three: 0,
      gear_die_two: 0,
      gear_die_one: 0,
      current_preset: getTranslationByKey(`custom-roll`),
      include_with_roll: "",
    });
  });
  
  /* api dice toggle */
  on("clicked:api_dice_toggle", function () {
    clog("Change Detected: API Dice Toggle - button clicked");
    getAttrs(["api_toggle"], function (values) {
      const api_toggle = int(values.api_toggle);
      let buttonState = api_toggle;
  
      if (buttonState !== 0) {
        buttonState = 0;
      } else {
        buttonState = 1;
      }
      setAttrs({
        api_toggle: buttonState,
      });
    });
  });
  
  /* set weapon dice pool */
  on("clicked:repeating_weapons:attack-roll", function () {
    clog("Change Detected: Weapon Attack - button clicked");
    getAttrs( ["repeating_weapons_weapon_name", "repeating_weapons_weapon_skill", "repeating_weapons_weapon_base_total", "repeating_weapons_weapon_skill_misc", "repeating_weapons_weapon_skill_total", "repeating_weapons_weapon_bonus", "repeating_weapons_weapon_bonus_max", "repeating_weapons_weapon_bonus_misc", "repeating_weapons_weapon_bonus_total", "repeating_weapons_weapon_damage", "repeating_weapons_weapon_damage_misc", "repeating_weapons_weapon_damage_total", "repeating_weapons_weapon_range", "repeating_weapons_weapon_features", "strength_total", "agility_total", "shoot", "fight", ],
      function (values) {
        const weapon_name = values.repeating_weapons_weapon_name,
          weapon_base_total = int(values.repeating_weapons_weapon_base_total),
          weapon_bonus = int(values.repeating_weapons_weapon_bonus),
          weapon_bonus_misc = int(values.repeating_weapons_weapon_bonus_misc),
          weapon_bonus_max = int(values.repeating_weapons_weapon_bonus_max),
          weapon_bonus_total = int(values.repeating_weapons_weapon_bonus_total),
          weapon_skill_total = int(values.repeating_weapons_weapon_skill_total),
          weapon_damage = int(values.repeating_weapons_weapon_damage),
          weapon_damage_misc = int(values.repeating_weapons_weapon_damage_misc),
          weapon_range = values.repeating_weapons_weapon_range,
          weapon_features = values.repeating_weapons_weapon_features;
        setAttrs({
          attribute: weapon_base_total,
          gear: weapon_bonus_total,
          skill: weapon_skill_total,
          current_preset: getTranslationByKey(`attack`) + ` - ${weapon_name}`,
          include_with_roll: `{{weapon-bonus=${weapon_bonus}}} {{weapon-bonus-max=${weapon_bonus_max}}} {{weapon-bonus-misc=${weapon_bonus_misc}}} {{weapon-damage=${weapon_damage}}} {{weapon-damage-misc=${weapon_damage_misc}}} {{weapon-range=${weapon_range}}} {{weapon-features=${weapon_features}}}`,
        });
      }
    );
  });
  
  /* set weapon parry dice pool */
  on("clicked:repeating_weapons:attack-parry-roll", function () {
    clog("Change Detected: Weapon Parry - button clicked");
    getAttrs( ["repeating_weapons_weapon_name", "repeating_weapons_weapon_skill", "repeating_weapons_weapon_base_total", "repeating_weapons_weapon_skill_misc", "repeating_weapons_weapon_skill_total", "repeating_weapons_weapon_bonus", "repeating_weapons_weapon_bonus_max", "repeating_weapons_weapon_bonus_misc", "repeating_weapons_weapon_bonus_total", "repeating_weapons_weapon_damage", "repeating_weapons_weapon_damage_misc", "repeating_weapons_weapon_damage_total", "repeating_weapons_weapon_range", "repeating_weapons_weapon_features", "strength_total", "agility_total", "shoot", "fight",],
      function (values) {
        const weapon_name = values.repeating_weapons_weapon_name,
          weapon_base_total = int(values.repeating_weapons_weapon_base_total),
          weapon_bonus = int(values.repeating_weapons_weapon_bonus),
          weapon_bonus_max = int(values.repeating_weapons_weapon_bonus_max),
          weapon_bonus_misc = int(values.repeating_weapons_weapon_bonus_misc),
          weapon_bonus_total = int(values.repeating_weapons_weapon_bonus_total),
          weapon_skill_total = int(values.repeating_weapons_weapon_skill_total),
          weapon_damage = int(values.repeating_weapons_weapon_damage),
          weapon_damage_misc = int(values.repeating_weapons_weapon_damage_misc),
          weapon_features = values.repeating_weapons_weapon_features;
        setAttrs({
          attribute: weapon_base_total,
          gear: weapon_bonus_total,
          skill: weapon_skill_total,
          current_preset: getTranslationByKey(`parry`) + ` - ${weapon_name}`,
          include_with_roll: `{{weapon-bonus=${weapon_bonus}}} {{weapon-bonus-max=${weapon_bonus_max}}} {{weapon-bonus-misc=${weapon_bonus_misc}}} {{weapon-damage=${weapon_damage}}} {{weapon-damage-misc=${weapon_damage_misc}}} {{weapon-range=^{arms-length-abbr}}} {{weapon-features=${weapon_features}}}`,
        });
      }
    );
  });
  
  /* Monster attacks dice pool */
  on("clicked:repeating_monster:monster-attack-roll", function () {
    clog("Change Detected: Monster Attack - button clicked");
    getAttrs(["repeating_monster_attack_name", "repeating_monster_attack_dice", "repeating_monster_attack_damage", "repeating_monster_attack_features", "repeating_monster_attack_range", "repeating_monster_attack_description"], function (values) {
      const monster_attack_name = values.repeating_monster_attack_name,
        monster_attack_dice = int(values.repeating_monster_attack_dice),
        monster_attack_damage = int(values.repeating_monster_attack_damage),
        monster_attack_features = values.repeating_monster_attack_features,
        monster_attack_range = values.repeating_monster_attack_range,
        monster_attack_description = values.repeating_monster_attack_description,
        attribute = monster_attack_dice;
      setAttrs({
        attribute: attribute,
        skill: 0,
        gear: 0,
        current_preset: getTranslationByKey(`attack`) + ` - ${monster_attack_name}`,
        include_with_roll: `{{weapon-damage=${monster_attack_damage}}} {{attack-features=${monster_attack_features}}} {{weapon-range=${monster_attack_range}}} {{attack-description=${monster_attack_description}}}`,
      });
    });
  });


  /* set prof skill dice pool */
  on("clicked:repeating_pskills", function () {
    clog("Change Detected: Profession Skill - button clicked");
    getAttrs(["repeating_pskills_pskill_name", "repeating_pskills_pskill_base", "repeating_pskills_pskill_level", "repeating_pskills_pskill_misc", "repeating_pskills_pskill_gear"], function (values) {
      const pskill_name = values.repeating_pskills_pskill_name,
        pskill_base = int(values.repeating_pskills_pskill_base),
        pskill_level = int(values.repeating_pskills_pskill_level),
        pskill_misc = int(values.repeating_pskills_pskill_misc),
        pskill_gear = int(values.repeating_pskills_pskill_gear),
        pskill_skill = pskill_level + pskill_misc;
      setAttrs({
        attribute: pskill_base,
        skill: pskill_skill,
        gear: pskill_gear,
        current_preset: getTranslationByKey(`skill`) + ` - ${pskill_name}`,
        include_with_roll: `{{skill-base=${pskill_base}}} {{skill-level=${pskill_level}}} {{skill-bonus-misc=${pskill_misc}}} {{skill-bonus-gear=${pskill_gear}}}`,
      });
    });
  });

  /* set dice pool for Powers action button - NOT WORKING (buttons are hidden) */
  const powers = ["mutations","modules","animalpowers","contacts"];
  powers.forEach(pow => {
    on(`clicked:repeating_${pow}:powerroll`, (eventInfo) => {
      clog(JSON.stringify(eventInfo.sourceAttribute));
      var getAttrsString = [`repeating_${pow}_name`,`repeating_${pow}_powerlevel`];
      getAttrs(getAttrsString, function(values) {
        const name = values[`repeating_${pow}_name`],
          level = int(values[`repeating_${pow}_powerlevel`]),
          setAttrObj = {
            attribute: level,
            skill: 0,
            gear: 0,
            current_preset: getTranslationByKey(`power`) + ` - ${name}`,
            include_with_roll: ``,
          };
          clog(name);
          clog(level);
          clog(JSON.stringify(setAttrObj));
        SetAttrs(setAttrObj);/**/
      });
    });
  });

  /* set spell dice pool */
  on("clicked:repeating_spells:spell-roll", function () {
    clog("Change Detected: Spell - button clicked");
    getAttrs(["repeating_spells_spell_name", "repeating_spells_spell_rank", "repeating_spells_spell_range", "repeating_spells_spell_duration", "repeating_spells_spell_ingredients", "repeating_spells_spell_description", "repeating_spells_spell_willpower", "willpower"], function (values) {
      const spell_name = values.repeating_spells_spell_name,
        spell_rank = int(values.repeating_spells_spell_rank),
        spell_willpower = int(values.repeating_spells_spell_willpower),
        spell_range = values.repeating_spells_spell_range,
        spell_duration = values.repeating_spells_spell_duration,
        spell_ingredients = values.repeating_spells_spell_ingredients,
        spell_description = values.repeating_spells_spell_description,
        willpower = int(values.willpower);
      setAttrs({
        attribute: spell_willpower,
        skill: 0,
        gear: 0,
        current_preset: getTranslationByKey(`spell`) + ` - ${spell_name}`,
        include_with_roll: `{{willpower-total=${willpower}}} {{spell-rank=${spell_rank}}} {{spell-willpower=${spell_willpower}}} {{spell-range=${spell_range}}} {{spell-duration=${spell_duration}}} {{spell-ingredients=${spell_ingredients}}} {{spell-description=${spell_description}}}`,
      });
    });
  });
  
  /* set armor dice pool */
  on("clicked:armor-roll", function () {
    clog("Change Detected: Armor - button clicked");
    getAttrs(["ar_total"], function (values) {
        const ar_total = int(values.ar_total);
        setAttrs({
          attribute: 0,
          gear: ar_total,
          skill: 0,
          current_preset: getTranslationByKey(`armor-roll`),
          include_with_roll: `{{armor-rating=[[ ${ar_total} ]]}}`,
        });
      }
    );
  });
  
   
  /* vehicle/Beast Carry calcs */
  const carry = (strength, vehicleed) => (strength * 4) / (vehicleed + 1);
  
  on("change:vehicleed change:vehicle_strength", function () {
    clog("Change Detected: vehicleed/Unvehicleed");
    getAttrs(["vehicleed", "vehicle_strength"], function (values) {
      const vehicleed = int(values["vehicleed"]),
        strength = int(values["vehicle_strength"]),
        Carry = carry(strength, vehicleed);
      setAttrs({
        vehicle_carry: Carry,
      });
    });
  });
  
  on("change:repeating_beasts", function () {
    clog("Change Detected: Beasts Check Carry Calculation");
    getAttrs(["repeating_beasts_beast_vehicleed", "repeating_beasts_beast_strength"], function (values) {
      const vehicleed = int(values["repeating_beasts_beast_vehicleed"]),
        strength = int(values["repeating_beasts_beast_strength"]),
        Carry = carry(strength, vehicleed);
      setAttrs({
        repeating_beasts_beast_carry: Carry,
      });
    });
  });
  
  /* Broken Indicator flags*/
  // first create am array listing all 4 stats
  const stats = ["strength", "agility", "wits", "empathy"];
  
  /* Update the Dice Pool indicator */
  on(
    "clicked:repeating_pskills:pskill-roll clicked:dice_pool_crafting_monster clicked:dice_pool_force_monster clicked:dice_pool_endure_monster clicked:dice_pool_fight_monster clicked:dice_pool_sneak clicked:dice_pool_know_the_zone clicked:dice_pool_move clicked:dice_pool_shoot clicked:dice_pool_scout clicked:dice_pool_lore clicked:dice_pool_survival clicked:dice_pool_comprehend clicked:dice_pool_manipulate clicked:dice_pool_sense_emotion clicked:dice_pool_heal clicked:dice_pool_animal_handling clicked:reputation-roll clicked:repeating_weapons:attack-roll clicked:repeating_monster:monster-attack-roll clicked:repeating_spells:spell-roll clicked:armor-roll clicked:shield-roll clicked:shield-shove-roll",
    function () {
      clog("Change Detected: Update Dice Pool");
      getAttrs(["roll_the_dice_flag"], function (values) {
        const flag = int(values.roll_the_dice_flag);
        setAttrs({
          roll_the_dice_flag: 1 - flag,
        });
      });
    }
  );
  
  on("sheet:opened change:roll_the_dice_flag", function (event) {
    clog("Change Detected: resetting roll_the_dice_flag to zero");
    const flag = int(event.newValue) || 0; // you don't need to include the ,10
    if (flag === 1)
      setAttrs(
        {
          roll_the_dice_flag: 0,
        },
        {
          silent: true,
        }
      );
  });
  
  /* translate query text */
  on("sheet:opened", function () {
    clog("Translation of query text complete.");
    setAttrs({
      translation_push_query: getTranslationByKey("push-query"),
      translation_whisper_macro_query: "?{" + getTranslationByKey("whisper-macro") + "|" + getTranslationByKey("no") + ",|" + getTranslationByKey("yes") + ",/w gm |" + "}",
      translation_whisper_api_macro_query: "?{" + getTranslationByKey("whisper-macro") + "|" + getTranslationByKey("no") + ",!forl |" + getTranslationByKey("yes") + ",!wforl |" + "}",
    });
  });
  
  // attribute and skill maximum
  // function which takes an attribute name, its score, and its max, and checks the score is valid.
  // if not, resets its value.
  const checkMax = (stat, score, max) => {
    const settings = {};
    if (score > max) {
      settings[stat] = max;
    } else if (score < 0) {
      settings[stat] = 0;
    }
    return settings;
  };
  stats.forEach((stat) => {
    on(`change:${stat} change:tab`, function () {
      getAttrs([stat, "tab"], function (values) {
        const total = int(values[stat]);
        const tab = int(values.tab);
        const max = tab === 3 && stat === "strength_monster" ? 6 : 48;
        //            const max = 48;
        const settings = checkMax(stat, total, max);
        if (settings) setAttrs(settings);
      });
    });
  });
  Object.keys(attributes).forEach((stat) => {
    on(`change:${stat}`, function () {
      getAttrs([stat], function (values) {
        const total = int(values[stat]);
        const max = pools.skill.max;
        const settings = checkMax(stat, total, max);
        if (settings) setAttrs(settings);
      });
    });
  });
  
  /* Update attributes total max */
  on("sheet:opened change:strength_total", function () {
    clog("Change Detected: strength_total has changed");
    getAttrs(["strength", "strength_total", "strength_total_max"], function (values) {
      const strength = int(values.strength),
        strength_total = int(values.strength_total);
      setAttrs({
        strength: strength,
        strength_total: strength_total,
        strength_total_max: strength,
      });
    });
  });
  
  on("sheet:opened change:agility_total", function () {
    clog("Change Detected: agility_total has changed");
    getAttrs(["agility", "agility_total", "agility_total_max"], function (values) {
      const agility = int(values.agility),
        agility_total = int(values.agility_total);
      setAttrs({
        agility: agility,
        agility_total: agility_total,
        agility_total_max: agility,
      });
    });
  });
  
  on("sheet:opened change:wits_total", function () {
    clog("Change Detected: wits_total has changed");
    getAttrs(["wits", "wits_total", "wits_total_max"], function (values) {
      const wits = int(values.wits),
        wits_total = int(values.wits_total);
      setAttrs({
        wits: wits,
        wits_total: wits_total,
        wits_total_max: wits,
      });
    });
  });
  
  on("sheet:opened change:empathy_total", function () {
    clog("Change Detected: empathy_total has changed");
    getAttrs(["empathy", "empathy_total", "empathy_total_max"], function (values) {
      const empathy = int(values.empathy),
        empathy_total = int(values.empathy_total);
      setAttrs({
        empathy: empathy,
        empathy_total: empathy_total,
        empathy_total_max: empathy,
      });
    });
  });
  
  /* set strength dice pool */
  on("clicked:strength-roll", function () {
    clog("Change Detected: Strength - button clicked");
    getAttrs(["strength_total"], function (values) {
      const strength_total = int(values.strength_total);
      setAttrs({
        attribute: strength_total,
        skill: 0,
        gear: 0,
        current_preset: getTranslationByKey(`roll-strength`),
        include_with_roll: "",
      });
    });
  });
  
  /* set agility dice pool */
  on("clicked:agility-roll", function () {
    clog("Change Detected: agility - button clicked");
    getAttrs(["agility_total"], function (values) {
      const agility_total = int(values.agility_total);
      setAttrs({
        attribute: agility_total,
        skill: 0,
        gear: 0,
        current_preset: getTranslationByKey(`roll-agility`),
        include_with_roll: "",
      });
    });
  });
  
  /* set wits dice pool */
  on("clicked:wits-roll", function () {
    clog("Change Detected: wits - button clicked");
    getAttrs(["wits_total"], function (values) {
      const wits_total = int(values.wits_total);
      setAttrs({
        attribute: wits_total,
        skill: 0,
        gear: 0,
        current_preset: getTranslationByKey(`roll-wits`),
        include_with_roll: "",
      });
    });
  });
  
  /* set empathy dice pool */
  on("clicked:empathy-roll", function () {
    clog("Change Detected: empathy - button clicked");
    getAttrs(["empathy_total"], function (values) {
      const empathy_total = int(values.empathy_total);
      setAttrs({
        attribute: empathy_total,
        skill: 0,
        gear: 0,
        current_preset: getTranslationByKey(`roll-empathy`),
        include_with_roll: "",
      });
    });
  });
  
  /* delete empty repeating rows w/out having to close/reopen sheet*/
  on('remove:repeating_injuries remove:repeating_talents remove:repeating_gear remove:repeating_vehiclegear remove:repeating_relationships remove:repeating_spells remove:repeating_beasts remove:repeating_notes remove:repeating_functions remove:repeating_hirelings remove:repeating_monster', function() { 
    const timestamp = Number(new Date())
    setAttrs({ repeat_delete: timestamp });
    clog("repeating row has been removed");
  });
  
  /* beautify preserve:end */
</script>

